(function(){var __webpack_modules__={323:function(e,t,a){"use strict";function n(e){const t=document.createElement("canvas");t.width=e[0],t.height=e[1];const a=t.getContext("2d",{alpha:!0});if(!a)throw new Error("failed to acquire context");return[t,a]}a.d(t,{wA:function(){return n}})},355:function(e,t,a){"use strict";Date.now();console.log.bind(console)},577:function(e,t,a){"use strict";a.d(t,{Y:function(){return i}});var n=a(542),o=a(322);const l={},s={};function i(e,t){if(l[e])return l[e];let a;t=JSON.parse(JSON.stringify(t));try{a=localStorage.getItem(e)}catch(u){console.warn("LocalStorage get failed"),console.error(u)}let i=t;if(null!=a)try{i=JSON.parse(a)}catch(u){console.warn("LocalStorage JSON Parse failed"),console.error(u)}const r=(0,n.iH)(i);return(0,o.m0)((()=>{const t=r.value;let a;try{a=JSON.stringify(t)}catch(u){return console.warn("JSON stringify failed"),console.error(u),null}try{localStorage.setItem(e,a)}catch(u){return console.warn("LocalStorage set failed"),console.error(u),null}})),l[e]=r,s[e]=JSON.parse(JSON.stringify(t)),r}},89:function(e,t,a){"use strict";var n=a(728),o=a(322);function l(e,t,a,n,l,s){const i=(0,o.up)("GameViewer2"),r=(0,o.up)("GameViewer");return 1==e.gameViewer2PreviewMode?((0,o.wg)(),(0,o.j4)(i,{key:0})):((0,o.wg)(),(0,o.j4)(r,{key:1}))}var s=a(682);function i(e,t,a,n,l,i){return(0,o.wg)(),(0,o.iD)("div",null,[t[0]||(t[0]=(0,o.Uk)(" Configurator ")),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.pages,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e},[(0,o._)("pre",null,(0,s.zw)(JSON.stringify(e,null,2)),1)])))),128))])}var r=(0,o.aZ)({name:"Configurator",props:{},data:()=>({pages:[{type:"OnboardingPage",welcomeMessage:"hi world",alignment:"right"},{type:"MixAndMatchPage"}]})}),u=a(599);const c=(0,u.Z)(r,[["render",i]]);var d=c;function _(e,t,a,n,l,i){const r=(0,o.up)("AssetFolder");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Uk)((0,s.zw)(e.msg)+" ",1),(0,o._)("button",{onClick:t[0]||(t[0]=(...t)=>e.moo&&e.moo(...t))},"moo"),(0,o.Wm)(r,{path:"",dirStructure:e.dirStructure},null,8,["dirStructure"])])}const g={key:0},p={key:0},v=["src"],m={key:1},h={class:"indent"};function w(e,t,a,n,l,i){const r=(0,o.up)("AssetFolder",!0);return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Uk)(" Asset Folder "+(0,s.zw)(e.path)+" "+(0,s.zw)(JSON.stringify(e.dirStructure))+" ",1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.entries(e.dirStructure),(([a,n])=>((0,o.wg)(),(0,o.iD)("div",{key:n},[n.constructor===Number?((0,o.wg)(),(0,o.iD)("span",g,[a.endsWith(".png")||a.endsWith(".jpg")?((0,o.wg)(),(0,o.iD)("div",p,[(0,o._)("img",{src:"/sge/vault/"+e.path+"/"+a},null,8,v)])):(0,o.kq)("",!0),(0,o.Uk)(" "+(0,s.zw)(a)+" : "+(0,s.zw)(n),1)])):((0,o.wg)(),(0,o.iD)("span",m,[(0,o._)("b",null,(0,s.zw)(a),1),t[0]||(t[0]=(0,o._)("br",null,null,-1)),(0,o._)("div",h,[(0,o.Uk)((0,s.zw)(JSON.stringify(n))+" ",1),(0,o.Wm)(r,{path:e.path+"/"+a,dirStructure:n},null,8,["path","dirStructure"])])]))])))),128))])}var f=(0,o.aZ)({name:"AssetFolder",props:{dirStructure:{default:()=>({})},path:{default:""}},data:()=>({})});const y=(0,u.Z)(f,[["render",w],["__scopeId","data-v-e541457e"]]);var k=y;const b="sge";async function E(e,t){try{var a=await fetch(`/${b}/api/`+e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)});return await a.json()}catch(n){return void console.warn(n?.body?.error?.stack.split("\n    at Object.callWith (")[0])}}var D=(0,o.aZ)({name:"HelloWorld",components:{AssetFolder:k},props:{msg:String},data:()=>({dirStructure:{}}),methods:{async moo(){let e=await E("getVaultListing",{});this.dirStructure=e}}});const P=(0,u.Z)(D,[["render",_],["__scopeId","data-v-284370ed"]]);var M=P;const T={key:0,class:"loading"},U={key:1,id:"lottie-loading"},I={key:2,class:"loading"},O=["onClick"],x=["title","onClick"],W=["onClick","id"],S={key:0,class:"scratchpad-empty"},C=["href","title"],A={key:4,class:"game-display"},B={key:0,class:"mobile-page"},L={key:5,class:"grid-display"},H={style:{opacity:"0.01",height:"1px",position:"absolute",top:"0px"}},V=["href","title"];function R(e,t,a,l,i,r){const u=(0,o.up)("Lottie"),c=(0,o.up)("LoadingBar"),d=(0,o.up)("DebugPanel");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",{class:(0,s.C_)(e.debugMode?"debug":"live")},[e.problems.length?((0,o.wg)(),(0,o.iD)("div",T,(0,s.zw)(e.problems.join(", ")),1)):(0,o.kq)("",!0),e.loading&&e.game&&e.game.loadingAnimation?((0,o.wg)(),(0,o.iD)("div",U,[(0,o.Wm)(u,{path:"./vault/"+e.gameName+"/"+e.game.loadingAnimation,class:"slab center top-50 lottie",style:{top:"50%"},loop:"true"},null,8,["path"])])):(0,o.kq)("",!0),!e.loading||e.game&&e.game.loadingAnimation||e.problems.length?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",I,[(0,o.Wm)(c,{percent:100*e.preloadCountDone/e.preloadCountTotal},null,8,["percent"])])),e.debugMode&&!e.veryTall?((0,o.wg)(),(0,o.j4)(d,{key:3},{header:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.gameName),1)])),locales:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.locales,((t,a)=>((0,o.wg)(),(0,o.iD)("span",{key:a},[a>0?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Uk)(" - ")],64)):(0,o.kq)("",!0),(0,o._)("span",{onClick:a=>e.localeClick(t),class:(0,s.C_)(e.currentLocale==t?"current-locale":"")},(0,s.zw)(t),11,O)])))),128))])),pages:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.pages,((t,a)=>((0,o.wg)(),(0,o.iD)("div",{key:a,class:(0,s.C_)(e.currentPageIndex==a?"current-page":"")},[(0,o.Uk)((0,s.zw)(a)+" - ",1),(0,o._)("a",{title:t.type,onClick:t=>e.jumpToPage(a)},(0,s.zw)(t.name||t.type),9,x)],2)))),128))])),games:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.gameNames,(t=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:(0,s.C_)(e.gameName==t?"current-game":"")},[(0,o._)("a",{onClick:a=>e.loadGame(t,!0),id:"game-"+t},(0,s.zw)(t),9,W)],2)))),128))])),control:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=t=>e.auraEnabled=t),id:"auraEnabled"},null,512),[[n.e8,e.auraEnabled]]),t[4]||(t[4]=(0,o._)("label",{class:"form-check-label",for:"auraEnabled"}," aura",-1))]),(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=t=>e.fixedSize=t),id:"fixedSize"},null,512),[[n.e8,e.fixedSize]]),t[5]||(t[5]=(0,o._)("label",{class:"form-check-label",for:"fixedSize"}," fixedSize",-1))]),(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.showElementsEnabled=t),id:"showElementsEnabled"},null,512),[[n.e8,e.showElementsEnabled]]),t[6]||(t[6]=(0,o._)("label",{class:"form-check-label",for:"showElementsEnabled"}," show elements",-1))]),(0,o._)("div",null,[(0,o.wy)((0,o._)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=t=>e.simulateSlowLoading=t),id:"simulateSlowLoading"},null,512),[[n.e8,e.simulateSlowLoading]]),t[7]||(t[7]=(0,o._)("label",{class:"form-check-label",for:"simulateSlowLoading"}," simulate slow loading",-1))])])),scratch:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.entries(e.scratchPad),(([e,t])=>((0,o.wg)(),(0,o.iD)("div",{key:e},[(0,o.Uk)((0,s.zw)(e)+": ",1),(0,o._)("i",null,(0,s.zw)(t),1)])))),128)),0==Object.keys(e.scratchPad).length?((0,o.wg)(),(0,o.iD)("div",S," scratchpad empty ")):(0,o.kq)("",!0)])),assets:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.loadedImageURLs,(t=>((0,o.wg)(),(0,o.iD)("a",{target:"_blank",href:e.$getAsset(t),title:t,key:t,class:"thumbnail",style:(0,s.j5)({"background-image":"url('"+e.$getAsset(t)+"')"})},null,12,C)))),128))])),bottom:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.gamePageSize),1)])),_:1})):(0,o.kq)("",!0),e.loading||e.gridMode?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",A,[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.contextType),null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.pages,((t,a)=>((0,o.wg)(),(0,o.iD)("div",{key:a},[(0,o.Wm)(n.uT,{name:"fade"},{default:(0,o.w5)((()=>[e.currentPageIndex===a?((0,o.wg)(),(0,o.iD)("div",B,[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.type),{config:t,onNextPage:e.nextPage,scratchPad:e.scratchPad,onUpdateScratchPad:e.updateScratchPad,onJumpToPage:e.jumpToPage,onJumpRelative:e.jumpRelative,params:e.pageParams},null,40,["config","onNextPage","scratchPad","onUpdateScratchPad","onJumpToPage","onJumpRelative","params"]))])):(0,o.kq)("",!0)])),_:2},1024)])))),128))])),_:1}))])),!e.loading&&e.gridMode?((0,o.wg)(),(0,o.iD)("div",L,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.pages,((t,a)=>((0,o.wg)(),(0,o.iD)("div",{key:a,class:"grid-item"},[((0,o.wg)(),(0,o.j4)((0,o.LL)(t.type),{config:t,onNextPage:e.nextPage,scratchPad:e.scratchPad,onUpdateScratchPad:e.updateScratchPad,onJumpToPage:e.jumpToPage,onJumpRelative:e.jumpRelative,params:e.pageParams},null,40,["config","onNextPage","scratchPad","onUpdateScratchPad","onJumpToPage","onJumpRelative","params"]))])))),128))])):(0,o.kq)("",!0)],2),(0,o._)("div",H,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.loadedImageURLs,(t=>((0,o.wg)(),(0,o.iD)("a",{target:"_blank",href:e.$getAsset(t),title:t,key:t,class:"thumbnail",style:(0,s.j5)({transform:"scale(0.01)","background-image":"url('"+e.$getAsset(t)+"')"})},null,12,V)))),128))])])}const z={class:"debug-panel"},$={class:"header section"},N={class:"locales section"},K={class:"pages section"},F={class:"games section"},j={class:"control section"},q={class:"scratch section"},Z={class:"assets section"},Y={class:"bottom section"};function Q(e,t,a,n,l,s){return(0,o.wg)(),(0,o.iD)("div",z,[(0,o._)("div",$,[(0,o.WI)(e.$slots,"header",{},void 0,!0)]),(0,o._)("div",N,[(0,o.WI)(e.$slots,"locales",{},void 0,!0)]),(0,o._)("div",K,[(0,o.WI)(e.$slots,"pages",{},void 0,!0)]),(0,o._)("div",F,[(0,o.WI)(e.$slots,"games",{},void 0,!0)]),(0,o._)("div",j,[(0,o.WI)(e.$slots,"control",{},void 0,!0)]),(0,o._)("div",q,[(0,o.WI)(e.$slots,"scratch",{},void 0,!0)]),(0,o._)("div",Z,[(0,o.WI)(e.$slots,"assets",{},void 0,!0)]),(0,o._)("div",Y,[(0,o.WI)(e.$slots,"bottom",{},void 0,!0)])])}var J=(0,o.aZ)({name:"DebugPanel",data(){return{}},computed:{},methods:{},props:{prop1:{default:""}}});const G=(0,u.Z)(J,[["render",Q],["__scopeId","data-v-226a6bc3"]]);var X=G;function ee(e,t,a,n,l,i){return(0,o.wg)(),(0,o.iD)("div",{class:"loading-bar",style:(0,s.j5)(e.style)},null,4)}var te=(0,o.aZ)({name:"LoadingBar",data(){return{}},computed:{style(){return{"box-shadow":"calc(var(--page-width) * 0.5 * 0.01 * "+this.percent+") 0 0 #aaa inset"}}},methods:{},props:{percent:{default:0}}});const ae=(0,u.Z)(te,[["render",ee],["__scopeId","data-v-b54d4cde"]]);var ne=ae;const oe={ref:"lottie-container"};function le(e,t,a,n,l,s){return(0,o.wg)(),(0,o.iD)("div",oe,null,512)}var se=a(845),ie=a.n(se),re=(0,o.aZ)({name:"Lottie",data:()=>({}),methods:{},props:{asset:{default:""},path:{default:""},shadowEnabled:{default:!0},loop:{default:!0}},mounted(){if(this.asset||this.path){let e=this.$refs["lottie-container"],t=this.path||window.$getAssetPath(this.asset);console.log("bodymovin:"),console.log(ie()),ie().loadAnimation({container:e,renderer:"svg",loop:!0===this.loop||"true"===this.loop,autoplay:!0,path:t})}else console.warn("uh oh... Lottie did not receive an :asset")}});const ue=(0,u.Z)(re,[["render",le],["__scopeId","data-v-10ead392"]]);var ce=ue,de={name:"IAM_Quiz3_Oct_Wheel_fr_CRS",title:"I AM France Quiz October",context:"NewContext",bgColor:"#222",noLegacy:!0,newGameViewer:!0,pages:[{type:"TestLoadingPage",role:"loading"},{type:"IAMLandingPage",Background:"IAMFrance_October_Quiz_Background_Wide.webp",Logo:"IAMFrance_October_Landing_Week3.webp",Heading:"IAMFrance_October_Landing_Heading.webp",Button:"IAMFrance_October_Landing_Button.webp",persist:{hey:"",hello:10,pos:[0,-37.15881305833884],size:[29.60000000000001,19.595426246977734],Elements:"",heading:{pos:[0,.09500000000000001],size:[30.81870438868687,29.744251945967157],anchor:"center",asset:"Heading",backgroundMode:"contain"},logo:{pos:[-.01445792887174625,-24.618210780627415],size:[14.100000000000014,9.100000000000003],anchor:"center",asset:"Logo",backgroundMode:"contain"},button:{pos:[0,30],size:[19.500000000000025,6.349999999999998],anchor:"center",asset:"Button",backgroundMode:"contain"}}},{type:"IAMQuizPage",Header:"IAMFrance_October_Quiz3_Question.webp",Background:"IAMFrance_October_Quiz_Background_Wide.webp",Brush:"IAMFrance_October_Quiz1_Question_CorrectBrush3.webp",Answer1:"IAMFrance_October_Quiz3_Question_Option1.webp",Answer2:"IAMFrance_October_Quiz3_Question_Option2.webp",Answer3:"IAMFrance_October_Quiz3_Question_Option3.webp",Background1:"IAMFrance_October_Quiz1_Background1.webp",Background2:"IAMFrance_October_Quiz1_Background2.webp",Background3:"IAMFrance_October_Quiz1_Background3.webp",correctAnswers:[1,0,1],persist:{"answer height":90,"question size":1}},{type:"IAMOutcomePage",Background:"IAMFrance_Quiz_Result_Background_Wide.webp",WheelThanks:"IAMFrance_Quiz_Win_Text2.webp",WinText:"IAMFrance_Quiz_Win_Text.webp",LoseText:"IAMFrance_Quiz_Lose_Text1.webp",Button:"IAMFrance_Quiz_Win_Button.webp",NoWheelThanks:"IAMFrance_Quiz_Thanks.webp",ReturnButton:"IAMFrance_Quiz_Wheel_Button_Return.webp",wheelEnabled:1,persist:{Elements:"",hello:10,text:{pos:[0,-15.799999999999983],size:[37.10614422091796,5.499999999999982],anchor:"center",asset:"Thanks",backgroundMode:"contain"},text2:{pos:[0,-32.75493776361939],size:[38.23840572916057,20.56555315935288],anchor:"center",asset:"Text2",backgroundMode:"contain"},button:{pos:[0,-7.100734269609381],size:[36.623827094603996,10],anchor:"center",asset:"Button",backgroundMode:"contain"},winText:{pos:[0,-34.95128219179044],size:[42.645293698359396,21.369761525274367],anchor:"center",asset:"WinText",backgroundMode:"contain"},loseText:{pos:[0,-32.94059729293996],size:[37.57003970544373,22.317763568866756],anchor:"center",asset:"LoseText",backgroundMode:"contain"}}},{type:"IAMWheelPage",Background:"IAMFrance_October_Quiz_Background_Wide.webp",Wheel:"Blur0.webp",Blur1:"Blur1.webp",Blur2:"Blur2.webp",Blur3:"Blur3.webp",Button:"IAMFrance_Quiz_Win_Wheel_CTA.webp",LoseSplash:"IAMFrance_Quiz_Win_Wheel_LoseResult_Splash.webp",Pointer:"IAMFrance_Quiz_Wheel_Pointer.webp",WinSplash:"IAMFrance_Quiz_Wheel_LoseResult_Splash.webp",Chance2:"IAMFrance_Quiz_Win_Wheel_CTA-2Spin.webp",Chance1:"IAMFrance_Quiz_Win_Wheel_CTA-1Spin.webp",SpinButton:"IAMFrance_Quiz_Wheel_Button_Spin.webp",AgainButton:"IAMFrance_Quiz_Wheel_Button_Again.webp",ReturnButton:"IAMFrance_Quiz_Wheel_Button_Return.webp",UnluckySplash:"IAMFrance_Quiz_Win_Wheel_Splash.webp",persist:{Elements:"",spinDuration:12.091739254925459,dAngle:.11624236272624157,expTimeMultiplier:.5768023976609598,rotMultiplier:100,button:{pos:[0,24.44294922917046],size:[30,10],anchor:"center",asset:"Button",backgroundMode:"contain"},splash:{pos:[-3.3910874941228233,4.200000000000012],size:[121.61147321863264,85.9073635080465],anchor:"center",asset:"LoseSplash",backgroundMode:"contain"},triangle:{pos:[0,-25.483147356262887],size:[7.800000000000015,6.7999999999999945],anchor:"center",asset:"Pointer",backgroundMode:"contain"},chance:{pos:[0,32.47351666671937],size:[21.00000000000004,1.9500000000000022],anchor:"center",asset:"Chance1",backgroundMode:"contain"}}},{type:"BlankPage"}]};const _e={IAM_Quiz3_Oct_Wheel_fr_CRS:de};var ge=a(708),pe={deploymentName:"testing",commitHash:"72f3315f",buildNumber:5031,gameName:"IAM_Quiz3_Oct_Wheel_fr_CRS",newGameViewer:!0},ve=a(438),me=a(983),he=a(287),we=a(598),fe=a(734);class ye{items={};pendingItems={};loadFunc;constructor(e){this.loadFunc=e}async load(e){let t;"string"===typeof e&&(e=[e]);for(const n of e){const o=this.items[n];if(o)return o;const l=this.pendingItems[n];if(l)return await l;t=this.loadFunc(n),this.pendingItems[n]=t;try{this.items[n]=await t}catch(a){throw console.warn(`error loading resource ${e}`),a}delete this.pendingItems[n]}if(t)return t;throw new Error("resource load failed")}get(e){const t=this.getOrNull(e);if(null==t)throw new Error(`${this.constructor.name}: resource not found ${e}`);return t}getOrNull(e){const t=Object.prototype.hasOwnProperty.call(this.items,e)?this.items[e]:null;return null===t&&console.warn(`resource ${e} not found`),t}}function ke(e,t,a){let n={};n=window.progressRecords=window.progressRecords||n,window.progressRecords[e]={bytesDone:t,totalBytes:a,filename:e}}const be={};function Ee(e){return new Promise(((t,a)=>{const n=(new fe.E).setPath(""),o=`vault/${window.gameName}/${e}`;n.load(o,(function(a){window._gltf=a,a.$subs={},a.$filename=e;for(const e of a.scene.children)if("Object3D"===e.type)for(const t of e.children)if(t.name.indexOf("SCREEN")>-1){const n=t.clone();n.$originalPosition=n.position.clone(),window.poop=n;const o=e.matrix.clone().multiply(t.matrix);n.matrix.copy(o),n.matrixAutoUpdate=!1,a.$subs[e.name+"/"+n.name]=n}t(a)}),(t=>{ke(e,t.loaded,t.loaded)}),(function(e){a(e)}))}))}class De extends ye{constructor(){super(Ee)}getSubObject(e,t){const a=this.get(e);if(!a)return null;const n=a.$subs[t];return n||null}}be["gltf"]=new De;function Pe(e){return new Promise(((t,a)=>{const n=(new ve.dpR).setPath(""),o=`vault/${window.gameName}/${e}`;n.load(o,(function(a){a.wrapS=ve.rpg,a.wrapT=ve.rpg;const n=.2,o=Math.floor(a.image.width*a.image.height*n);ke(e,o,o),t(a)}),(t=>{ke(e,t.loaded,null)}))}))}class Me extends ye{constructor(){super(Pe)}}be["texture"]=new Me;class Te extends ye{constructor(){super((e=>(0,ge.Wqv)(`vault/${window.gameName}/${e}`)))}}be["csv"]=new Te;class Ue extends ye{constructor(){super((e=>(0,ge.OlH)(`vault/${window.gameName}/${e}`)))}}be["txt"]=new Ue;async function Ie(e){const t=`vault/${window.gameName}/${e}`;return await new Promise((e=>{(new we.I).load(t,(function(t){e(t)}))}))}class Oe extends ye{constructor(){super(Ie)}loadEnvMap(e,t){const a=this.get(e);if(!a)return null;const n=new ve.anP(t),o=n.fromEquirectangular(a),l=o.texture;return t.toneMapping=ve.EoG,t.toneMappingExposure=1,t.outputEncoding=ve.knz,l}}be["exr"]=new Oe;async function xe(e){const t=`vault/${window.gameName}/${e}`;return await new Promise((e=>{(new he.J).load(t,(function(t){e(t)}))}))}class We extends ye{defaultFont=null;constructor(){super((async e=>{const t=await xe(e);return this.defaultFont||(this.defaultFont=t),t}))}getDefaultFont(){if(!this.defaultFont)throw new Error("no fonts, can't select default font");return this.defaultFont}}be["font"]=new We;class Se{howls={};constructor(){}loadSprites(e,t){const a=`./vault/${window.gameName}/${e}`;return this.howls[e]=new me.Howl({src:[a],sprite:t}),new Promise((t=>{this.howls[e].once("load",t)}))}loadSound(e){const t=`./vault/${window.gameName}/${e}`;return this.howls[e]=new me.Howl({src:[t]}),new Promise((t=>{this.howls[e].once("load",t)}))}play(e,t){this.howls[e]?null!==t?this.howls[e].play(t):this.howls[e].play():console.warn("sound not found "+e)}}new Se;const Ce={class:"slab full",style:{background:"black"}};function Ae(e,t){return(0,o.wg)(),(0,o.iD)("div",Ce)}const Be={},Le=(0,u.Z)(Be,[["render",Ae],["__scopeId","data-v-05236200"]]);var He=Le,Ve=a(542),Re={__name:"Blat2",props:{asset:{default:""}},emits:["tap"],setup(e,{emit:t}){(0,o.f3)("gameTools"),(0,o.f3)("navTools"),(0,o.f3)("appTools");const a=(0,o.f3)("pageTools"),n=e,l=(0,o.Fl)((()=>n.asset?{"background-image":"url('"+a.getAssetUrl(n.asset)+"')"}:{})),i=t,r=(0,Ve.iH)(!1);function u(){r.value=!0}let c=0;function d(){r.value=!1;let e=Date.now();e-c<200||(c=e,i("tap"))}return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{onMousedown:u,onMouseup:d,onTouchstart:u,onTouchend:d,class:(0,s.C_)("blat2"),style:(0,s.j5)(l.value)},[(0,o.WI)(e.$slots,"default")],36))}};const ze=(0,u.Z)(Re,[["__scopeId","data-v-8cc479c0"]]);var $e=ze;const Ne={class:"mobile-page"},Ke={class:"loading-bar"},Fe={class:"loading-message"};var je={__name:"TestLoadingPage",setup(e){const t=(0,o.f3)("gameTools"),a=((0,o.f3)("gameTools"),(0,o.f3)("navTools"),(0,o.f3)("appTools"),t.loadingPercent),n=t.loadingMessage;return(e,t)=>((0,o.wg)(),(0,o.iD)("div",Ne,[(0,o._)("div",Ke,[(0,o._)("div",{class:"progress",style:(0,s.j5)({width:"2"*(0,Ve.SU)(a)+"px"})},null,4)]),(0,o._)("div",Fe,(0,s.zw)((0,Ve.SU)(n)),1)]))}};const qe=(0,u.Z)(je,[["__scopeId","data-v-271ac43d"]]);var Ze=qe,Ye=a(772);const Qe=150;var Je=(0,o.aZ)({__name:"Button3",props:{asset:{default:""},toggledAsset:{default:""},cover:{default:!1}},emits:["tap","down","up"],setup(e,{emit:t}){const{gameTools:a,navTools:n,appTools:l,pageTools:i}=(0,Ye.b)(),r=e,u=(0,o.Fl)((()=>{let e={};if(r.asset){let t=r.asset?i.getAssetUrl(r.asset||""):"";e={"background-image":t?`url('${t}')`:""}}return e}));let c=(0,Ve.iH)(!1);const d=t;let _=!1;const g=(0,Ve.iH)(!1);let p=!0;(0,o.bv)((async()=>{await(0,ge._vH)(350),p=!1}));let v=!1;function m(){v=!0,g.value||p||(g.value=!0,c.value=!0,w=Date.now(),d("down"))}function h(){g.value||p||v||(w=Date.now(),g.value=!0,c.value=!0,d("down"))}let w=0;async function f(){if(v)return;if(!g.value)return void(c.value=!1);const e=Date.now()-w;e<Qe&&await(0,ge._vH)(Qe-e),g.value=!1,_=!0,d("tap"),d("up")}function y(){g.value&&(g.value=!1,c.value=!1)}async function k(){if(!v)return;if(!g.value)return;const e=Date.now()-w;e<Qe&&await(0,ge._vH)(Qe-e),g.value=!1,_=!0,d("tap"),d("up")}return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{onMousedown:h,onMouseup:f,onMouseleave:y,onTouchstart:m,onTouchend:k,class:(0,s.C_)("button3 "+(g.value?"pressed":"")),style:(0,s.j5)(u.value)},[(0,o.WI)(e.$slots,"default")],38))}});const Ge=(0,u.Z)(Je,[["__scopeId","data-v-247204ee"]]);var Xe=Ge;const et={class:"inner2"};var tt={__name:"Background3",props:{asset:{default:""},dim:{default:0}},setup(e){const t=e,a=(0,o.Fl)((()=>({background:`rgba(0,0,0,${t.dim})`}))),n=(0,o.f3)("pageTools"),l=(0,o.Fl)((()=>t.asset?{"background-image":"url('"+n.getAssetUrl(t.asset)+"')"}:{}));return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"background3",style:(0,s.j5)(l.value)},[(0,o._)("div",{class:"dimmer",style:(0,s.j5)(a.value)},null,4),(0,o._)("div",et,[(0,o.WI)(e.$slots,"default")])],4))}};const at=(0,u.Z)(tt,[["__scopeId","data-v-13f9d9af"]]);var nt=at;const ot=Symbol("isNotifies"),lt=Symbol("isNotifiable");function st(){const e=new Set,t=function(t,n){e.add(t);const o=()=>{a(t)};return n&&n(o),o},a=function(t){e.delete(t)},n=function(t){for(const a of e)a(t)};return Object.assign(t,{trigger:n,[ot]:!0,[lt]:!0}),t}const it="sge";async function rt(e,t){console.log(`api ${e} ${JSON.stringify(t)}`);try{const a=await fetch(`/${it}/admin/api/`+e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)});return await a.json()}catch(a){try{console.warn(a.body.error.stack.split("\n    at Object.callWith (")[0])}catch(n){console.error(a)}return}}async function ut(e,t){const a=new FormData;a.append("assetFile",e,e.name),a.append("gameName",t);try{const e=await fetch(`/${it}/admin/api/uploadAsset`,{method:"POST",body:a});if(!e.ok){const t=await e.text();throw new Error(`Upload failed with status ${e.status}: ${t}`)}return await e.json()}catch(n){return void console.error("File upload error:",n)}}var ct=a(577);const dt=new Map,_t=(0,Ve.iH)(0);async function gt(e){const t=e.gameName.value,a={gameName:t,updatedGame:e.game.value};await rt("commitGameChanges",a),e.dirty.value=!1,e.originalGameVal.value=JSON.parse(JSON.stringify(e.game.value))}async function pt(e){console.log("Attempting to reload page..."),location.reload(),console.log("Reload function called.")}const vt=(0,Ve.iH)({});function mt(e,t){const{pageTools:a}=(0,Ye.b)();a.config.value.persist||(a.config.value.persist={});let n=t;e in a.config.value.persist&&(n=a.config.value.persist[e]);const l=(0,Ve.iH)(n);return vt.value[e]=1,(0,o.YP)(l,(t=>{a.config.value.persist[e]=t})),a.config.value.persist[e]=l.value,l}function ht(){const{pageTools:e}=(0,Ye.b)(),t=e.pageIndex.value;dt.set(t,[])}function wt(){const{pageTools:e,gameTools:t}=(0,Ye.b)();let a=dt.get(e.pageIndex.value),n=0;function o(e){n+=1,e.addedOrder=n,a.push(e)}function l(e,t,a){const{persist:n="config",order:l=0}=a||{},s=st(),i={name:e,type:"button",data:(0,Ve.iH)(),closure:()=>{s.trigger()},order:l};return t&&s(t),o(i),_t.value+=1,s}function s(a,n,l,s,i){const{persist:r="config",order:u=0}=s||{};let c;c="none"==r?(0,Ve.iH)(n):"config"==r?mt(a,n):(0,ct.Y)(`_${t.gameName}_${e.pageIndex.value}_${e.config.value.type}`,n);const d={name:a,type:l,data:c,order:u,...i||{}};return o(d),_t.value+=1,d.data}function i(e,t={size:[20,20],pos:[0,0],anchor:"center",asset:"",backgroundMode:"contain"},a){return s(e,t,"hero2",a)}function r(e){return s(e,"","heading",{persist:"none"})}function u(e,t=0,a){return s(e,t,"number",a)}function c(e,t=[0,0],a){return s(e,t,"v2",a)}function d(e,t,a){const n={name:e,type:"textDisplay",data:t};o(n),_t.value+=1}function _(e,t){throw new Error("deprecated")}function g(t,a,n){const l={name:t,type:"assetAssign",data:(0,Ve.iH)(a||e.config.value[t])};o(l),_t.value+=1}function p(e,t,a){return s(e,t,"boolArray",a)}function v(e,t,a,n){return s(e,t,"smallInteger",n,{max:a,readonly:n?.readonly})}return a||(a=[],dt.set(e.pageIndex.value,a)),{pts:a,addNumber:u,protoTinkersVersion:_t,addV2:c,addHeading:r,addHero2:i,addButton:l,addTextDisplay:d,addAsset:_,addBoolArray:p,addAssetAssign:g,addSmallInteger:v}}const ft={class:"slab full rows"};var yt=(0,o.aZ)({__name:"IAMQuizPage",setup(e){const{navTools:t,gameTools:a,pageTools:n}=(0,Ye.b)();ht();const l=wt();l.addAssetAssign("Background");const i=l.addNumber("answer height",100),r=(0,o.Fl)((()=>({height:`${i.value}%`,top:"50%",transform:"translateY(-50%)"}))),u=l.addNumber("question size",1.5);function c(e){if(!(_.value>=h.value)&&!v.value[e]&&(v.value[e]=1,_.value+=1,f.value[e]="Brush",_.value==h.value)){let e=1;for(let t=0;t<g.value;t++)v.value[t]!=m.value[t]&&(e=0),m.value[t]||(w.value[t]={opacity:.1});a.updateScratchPad({win:e}),d()}}async function d(){await(0,ge._vH)(2600),t.nextPage()}const _=(0,Ve.iH)(0),g=(0,Ve.iH)(n.config.value.correctAnswers.length),p=(0,Ve.iH)((0,ge.w6H)(g.value)),v=(0,Ve.iH)([0,0,0,0,0]),m=(0,Ve.iH)(n.config.value.correctAnswers);l.addTextDisplay("given answers",(0,o.Fl)((()=>JSON.stringify(v.value)))),l.addTextDisplay("correct answers",(0,o.Fl)((()=>JSON.stringify(m.value))));const h=(0,Ve.iH)((0,ge.Smz)(m.value));l.addTextDisplay("correct answer count",(0,o.Fl)((()=>JSON.stringify(h.value))));const w=(0,Ve.iH)([{},{},{},{},{}]),f=(0,Ve.iH)(["","","","",""]),y=(0,Ve.iH)(["Answer1","Answer2","Answer3","Answer4","Answer5"]),k=(0,Ve.iH)(["Background1","Background2","Background3","Background4","Background5"]);for(let o=0;o<5;o++)l.addAssetAssign(`Answer${o+1}`,""),l.addAssetAssign(`Background${o+1}`,"");return(e,t)=>((0,o.wg)(),(0,o.j4)(nt,{asset:"Background"},{default:(0,o.w5)((()=>[(0,o._)("div",ft,[(0,o._)("div",{class:"cell",style:(0,s.j5)([{background:"black"},{"flex-grow":`${(0,Ve.SU)(u)}`}])},[(0,o.Wm)($e,{class:"slab full",style:{width:"80%",left:"10%"},asset:"Header"})],4),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(p.value,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"cell",key:e,style:{background:"black"}},[(0,o.Wm)($e,{class:"slab full animate-opacity",asset:k.value[e],style:(0,s.j5)([{"background-size":"cover"},{...w.value[e]}])},null,8,["asset","style"]),(0,o.Wm)($e,{class:"slab full animate-opacity",asset:f.value[e],style:(0,s.j5)({...r.value,...w.value[e]})},null,8,["asset","style"]),(0,o.Wm)(Xe,{class:"slab full animate-opacity",style:(0,s.j5)([{width:"80%",left:"10%"},{...r.value,...w.value[e]}]),asset:y.value[e],onTap:t=>c(e)},null,8,["asset","onTap","style"])])))),128))])])),_:1}))}});const kt=(0,u.Z)(yt,[["__scopeId","data-v-35ff9090"]]);var bt=kt,Et=(0,o.aZ)({__name:"Hero2",props:{asset:{},y:{},x:{},w:{},h:{},widthByHeight:{type:Boolean,default:!0},xByHeight:{type:Boolean,default:!0},anchor:{default:"center"},pos:{default:"by height"},size:{default:"by height"},backgroundMode:{default:"contain"}},emits:["tap"],setup(e,{emit:t}){const{gameTools:a,navTools:n,appTools:l,pageTools:i}=(0,Ye.b)(),r=(0,Ve.iH)(""),u=e;function c(e,t){return void 0==e?t:"string"==typeof e?parseFloat(e):e}const d=(0,o.Fl)((()=>c(u.x,0))),_=(0,o.Fl)((()=>c(u.y,0))),g=(0,o.Fl)((()=>c(u.w,50))),p=(0,o.Fl)((()=>c(u.h,50))),v={center:{top:"50%",left:"50%"},n:{top:"0%",left:"50%"},nw:{top:"0%",left:"0%"},ne:{top:"0%",right:"0%"},w:{top:"50%",left:"0%"},e:{top:"50%",right:"0%"},sw:{bottom:"0%",left:"0%"},s:{bottom:"0%",left:"50%"},se:{bottom:"0%",right:"0%"}},m=e=>"by height"==u.pos?`var(--h) * 0.01 * ${e}`:`var(--w) * 0.01 * ${e}`,h=e=>"by height"==u.size?`var(--h) * 0.01 * ${e}`:`var(--w) * 0.01 * ${e}`,w=(0,o.Fl)((()=>{const e={...v[u.anchor]},t=m(d.value||0),a=m(_.value||0);e.left&&(e.left=`calc(${e.left} + ${t})`),e.right&&(e.right=`calc(${e.right} - ${t})`),e.top&&(e.top=`calc(${e.top} + ${a})`),e.bottom&&(e.bottom=`calc(${e.bottom} - ${a})`);let n=u.asset?i.getAssetUrl(u.asset||""):"",o={"background-image":n?`url('${n}')`:"","background-size":u.backgroundMode,transform:`translate(${e.right?"+50%":"-50%"}, ${e.bottom?"+50%":"-50%"})`,width:`calc(${h(g.value||0)})`,height:`calc(${h(p.value||0)})`,...e};return o})),f=t,y=(0,Ve.iH)(!1);function k(){y.value=!0}function b(){y.value=!1,f("tap")}return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{onMousedown:k,onMouseup:b,onTouchstart:k,onTouchend:b,class:(0,s.C_)("blat2 "+r.value),style:(0,s.j5)(w.value)},[(0,o.WI)(e.$slots,"default")],38))}});const Dt=(0,u.Z)(Et,[["__scopeId","data-v-08d13904"]]);var Pt=Dt;var Mt=(0,o.aZ)({__name:"GlowBorder",props:{color:{default:""},radius:{default:1}},emits:["tap","down","up"],setup(e,{emit:t}){const{gameTools:a,navTools:n,appTools:l,pageTools:i}=(0,Ye.b)(),r=e,u=(0,o.Fl)((()=>({"box-shadow":`0px 0px calc(var(--h) * 0.01 * ${r.radius}) ${r.color} inset`})));(0,Ve.iH)(!1);(0,Ve.iH)(!1);let c=!0;(0,o.bv)((async()=>{await(0,ge._vH)(350),c=!1}));return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{style:(0,s.j5)([{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},u.value])},null,4))}});const Tt=Mt;var Ut=Tt,It=(0,o.aZ)({__name:"IAMLandingPage",setup(e){const{navTools:t}=(0,Ye.b)();async function a(){await(0,ge._vH)(300),t.nextPage()}ht();const n=wt();n.addAssetAssign("Background","");const l=n.addNumber("vignette radius",10),s=n.addNumber("vignette opacity",0),i=n.addHero2("heading",{pos:[0,0],size:[20,20],anchor:"center",asset:"Heading",backgroundMode:"contain"}),r=n.addHero2("logo",{pos:[0,-20],size:[20,20],anchor:"center",asset:"Logo",backgroundMode:"contain"}),u=n.addHero2("button",{pos:[0,30],size:[30,10],anchor:"center",asset:"Button",backgroundMode:"contain"});return(e,t)=>((0,o.wg)(),(0,o.j4)(nt,{asset:"Background"},{default:(0,o.w5)((()=>[(0,o.Wm)(Ut,{color:`rgba(0,0,0,${(0,Ve.SU)(s)})`,radius:(0,Ve.SU)(l)},null,8,["color","radius"]),(0,o.Wm)(Pt,{x:(0,Ve.SU)(r).pos[0],y:(0,Ve.SU)(r).pos[1],w:(0,Ve.SU)(r).size[0],h:(0,Ve.SU)(r).size[1],asset:(0,Ve.SU)(r).asset,anchor:(0,Ve.SU)(r).anchor},null,8,["x","y","w","h","asset","anchor"]),(0,o.Wm)(Pt,{x:(0,Ve.SU)(i).pos[0],y:(0,Ve.SU)(i).pos[1],w:(0,Ve.SU)(i).size[0],h:(0,Ve.SU)(i).size[1],asset:(0,Ve.SU)(i).asset,anchor:(0,Ve.SU)(i).anchor},null,8,["x","y","w","h","asset","anchor"]),(0,o.Wm)(Pt,{x:(0,Ve.SU)(u).pos[0],y:(0,Ve.SU)(u).pos[1],w:(0,Ve.SU)(u).size[0],h:(0,Ve.SU)(u).size[1],anchor:(0,Ve.SU)(u).anchor},{default:(0,o.w5)((()=>[(0,o.Wm)(Xe,{class:"slab full",onTap:a,asset:(0,Ve.SU)(u).asset},null,8,["asset"])])),_:1},8,["x","y","w","h","anchor"])])),_:1}))}});const Ot=(0,u.Z)(It,[["__scopeId","data-v-1abfbb2c"]]);var xt=Ot,Wt=(0,o.aZ)({__name:"IAMOutcomePage",setup(e){const{navTools:t,gameTools:a,pageTools:n}=(0,Ye.b)();function l(){window.parent.postMessage("close","*")}async function s(){await(0,ge._vH)(300),t.nextPage()}const i=(0,Ve.iH)(a.scratchPad.value.win||0),r=(0,Ve.iH)(n.config.value.wheelEnabled||0);ht();const u=wt(),c=u.addSmallInteger("win",i.value,2);(0,o.YP)(c,(e=>i.value=e));const d=u.addSmallInteger("wheelEnabled",r.value,2);(0,o.YP)(d,(e=>r.value=e)),u.addAssetAssign("Background");const _=u.addHero2("text",{pos:[0,-20],size:[20,20],anchor:"center",asset:"",backgroundMode:"contain"});u.addAssetAssign("NoWheelThanks",""),u.addAssetAssign("WheelThanks","");const g=u.addHero2("winText",{pos:[0,-20],size:[20,20],anchor:"center",asset:"WinText",backgroundMode:"contain"}),p=u.addHero2("loseText",{pos:[0,-20],size:[20,20],anchor:"center",asset:"LoseText",backgroundMode:"contain"}),v=u.addHero2("button",{pos:[0,30],size:[30,10],anchor:"center",asset:"Button",backgroundMode:"contain"});return u.addAssetAssign("ReturnButton",""),(e,t)=>((0,o.wg)(),(0,o.j4)(nt,{asset:"Background"},{default:(0,o.w5)((()=>[(0,o.Wm)(Pt,{x:(0,Ve.SU)(_).pos[0],y:(0,Ve.SU)(_).pos[1],w:(0,Ve.SU)(_).size[0],h:(0,Ve.SU)(_).size[1],asset:r.value?"WheelThanks":"NoWheelThanks",anchor:(0,Ve.SU)(_).anchor},null,8,["x","y","w","h","asset","anchor"]),i.value?((0,o.wg)(),(0,o.j4)(Pt,{key:0,x:(0,Ve.SU)(g).pos[0],y:(0,Ve.SU)(g).pos[1],w:(0,Ve.SU)(g).size[0],h:(0,Ve.SU)(g).size[1],asset:(0,Ve.SU)(g).asset,anchor:(0,Ve.SU)(g).anchor},null,8,["x","y","w","h","asset","anchor"])):(0,o.kq)("",!0),i.value?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(Pt,{key:1,x:(0,Ve.SU)(p).pos[0],y:(0,Ve.SU)(p).pos[1],w:(0,Ve.SU)(p).size[0],h:(0,Ve.SU)(p).size[1],asset:(0,Ve.SU)(p).asset,anchor:(0,Ve.SU)(p).anchor},null,8,["x","y","w","h","asset","anchor"])),r.value?((0,o.wg)(),(0,o.j4)(Pt,{key:2,x:(0,Ve.SU)(v).pos[0],y:(0,Ve.SU)(v).pos[1],w:(0,Ve.SU)(v).size[0],h:(0,Ve.SU)(v).size[1],anchor:(0,Ve.SU)(v).anchor},{default:(0,o.w5)((()=>[(0,o.Wm)(Xe,{class:"slab full",onTap:s,asset:(0,Ve.SU)(v).asset},null,8,["asset"])])),_:1},8,["x","y","w","h","anchor"])):(0,o.kq)("",!0),r.value?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(Pt,{key:3,x:(0,Ve.SU)(v).pos[0],y:(0,Ve.SU)(v).pos[1],w:(0,Ve.SU)(v).size[0],h:(0,Ve.SU)(v).size[1],anchor:(0,Ve.SU)(v).anchor},{default:(0,o.w5)((()=>[(0,o.Wm)(Xe,{class:"slab full",onTap:l,asset:"ReturnButton"})])),_:1},8,["x","y","w","h","anchor"]))])),_:1}))}});const St=(0,u.Z)(Wt,[["__scopeId","data-v-617f9e4f"]]);var Ct=St,At=a(397);class Bt{}class Lt{_destroyNotifier=st();destroyNotifier=this._destroyNotifier;_isDestroyed=!1;isDestroyed(){return this._isDestroyed}destroy(){this.clear(),this._destroyNotifier.trigger(),this._isDestroyed=!0}resources=new Map;getAll(){return[...this.resources.values()]}add(e){if(!e||!e.constructor)throw new Error("Added resources must be instances of a class");const t=e.constructor;if(this.resources.has(t))throw new Error(`Resource ${t.name} already registered`);return this.resources.set(t,e),e.destroyNotifier&&e.destroyNotifier((()=>{this.remove(e.constructor)})),this}get(e){const t=this.resources.get(e);if(!t)throw new Error(`Resource "${e.name}" not found in the registry.`);return t}has(e){return this.resources.has(e)}remove(e){return this.resources.delete(e)}clear(){const e=[...this.resources.entries()];e.reverse();for(const[t,a]of e)console.log("Destroying ",a&&a.constructor.name),a.destroy&&a.destroy(),this.remove(t);this.resources.clear()}}let Ht=new Lt;function Vt(){Ht=new Lt}function Rt(e){return Ht.get(e)}const zt=Rt;function $t(e){return Ht.add(e),e}function Nt(){Ht.clear()}var Kt=a(862);class Ft extends Bt{onRender=st();onPreFrame=st();onFrame=st();onPostFrame=st();enabled;dtCap;fpsCap;slowMode;bulletTime;#e=!1;#t;#a=0;#n=!1;#o=null;movingAverageDt=0;elapsed=0;constructor(e={}){super();const{startRunning:t=!0,enabled:a=(0,Ve.iH)(!0),dtCap:n=(0,Ve.iH)(1/60*4),fpsCap:o=(0,Ve.iH)(!1),slowMode:l=(0,Ve.iH)(!1),bulletTime:s=(0,Ve.iH)(1)}=e;this.enabled=a,this.dtCap=n,this.fpsCap=o,this.slowMode=l,this.bulletTime=s,this.enabled.value=t,this.#t=Date.now(),this.#l()}step(){this.#n=!0}stopForever=()=>{this.#e||(this.#e=!0)};destroy(){this.stopForever()}#l=async()=>{const e=new ve.SUY,t=a=>{if(!this.#e){if(this.enabled.value){const t=e.getDelta()/this.bulletTime.value;try{this.onPreFrame.trigger(t)}catch(n){console.warn("error encountered in onFrame"),console.error(n),this.stopForever()}try{this.onFrame.trigger(t)}catch(n){console.warn("error encountered in onFrame"),console.error(n),this.stopForever()}try{this.onPostFrame.trigger(t)}catch(n){console.warn("error encountered in onFrame"),console.error(n),this.stopForever()}try{this.onRender.trigger(t)}catch(n){console.warn("error encountered in onRender"),console.error(n),this.stopForever()}this.elapsed+=t}requestAnimationFrame(t)}};t(0)}}var jt=a(621);function qt(e){const t=(0,Ve.XI)([1,1]),a=(0,jt.h4X)(e);return(0,o.m0)((()=>{t.value=[a.width.value,a.height.value]})),t}ve.SUY;const Zt={class:"spinner alt-spinner",style:{transform:"translate(-80%, -80%) scale(50%)"}};var Yt=(0,o.aZ)({__name:"SpinWheel",setup(e){const{pageTools:t}=(0,Ye.b)(),a=wt(),n=a.addNumber("spinDuration",5,{order:-1});let l=0;const i=()=>{r.value=!0,l=Date.now()+1e3*n.value,v.value=2*(Math.random()-.5)*.15};a.addButton("spin",i,{order:-1});const r=(0,Ve.iH)(!1),u=a.addNumber("dAngle",0,{order:-1});(0,Ve.iH)(0);const c=(0,Ve.iH)();Vt(),$t(new Ft);const d=(0,Ve.iH)();(0,At.u7)(d);function _(e,t,a){return(e-t)/(a-t)}const g=a.addNumber("expTimeMultiplier",10,{order:-1}),p=a.addNumber("rotMultiplier",100,{order:-1}),v=(0,Ve.iH)(0);zt(Ft).onFrame((e=>{if(r.value){const e=u.value,t=n.value-.001*(l-Date.now()),a=t/n.value;if(t<n.value-.01){let n=Math.exp(-g.value*t)*p.value;n*=(1-a)*(1-a),u.value=v.value+n,m.value=u.value-e}else u.value=v.value,m.value=0,r.value=!1}}));qt(d);let m=(0,Ve.iH)(0);const h=(0,Ve.iH)([1,0,0,0]);return zt(Ft).onFrame((()=>{const e=Math.abs((0,Kt.VZ)(m.value));h.value[1]=(0,Kt.uZ)(_(e,.04,.08),0,1),h.value[2]=(0,Kt.uZ)(_(e,.1,.15),0,1),h.value[3]=(0,Kt.uZ)(_(e,.18,.4),0,1)})),t.onDispose(Nt),(e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"anchor",ref_key:"anchor",ref:c,style:{position:"absolute",width:"0",height:"0",top:"45%",left:"50%",overflow:"visible"}},[(0,o._)("div",{ref_key:"bg",ref:d,class:"spinner",style:(0,s.j5)({transform:"translate(-50%, -50%) rotate("+(0,Ve.SU)(u)+"rad)"})},[(0,o.Wm)($e,{asset:"Wheel",class:"slab full",style:(0,s.j5)({opacity:h.value[0]})},null,8,["style"]),(0,o.Wm)($e,{asset:"Blur1",class:"slab full",style:(0,s.j5)({opacity:h.value[1]})},null,8,["style"]),(0,o.Wm)($e,{asset:"Blur2",class:"slab full",style:(0,s.j5)({opacity:h.value[2]})},null,8,["style"]),(0,o.Wm)($e,{asset:"Blur3",class:"slab full",style:(0,s.j5)({opacity:h.value[3]})},null,8,["style"])],4),(0,o._)("div",Zt,[(0,o.Wm)($e,{asset:"Wheel",class:"slab full",style:(0,s.j5)({opacity:h.value[0]})},null,8,["style"]),(0,o.Wm)($e,{asset:"Blur1",class:"slab full",style:(0,s.j5)({opacity:h.value[1]})},null,8,["style"]),(0,o.Wm)($e,{asset:"Blur2",class:"slab full",style:(0,s.j5)({opacity:h.value[2]})},null,8,["style"]),(0,o.Wm)($e,{asset:"Blur3",class:"slab full",style:(0,s.j5)({opacity:h.value[3]})},null,8,["style"])])],512))}});const Qt=(0,u.Z)(Yt,[["__scopeId","data-v-d3a3288c"]]);var Jt=Qt,Gt=(0,o.aZ)({__name:"IAMWheelPage",setup(e){const{navTools:t,gameTools:a,pageTools:n}=(0,Ye.b)();ht();const l=wt(),s=(0,Ve.iH)(!!a.scratchPad.value.win),i=(0,Ve.iH)(s.value?2:1),r=l.addSmallInteger("spinsRemaining",i.value,3,{persist:"none",readonly:!0});(0,o.YP)(i,(e=>{r.value=e}));const u=(0,o.Fl)((()=>["","Chance1","Chance2"][i.value])),c=(0,Ve.iH)(0),d=l.addSmallInteger("gamePhase",c.value,3,{persist:"none",readonly:!0});(0,o.YP)(c,(e=>{d.value=e}));const _=l.addSmallInteger("doubleSpin",s.value?1:0,2,{persist:"none",readonly:!0});(0,o.YP)(s,(e=>{_.value=e?1:0})),l.addTextDisplay("info",(0,o.Fl)((()=>`gamePhase: ${c.value}, remaining=${i.value}, double=${s.value}`)));const g=(0,Ve.iH)(!1);async function p(){0==c.value&&(i.value-=1,c.value=1,l.pts.find((e=>"spin"==e.name)).closure(),await(0,ge._vH)(11100),g.value=!1,c.value=2,await(0,ge._vH)(1e3))}function v(){0!=i.value&&(c.value=0)}function m(){window.parent.postMessage("close","*")}const h=(0,o.Fl)((()=>2==c.value?1==i.value&&1==s.value?"UnluckySplash":"LoseSplash":""));l.addAssetAssign("Background");const w=l.addHero2("button",{pos:[0,30],size:[30,10],anchor:"center",asset:"Button",backgroundMode:"contain"}),f=l.addHero2("splash",{pos:[0,30],size:[30,10],anchor:"center",asset:"LoseSplash",backgroundMode:"contain"}),y=l.addHero2("triangle",{pos:[0,30],size:[30,10],anchor:"center",asset:"Pointer",backgroundMode:"contain"}),k=l.addHero2("chance",{pos:[0,30],size:[30,10],anchor:"center",asset:"Chance1",backgroundMode:"contain"});return(e,t)=>((0,o.wg)(),(0,o.j4)(nt,{asset:"Background",dim:.7},{default:(0,o.w5)((()=>[0==c.value?((0,o.wg)(),(0,o.j4)(Pt,{key:0,x:(0,Ve.SU)(k).pos[0],y:(0,Ve.SU)(k).pos[1],w:(0,Ve.SU)(k).size[0],h:(0,Ve.SU)(k).size[1],anchor:(0,Ve.SU)(k).anchor,asset:u.value},{default:(0,o.w5)((()=>[(0,o.Wm)(Xe,{class:"slab full",onTap:p})])),_:1},8,["x","y","w","h","anchor","asset"])):(0,o.kq)("",!0),0==c.value?((0,o.wg)(),(0,o.j4)(Pt,{key:1,x:(0,Ve.SU)(w).pos[0],y:(0,Ve.SU)(w).pos[1],w:(0,Ve.SU)(w).size[0],h:(0,Ve.SU)(w).size[1],anchor:(0,Ve.SU)(w).anchor},{default:(0,o.w5)((()=>[(0,o.Wm)(Xe,{class:"slab full",onTap:p,asset:"SpinButton"})])),_:1},8,["x","y","w","h","anchor"])):(0,o.kq)("",!0),(0,o.Wm)(Jt),(0,o.Wm)(Pt,{x:(0,Ve.SU)(y).pos[0],y:(0,Ve.SU)(y).pos[1],w:(0,Ve.SU)(y).size[0],h:(0,Ve.SU)(y).size[1],asset:(0,Ve.SU)(y).asset,anchor:(0,Ve.SU)(y).anchor},null,8,["x","y","w","h","asset","anchor"]),h.value?((0,o.wg)(),(0,o.j4)(Pt,{key:2,x:(0,Ve.SU)(f).pos[0],y:(0,Ve.SU)(f).pos[1],w:(0,Ve.SU)(f).size[0],h:(0,Ve.SU)(f).size[1],asset:h.value,anchor:(0,Ve.SU)(f).anchor},null,8,["x","y","w","h","asset","anchor"])):(0,o.kq)("",!0),2==c.value&&i.value>0&&s.value?((0,o.wg)(),(0,o.j4)(Pt,{key:3,x:(0,Ve.SU)(w).pos[0],y:(0,Ve.SU)(w).pos[1],w:(0,Ve.SU)(w).size[0],h:(0,Ve.SU)(w).size[1],anchor:(0,Ve.SU)(w).anchor},{default:(0,o.w5)((()=>[(0,o.Wm)(Xe,{class:"slab full",onTap:v,asset:"AgainButton"})])),_:1},8,["x","y","w","h","anchor"])):(0,o.kq)("",!0),2==c.value&&0==i.value?((0,o.wg)(),(0,o.j4)(Pt,{key:4,x:(0,Ve.SU)(w).pos[0],y:(0,Ve.SU)(w).pos[1],w:(0,Ve.SU)(w).size[0],h:(0,Ve.SU)(w).size[1],anchor:(0,Ve.SU)(w).anchor},{default:(0,o.w5)((()=>[(0,o.Wm)(Xe,{class:"slab full",onTap:m,asset:"ReturnButton"})])),_:1},8,["x","y","w","h","anchor"])):(0,o.kq)("",!0)])),_:1}))}});const Xt=(0,u.Z)(Gt,[["__scopeId","data-v-bdab3eb6"]]);var ea=Xt,ta={BlankPage:He,TestLoadingPage:Ze,IAMQuizPage:bt,IAMLandingPage:xt,IAMOutcomePage:Ct,IAMWheelPage:ea};function aa(e,t){document.documentElement.style.setProperty(e,t)}var na=(0,o.aZ)({__name:"NewContext",setup(e){const t=(0,o.f3)("appTools"),a=(0,o.f3)("gameTools"),n=(0,Ve.iH)([100,100]);(0,o.JJ)("contextTools",{pageSize:n});const l=(0,o.Fl)((()=>t.debugMode.value)),i=t.windowSize,r=(0,Ve.iH)(null);(0,o.bv)((()=>{let e=null,s=null;(0,o.m0)((()=>{let o=0,r=0,u=i.value[0],c=i.value[1];1==(0,Ve.Tn)(l)&&(r=t.leftMargin.value,u-=t.leftMargin.value+t.rightMargin.value),e=u,s=c;let d=u/c,_=a.currentPage.value?.minAspectRatio||a.game.value.minAspectRatio||21/32,g=a.currentPage.value?.maxAspectRatio||a.game.value.maxAspectRatio||.5;(a.game.value.disableAR||"fullscreen"==a.currentPage.value?.layoutMode)&&(_=10,g=.1),a.game.value.squareAR&&(_=1,g=1);const p=t.forceAspectRatio.value;p&&(_=p,g=p),d<g?(c=u/g,d=g):d>_&&(u=c*_,d=_),a.viewportSize.value=[u,c],window._targetWidth=u,window._targetHeight=c,window._aspectRatio=d;let v=(d-g)/(_-g),m=1-v;1!=(0,Ve.Tn)(l)&&(r=Math.round(.5*(i.value[0]-u)));let h=a.game.value.warningBottom;h&&(c*=1-h);let w=a.game.value.warningTop;w&&(o=.1*c,c*=1-w),n.value=[u,c],aa("--top",o+"px"),aa("--width",u+"px"),aa("--height",c+"px"),aa("--w",u+"px"),aa("--h",c+"px"),aa("--page-width",u+"px"),aa("--page-height",c+"px"),aa("--window-width",i.value[0]+"px"),aa("--window-height",i.value[1]+"px"),aa("--width-no-px",u),aa("--height-no-px",c),aa("--scale-factor",u/600),aa("--aspect-ratio",d),aa("--tallness",m),aa("--wideness",v),aa("--left",r+"px")}))}));const u=(0,o.Fl)((()=>a.gameName.value)),c=(0,o.Fl)((()=>a.game.value.warning?a.game.value.warning:(console.warn("warning: no warning image found"),""))),d=(0,o.Fl)((()=>a.game.value.smallDisclaimer?a.game.value.smallDisclaimer:"")),_=(0,o.Fl)((()=>a.game.value.warningBottom)),g=(0,o.Fl)((()=>a.game.value.warningTop));return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"new-context",ref_key:"contextElement",ref:r},[(0,o.WI)(e.$slots,"default"),d.value?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"legacy-small-disclaimer contain",style:(0,s.j5)({"background-image":"url(vault/"+u.value+"/"+d.value+")"})},null,4)):(0,o.kq)("",!0),g.value?((0,o.wg)(),(0,o.iD)("div",{key:1,class:"legacy-warning top contain",style:(0,s.j5)({"background-image":"url(vault/"+u.value+"/"+c.value+")"})},null,4)):(0,o.kq)("",!0),_.value?((0,o.wg)(),(0,o.iD)("div",{key:2,class:"new-warning bottom contain",style:(0,s.j5)({"background-image":`url('vault/${u.value}/${c.value}')`})},null,4)):(0,o.kq)("",!0)],512))}}),oa=a(960),la=a.n(oa);"function"===typeof la()&&la()(na);const sa=na;var ia=sa,ra={NewContext:ia};let ua=()=>{};function ca(e,t,a){return new Promise(((n,o)=>{let l=new Image;l.onload=()=>{n(l)},l.onerror=()=>{o(new Error(`failed to preload '${e}' - key ${a}`))},t?setTimeout((()=>{l.src=e}),Math.floor(2e3*Math.random())):l.src=e}))}function da(e,t){t=t||((e,t)=>{ua(`default handler ${e}/${t}`)});let a=e.length,n=0,o=e.map((async e=>{let o=await e;return n+=1,t(n,a),o}));return Promise.all(o)}location.host.indexOf(":8094")>-1&&(ua=console.log),window.debugLog=ua;var _a=(0,o.aZ)({name:"GameViewer",components:{Lottie:ce,DebugPanel:X,LoadingBar:ne,...ta,...ra},props:{},computed:{locales(){let e=Object.keys((this.page||{}).text||{});return 0==e.length&&(e=["en"]),e},page(){return this.pages[this.currentPageIndex]},gameNames(){let e=Object.keys(_e);return e.sort(),e}},data:()=>({aggressiveLoading:!1,games:_e,pages:[],gameName:"",loading:!0,simulateSlowLoading:!1,simulateFailingLoading:!1,currentPageIndex:0,scratchPad:{},problems:[],defaultGame:"gameList",debugMode:!1,pageParams:{alpha:0,beta:0,gamma:0},sessionId:"",clientId:"",benchmarkResults:null,auraEnabled:!0,fixedSize:!1,showElementsEnabled:!1,loadedImageURLs:[],local:!1,contextType:"DefaultContext",bgColor:"white",loadingPercent:0,preloadCountDone:0,preloadCountTotal:1,veryTall:!1,currentLocale:"en",gridMode:!1,game:null,gamePageSize:[0,0]}),watch:{fixedSize(){window._fixedSize=this.fixedSize,window._refreshFixedSize&&(console.log("calling refresh"),window._refreshFixedSize())},showElementsEnabled(){this.showElementsEnabled?document.body.style.setProperty("--element-outline-color","#F0F"):document.body.style.setProperty("--element-outline-color","transparent")},currentPageIndex(){window._page_index=this.currentPageIndex;let e=this.pages[this.currentPageIndex];e&&e["title"]&&(document.title=e["title"])}},methods:{locationHash(){return window.location.hash.slice(1)},updateScratchPad(e){for(let[t,a]of Object.entries(e||{}))this.scratchPad[t]=a},benchmark(e){let t=Date.now(),a=50,n=0,o=0;while(Date.now()-t<a){if(0===e)for(let e=0;e<11e3;e++)o+=e/Math.PI;else if(1===e){let e=new Array(2900).fill(0);for(let t=0;t<2900;t++)e[t]=t,o+=e[t]}else if(2===e){let e={};for(let t=0;t<500;t++)e[t+""]=t;o=Object.keys(e).length}n++}return n},benchmarks(){var e=[];for(let t=0;t<3;t++)e.push(this.benchmark(t));return e},async performQueryForward(){let e;if(window._uuid=null,e=location.hostname.endsWith(".org.uk")?"TESTING":(location.toString().split("?query=")[1]||"").split("#")[0],!e)return;try{e=decodeURIComponent(e)}catch(s){return console.error(s),""}let t={clientId:this.clientId,sessionId:this.sessionId,gameName:this.gameName,queryString:e};window.queryPayload=t;let a=atob("aHR0cHM6Ly9wbWkuaW4tbW90aW9uLnZpZGVvL2ZlZWQvZHRl"),n=a+"?"+(0,ge.Hsr)(JSON.stringify(t)),o={mode:"cors",method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}};if(this.auraEnabled){var l;console.log("#a"),ua("performing fetch request..."),ua(`fetch URL = ${n}`);try{l=window.fr=await fetch(n,o)}catch(s){return console.log("#e"),ua(`fetch failed - exception: ${s.message}`),void console.error(s)}if(200!==l.status)console.log("#f"),ua(`fetch failed ${l.status}: ${l.statusText} -- "${await l.text()}"`);else{const e=await l.text();try{console.log("##s - ",e);const t=JSON.parse(e);window._queryResult=t,console.log("setting fullName"),window._fullName=`${t.firstName} ${t.lastName}`,"object"==typeof t.gameState?window._initialGameState=t.gameState:"string"==typeof t.gameState&&(""==t.gameState||"{}"==t.gameState||(window._initialGameState=JSON.parse(t.gameState))),console.log("initial game state:"),console.log(window._initialGameState),window._uuid=t.uuid}catch(s){console.log("error parsing"),console.log(e),console.error(s)}}}},async recordEvent(e,t){let a;console.log(`## Event recorded: ${e} : ${JSON.stringify(t)}`);let n="https://pmi.in-motion.video/feed/update",o={screenSize:[window.screen.width,window.screen.height],windowSize:[document.documentElement.clientWidth,document.documentElement.clientHeight],localTime:Date.now()-0,scratchPad:this.scratchPad,currentPageIndex:null,pageCount:this.pages.length,gameName:this.gameName,clientId:this.clientId,sessionId:this.sessionId,deployData:pe,windowLocationHref:a,benchmarkResults:this.benchmarkResults,ua:navigator.userAgent,eventName:e,eventArg:t};window.auraPayload=o;let l=n+"?"+(0,ge.Hsr)(JSON.stringify(o)),s={mode:"cors",method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}};btoa(JSON.stringify(o));if(this.auraEnabled){var i;ua("performing fetch request..."),ua(`fetch URL = ${l}`),ua(`payload: ${JSON.stringify(o,null,2)}`);try{i=window.fr=await fetch(l,s),window._auraPageDone=this.currentPageIndex}catch(r){return ua(`fetch failed - exception: ${r.message}`),void console.error(r)}200!==i.status?ua(`fetch failed ${i.status}: ${i.statusText} -- "${await i.text()}"`):ua(`fetch success ${i.status}: ${i.statusText} -- "${await i.text()}"`)}else ua(l),ua(s)},async performFetch(){let e,t="https://pmi.in-motion.video/feed/update",a={screenSize:[window.screen.width,window.screen.height],windowSize:[document.documentElement.clientWidth,document.documentElement.clientHeight],localTime:Date.now()-0,scratchPad:this.scratchPad,currentPageIndex:this.currentPageIndex,pageCount:this.pages.length,gameName:this.gameName,clientId:this.clientId,sessionId:this.sessionId,deployData:pe,windowLocationHref:e,benchmarkResults:this.benchmarkResults,ua:navigator.userAgent};window.auraPayload=a;let n=t+"?"+(0,ge.Hsr)(JSON.stringify(a)),o={mode:"cors",method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}};btoa(JSON.stringify(a));if(this.auraEnabled){var l;ua("performing fetch request..."),ua(`fetch URL = ${n}`),ua(`payload: ${JSON.stringify(a,null,2)}`);try{l=window.fr=await fetch(n,o),window._auraPageDone=this.currentPageIndex}catch(s){return ua(`fetch failed - exception: ${s.message}`),void console.error(s)}200!==l.status?ua(`fetch failed ${l.status}: ${l.statusText} -- "${await l.text()}"`):ua(`fetch success ${l.status}: ${l.statusText} -- "${await l.text()}"`)}else ua(n),ua(o)},async nextPage(e){window._auraPageDone=void 0,this.currentPageIndex++,this.currentPageIndex>=this.pages.length&&(this.currentPageIndex=0),ua(`moving to page ${this.currentPageIndex}`);for(let[t,a]of Object.entries(e||{}))this.scratchPad[t]=a;await this.performFetch()},async jumpToPage(e){window._auraPageDone=void 0,ua("jumpToPage ",e),this.currentPageIndex=e,await this.performFetch()},async jumpRelative(e){window._auraPageDone=void 0;let t=Math.max(0,Math.min(this.pages.length-1,this.currentPageIndex+e));ua("jumpRelative increment ",e," - ",this.currentPageIndex," --\x3e ",t),this.currentPageIndex=t,await this.performFetch()},async preloadPage(e,t,a){const n=this.pages[e],o={};for(const[l,i]of Object.entries(n))"type"!==l&&(0,s.HD)(i)&&(o[l]=i);await this.preloadResources(o,t,a)},async preloadResources(e,t,a){let n=[];window._images=window._images||{},window.sounds=window.sounds||{},window.soundPlayers=window.soundPlayers||{};for(const[l,i]of Object.entries(e)){let e=(0,s.HD)(i)&&(i.endsWith(".png")||i.endsWith(".jpg")),t=(0,s.HD)(i)&&(i.endsWith(".mp3")||i.endsWith(".ogg")),a=(0,s.HD)(i)&&i.endsWith(".glb");if(e){let e=async()=>{let e=await ca((0,ge.NhK)(i),this.simulateSlowLoading,l);return this.loadedImageURLs.push(i),window._images[l]=e,e};n.push(e)}else if(t){let e=async()=>{if(window.sounds[i])return;const e=window.audioContext=window.audioContext||new AudioContext;let t=(0,ge.NhK)(i),a=await window.fetch(t),n=await a.arrayBuffer(),o=await e.decodeAudioData(n);window.sounds[i]=o,window.soundPlayers[i]=t=>{const a=e.createBufferSource();a.buffer=o;var n=e.createGain();n.gain.value=t,n.connect(e.destination),a.connect(n),a.start()}};n.push(e)}else if(a){let e=async()=>{};n.push(e)}}try{if(t){let e=[];for(let t of n)if(this.simulateSlowLoading){let a=async()=>{await(0,ge._vH)(4e3*Math.random()),await t()};e.push(a())}else e.push(t());await da(e,a)}else{let e=0;for(let t of n)a(e,n.length),await t(),e++}}catch(o){ua("failed to preload!"),console.error(o)}},async localeClick(e){let t=this.currentPageIndex;await this.loadGame(this.gameName,this.debugMode,e),this.jumpToPage(t)},async loadGame(e,t,a=null){a&&(this.currentLocale=a,window._locale=a),this.preloadCountTotal=1,this.preloadCountDone=0,this.loading=!0,t&&setTimeout((()=>{let t=document.getElementById("game-"+e);t&&t.scrollIntoView()}),500),this.loadedImageURLs=[],"#"==e[e.length-1]&&(e=e.slice(0,e.length-1)),ua(`loadGame ${e}`);{let t="";if(window.location.host.endsWith(".org.uk"))t="@"+window.location.host.split(".")[0];else if(window.location.host.startsWith("localhost:")||window.location.host.startsWith("127.0.0.1:")){t="@local";for(let e of["favicon-apple","favicon-16","favicon-32"]){if(document.getElementById(e).href.includes("favicon/local"))break;document.getElementById(e).href=document.getElementById(e).href.replace("favicon/","favicon/local/")}}document.title=`${e}:sge${t}`}window.gameName=e,this.sessionId=(0,ge.Bu0)(),window._sessionId=this.sessionId,t&&(window.debugMode=!0,window.location.hash="#"+e+(t?"/debug":"")+(window._locale?`/locale=${window._locale}`:"")),this.gameName=e;let n=this.games[this.gameName];if(n.noLegacy)throw new Error("New games not supported in legacy viewer");this.pages=n.pages,window._game_name=e,window._game=n,this.game=n,n.context&&(this.contextType=n.context);let o=this.games[this.gameName].bgColor||"magenta";if(document.body.style.setProperty("--brand-background-color",o),this.currentPageIndex=0,this.scratchPad={},!this.pages)return this.problems.push(`game ${this.gameName} not found`),void console.warn(`game ${this.gameName} not found. aborting`);await this.preloadPage(0,this.aggressiveLoading,((e,t)=>{this.preloadCountTotal=t,this.preloadCountDone=e})),window.parent.postMessage("loaded","*"),ua("first page preloaded. Preloading other pages..."),(async()=>{await this.performQueryForward(),await this.performFetch()})(),(async()=>{for(let e=1;e<this.pages.length;e++)await this.preloadPage(e,!1,(()=>{}))})(),ua("all preloading done"),this.loading=!1},debugButtonClick(){this.debugMode=!this.debugMode}},async mounted(){function e(e){try{return localStorage.getItem(e)}catch(t){return console.warn("LocalStorage get failed"),console.error(t),null}}function t(e,t){try{return localStorage.setItem(e,t)}catch(a){return console.warn("LocalStorage set failed"),console.error(a),null}}console.log("GameViewer mounted"),window._performQueryForward=()=>this.performQueryForward(),window._gameViewer=this,window._recordEvent=(e,t)=>{this.recordEvent(e,t)},window._game_viewer=this,location.host.indexOf(":8094")>-1&&(this.local=!0,window._local=!0,this.auraEnabled=!1),window._auraEnabled=this.auraEnabled;try{window.parent&&window.parent!=window&&window.parent._clientId?this.clientId=window.parent._clientId:this.clientId=e("clientId")}catch(s){this.clientId=e("clientId")}function a(e){let t=e.split("/");return{gameName:t[0],debugMode:t.indexOf("debug")>-1,locale:(t.filter((e=>e.startsWith("locale=")))[0]||"=en").split("=")[1]}}this.clientId||(this.clientId=(0,ge.Bu0)(),t("clientId",this.clientId)),window._clientId=this.clientId,window.games=this.games,window.loadGame=e=>{this.loadGame(e,!0)};const n=()=>{let e=a(this.locationHash());this.debugMode=e.debugMode,window._locale=e.locale||"en",this.currentLocale=window._locale,this.debugMode||e.gameName?this.loadGame(e.gameName||this.defaultGame,this.debugMode,this.currentLocale):this.loadGame(pe.gameName,!1,this.currentLocale)};n(),window.onhashchange=function(){n(),window.parent.postMessage("onhashchange","*")},this.benchmarkResults=this.benchmarks(),this.heartbeatHandle=setInterval((()=>{window.parent.postMessage("heartbeat","*")}),200),document.addEventListener("keydown",(e=>{console.log(e.key,e.ctrlKey,e.altKey),"D"==e.key&&e.ctrlKey&&e.altKey&&(console.log("flipping debug"),this.debugMode=!this.debugMode,console.log(this.debugMode)),"G"==e.key&&e.ctrlKey&&e.altKey&&(this.gridMode=!this.gridMode)})),window._keyHandlers={},window._keyUpHandlers={},window._onKey=(e,t)=>{window._keyHandlers[e]=window._keyHandlers[e]||[],window._keyHandlers[e].push(t)},window._offKey=(e,t)=>{window._keyHandlers[e]=window._keyHandlers[e]||[],window._keyHandlers[e]=window._keyHandlers[e].filter((e=>e!=t))},window._onKeyUp=(e,t)=>{window._keyUpHandlers[e]=window._keyUpHandlers[e]||[],window._keyUpHandlers[e].push(t)},window._offKeyUp=(e,t)=>{window._keyUpHandlers[e]=window._keyUpHandlers[e]||[],window._keyUpHandlers[e]=window._keyUpHandlers[e].filter((e=>e!=t))},window._clearKeyHandlers=()=>{window._keyHandlers={},window._keyUpHandlers={}},document.addEventListener("keydown",(e=>{window._keyHandlers[e.key]&&window._keyHandlers[e.key].forEach((t=>t(e)))})),document.addEventListener("keyup",(e=>{window._keyUpHandlers[e.key]&&window._keyUpHandlers[e.key].forEach((t=>t(e)))}));const l=async()=>{await(0,o.Y3)(),this.gamePageSize=[window._targetWidth,window._targetHeight]};(async()=>{await(0,ge._vH)(500),l()})(),window.addEventListener("resize",l)},unmounted(){clearInterval(this.heartbeatHandle)}});const ga=(0,u.Z)(_a,[["render",R]]);var pa=ga;function va(){let e="";if(window.location.host.endsWith(".org.uk"))e="@"+window.location.host.split(".")[0];else if(window.location.host.startsWith("localhost:")||window.location.host.startsWith("127.0.0.1:")){e="@local";for(const e of["favicon-apple","favicon-16","favicon-32"]){const t=document.getElementById(e);if(t.href.includes("favicon/local"))break;t.href=t.href.replace("favicon/","favicon/local/")}}}function ma(){window._keyHandlers={},window._keyUpHandlers={},window._onKey=(e,t)=>{window._keyHandlers[e]=window._keyHandlers[e]||[],window._keyHandlers[e].push(t)},window._offKey=(e,t)=>{window._keyHandlers[e]=window._keyHandlers[e]||[],window._keyHandlers[e]=window._keyHandlers[e].filter((e=>e!=t))},window._onKeyUp=(e,t)=>{window._keyUpHandlers[e]=window._keyUpHandlers[e]||[],window._keyUpHandlers[e].push(t)},window._offKeyUp=(e,t)=>{window._keyUpHandlers[e]=window._keyUpHandlers[e]||[],window._keyUpHandlers[e]=window._keyUpHandlers[e].filter((e=>e!=t))},window._clearKeyHandlers=()=>{window._keyHandlers={},window._keyUpHandlers={}},document.addEventListener("keydown",(e=>{window._keyHandlers[e.key]&&window._keyHandlers[e.key].forEach((t=>t(e)))})),document.addEventListener("keyup",(e=>{window._keyUpHandlers[e.key]&&window._keyUpHandlers[e.key].forEach((t=>t(e)))}))}var ha=a(211);const wa=(0,u.Z)(ha.Z,[["__scopeId","data-v-3290aa7f"]]);var fa=wa;function ya(){const e=(0,Ve.iH)([1,1]);function t(){e.value=[window.innerWidth,window.innerHeight]}window.addEventListener("resize",t),t();const a=setInterval((()=>{1==e.value[0]||0==e.value[0]?t():clearInterval(a)}),50);return window.updateWindowSize=t,window._size=e,e}const ka=(0,Ve.iH)(window.location.hash.slice(1));let ba=!1;window.onhashchange=function(){ba||(ba=!0,ka.value=window.location.hash.slice(1),ba=!1,window.parent.postMessage("onhashchange","*"))},(0,o.YP)(ka,(e=>{ba||(ba=!0,window.location.hash="#"+e,ba=!1)}));const Ea={};async function Da(e){const[t,a]=(0,ge.wAI)([10,10]);a.font="100px NonexistantFamily";const n="Mg01234567890abcdefjKL!,yA",o=a.measureText(n);let l=1;while(1){a.font="100px "+e;const t=a.measureText(n);if(o.width!=t.width)return!0;await(0,ge._vH)(Math.min(500,10*l)),l+=1}}async function Pa(e,t){const a=new FontFace(e,`url(${t})`);return await a.load(),a}function Ma(e,t){let a=document.getElementById(e);a&&document.getElementsByTagName("head")[0].removeChild(a),a=document.createElement("style"),a.type="text/css",a.id=e,a.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(a)}async function Ta(e,t,a){const n=e+(a?"_italic":"");if(Ea[n])return;Ea[n]=1;const o=`\n    @font-face {\n    font-family: ${e};\n    src: url(${t});\n    }\n    `,l=e+(a?"_italic":"");Ma(`${l}`,o)}var Ua=a(424),Ia=a(698);function Oa(e){return[e.pageX,e.pageY]}class xa{touch;lastTouch;identifier;lastTime;time;deltaTime;pos;pagePos;lastPos;delta=[0,0];startTime;startPos=[0,0];velocity=[0,0];speed=0;totalTravel=0;move;end;pageElement;smoothedVelocity=void 0;constructor(e,t){this.touch=e,this.lastTouch=e,this.identifier=e.identifier,this.startTime=Date.now(),this.lastTime=Date.now(),this.deltaTime=0,this.time=Date.now();const a=Oa(e);this.pos=a,this.startPos=a,this.lastPos=a,this.move=(0,Ia.QN)(),this.end=(0,Ia.QN)(),this.pageElement=t,t=this.getPageElement(),this.pagePos=t?(0,Kt.Q0)(this.pos,(0,Kt.QR)(t)):this.pos}getPosRelativeTo(e){if((0,Ve.dq)(e)&&(e=e.value),e)return(0,Kt.Q0)(this.pos,(0,Kt.QR)(e))}getPosPercentRelativeTo(e,t){if((0,Ve.dq)(e)&&(e=e.value),!e)return;const a=(0,Kt.pO)(e);return 0==a[0]&&(a[0]=1),0==a[1]&&(a[1]=1),(0,Kt.Ky)((0,Kt.Lh)((0,Kt.Q0)((0,Kt.Zz)(this.pos,[0,-(t||0)]),(0,Kt.QR)(e)),a),100)}getPageElement(){return(0,Ve.dq)(this.pageElement)?this.pageElement.value:this.pageElement}age(){return Date.now()-this.startTime}updateTouch(e){this.lastTouch=this.touch,this.touch=e;const t=Oa(e);this.delta=[t[0]-this.pos[0],t[1]-this.pos[1]],this.totalTravel+=(0,Kt.DG)(this.delta),this.pos=t,this.lastTime=this.time,this.time=Date.now(),this.deltaTime=this.time-this.lastTime,this.time=Date.now(),this.deltaTime=this.time-this.lastTime,this.velocity=(0,Kt.Ky)(this.delta,1/(.001*Math.max(1,this.deltaTime))),this.speed=(0,Kt.DG)(this.velocity),this.smoothedVelocity?(0,Kt.j0)(this.velocity,[0,0])||(this.smoothedVelocity=(0,Kt.Wy)(this.smoothedVelocity,this.velocity,.5)):this.smoothedVelocity=this.smoothedVelocity||this.velocity;const a=this.getPageElement();this.pagePos=a?(0,Kt.Q0)(this.pos,(0,Kt.QR)(a)):this.pos,this.move.trigger(this)}endTouch(e){this.lastTouch=this.touch,this.touch=e;const t=Oa(e);this.delta=[t[0]-this.pos[0],t[1]-this.pos[1]],this.totalTravel+=(0,Kt.DG)(this.delta),this.pos=t,this.lastTime=this.time,this.time=Date.now(),this.deltaTime=this.time-this.lastTime,this.velocity=(0,Kt.Ky)(this.delta,.001*Math.max(1,this.deltaTime)),this.speed=(0,Kt.DG)(this.velocity);const a=this.getPageElement();this.pagePos=a?(0,Kt.Q0)(this.pos,(0,Kt.QR)(a)):this.pos,this.end.trigger(this)}totalDelta(){return(0,Kt.Q0)(this.pos,this.startPos)}pretty(){return`<Finger pos=[${this.pos[0]}, ${this.pos[1]}] identifier=${this.identifier} age=${(.001*this.age()).toFixed(2)} totalDelta=${this.totalDelta()} totalTravel=${0|this.totalTravel}}>`}}function Wa(e,t){if((0,Ve.dq)(e))if(void 0!==e.value)t(e);else{const a=(0,o.YP)(e,(n=>{void 0!==n&&(a(),t(e))}))}else t(e)}function Sa(e,t){let a;a=(0,Ve.dq)(e)?e:(0,Ve.iH)(e);const n=(0,Ia.QN)(),o=(0,Ia.QN)(),l=(0,Ia.QN)(),s=(0,Ia.QN)(),i=(0,Ia.QN)(),r=()=>{i.trigger()},u=(0,Ve.iH)({}),c=(0,Ve.iH)(!1),d=(0,Ve.iH)(!1);return Wa(e,(e=>{const a=e=>{const a=e.changedTouches;for(const o of a){o.identifier in u.value||(u.value[o.identifier]=new xa(o,t));const a=u.value[o.identifier];a.pageElement=t,n.trigger(a),c.value||e.preventDefault()}};e.value.addEventListener("touchstart",a);const r=e=>{const t=e.changedTouches;for(const a of t){a.identifier in u.value||console.warn(`unknown touch identifier ${a.identifier}`);const t=u.value[a.identifier];t.updateTouch(a),o.trigger(t),c.value||e.preventDefault()}};e.value.addEventListener("touchmove",r);const _=e=>{const t=e.changedTouches;for(const a of t){a.identifier in u.value||console.warn(`unknown touch identifier ${a.identifier}`);const t=u.value[a.identifier];t.endTouch(a),l.trigger(t),c.value||e.preventDefault(),delete u.value[a.identifier]}};e.value.addEventListener("touchend",_),i((()=>{e.value.removeEventListener("touchstart",a),e.value.removeEventListener("touchmove",r),e.value.removeEventListener("touchend",_)}));let g=!1;const p=e=>-1-e.button,v=e=>{e.button>=2||(g=!0,d.value||e.preventDefault(),document.addEventListener("mouseup",h),document.addEventListener("mousemove",m),a({preventDefault(){},changedTouches:[{identifier:p(e),pageX:e.pageX,pageY:e.pageY}]}))},m=e=>{d.value||e.preventDefault(),g&&r({preventDefault(){},changedTouches:Object.values(u.value).filter((e=>e.identifier<0)).map((t=>({identifier:t.identifier,pageX:e.pageX,pageY:e.pageY})))})},h=e=>{d.value||e.preventDefault(),document.removeEventListener("mouseup",h),document.removeEventListener("mousemove",m),g=!1,_({preventDefault(){},changedTouches:[{identifier:p(e),pageX:e.pageX,pageY:e.pageY}]})};function w(e){s.trigger([e.pageX,e.pageY])}e.value.addEventListener("mousedown",v),i((()=>{e.value.removeEventListener("mousedown",v)})),e.value.addEventListener("mousemove",w),i((()=>{e.value.removeEventListener("mousemove",w)})),e.value.addEventListener("contextmenu",(e=>{c.value||e.preventDefault()}))})),{start:n,move:o,end:l,fingers:u,unmount:r,hover:s,noPreventDefaultTouch:c,noPreventDefaultMouse:d}}var Ca=a(913);const Aa={class:"caption"},Ba={class:"number"},La={class:"track"},Ha={class:"track-inner"};var Va=(0,o.aZ)({__name:"FloatTinker",props:(0,o.Vf)({adaptExtents:{type:Boolean},adaptSpeed:{type:Boolean},speed:{default:.005},min:{default:0},max:{default:1},caption:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){function t(e){return void 0==e?"--":0==e?"0":Math.abs(e)<1e-5?"~0":Math.abs(e)<.01?e.toFixed(5):Math.abs(e)<.1?e.toFixed(3):Math.abs(e)<5?e.toFixed(2):Math.abs(e)<30?e.toFixed(1):`${Math.floor(e)}`}const a=(0,o.tT)(e,"modelValue"),n=e,l=(0,Ve.iH)(n.min),i=(0,Ve.iH)(n.max),r=(0,Ve.iH)(n.speed);function u(){a.value=Math.max(n.min,a.value||0),l.value=n.min}function c(){a.value=Math.min(n.max,a.value||0),i.value=n.max}function d(e){return(0,Ca.ZZ)(e,l.value,i.value,0,200)}const _=(0,o.Fl)((()=>d(a.value||0))),g=(0,o.Fl)((()=>d(0)));(0,o.m0)((()=>{n.adaptExtents?(l.value=Math.min(a.value||0,l.value),i.value=Math.max(a.value||0,i.value)):a.value=Math.min(Math.max(l.value,a.value||0),i.value)}));const p=(0,o.Fl)((()=>i.value-l.value)),v=(0,Ve.iH)();return Sa(v).start((e=>{e.move((()=>{a.value=(a.value||0)+e.delta[0]*r.value*p.value}))})),(e,n)=>((0,o.wg)(),(0,o.iD)("div",{ref_key:"el",ref:v,style:{display:"flex"},class:"container"},[(0,o._)("div",Aa,(0,s.zw)(e.caption),1),(0,o._)("div",Ba,(0,s.zw)(t(a.value)),1),(0,o._)("div",La,[(0,o._)("div",Ha,[(0,o._)("div",{class:"plus",style:(0,s.j5)({left:`${_.value}px`})},"+",4),(0,o._)("div",{class:"marking",style:(0,s.j5)([{left:"20px",transform:"translate(-50%, 0%)","line-height":"32px",height:"32px",width:"3px",background:"rgba(192,192,192,0.55)"},{left:`${g.value}px`}])},null,4),(0,o._)("div",{class:"marking",style:{left:"0","line-height":"32px","padding-left":"2px"},onClick:u},(0,s.zw)(t(l.value)),1),(0,o._)("div",{class:"marking",style:{right:"0","line-height":"32px","padding-right":"2px"},onClick:c},(0,s.zw)(t(i.value)),1)])])],512))}});const Ra=(0,u.Z)(Va,[["__scopeId","data-v-175e0911"]]);var za=Ra;const $a={style:{display:"flex","flex-direction":"row"}},Na=["onClick"];var Ka=(0,o.aZ)({__name:"BoolArrayEditor",props:{modelValue:{},modelModifiers:{}},emits:(0,o.Vf)(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const{gameTools:a,pageTools:n}=(0,Ye.b)();function l(e){i.value[e]=1-i.value[e]}const i=(0,o.tT)(e,"modelValue");return(e,t)=>((0,o.wg)(),(0,o.iD)("div",$a,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,Ve.SU)(Kt.w6)(i.value.length),(e=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["item",i.value[e]?"on":"off"]),onClick:t=>l(e),key:e},null,10,Na)))),128))]))}});const Fa=(0,u.Z)(Ka,[["__scopeId","data-v-3def5850"]]);var ja=Fa;const qa={ref:"el",style:{display:"flex"},class:"container"},Za={class:"data"},Ya={class:"data"};var Qa=(0,o.aZ)({__name:"RectEditor",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){function t(){n.value.pos=[0,0]}function a(){n.value.size=[20,20]}const n=(0,o.tT)(e,"modelValue"),l=(0,Ve.iH)();(0,At.u7)(l).onStart((e=>{e.onMove((()=>{n.value.pos=(0,Kt.Zz)(n.value.pos,(0,Kt.Ky)(e.delta,.1)),n.value.pos=(0,Kt.Of)(n.value.pos,[-100,-100,200,200])}))}));const i=(0,Ve.iH)();return(0,At.u7)(i).onStart((e=>{e.onMove((()=>{n.value.size=(0,Kt.Zz)(n.value.size,(0,Kt.Ky)(e.delta,.1)),n.value.size=(0,Kt.Of)(n.value.size,[0,0,400,400])}))})),(e,r)=>((0,o.wg)(),(0,o.iD)("div",qa,[(0,o._)("div",{class:"section",ref_key:"posRef",ref:l,onDblclick:t},[r[0]||(r[0]=(0,o._)("div",{class:"heading"},"pos",-1)),(0,o._)("div",Za,(0,s.zw)(n.value.pos[0].toFixed(1))+", "+(0,s.zw)(n.value.pos[1].toFixed(1)),1)],544),(0,o._)("div",{class:"section",ref_key:"sizeRef",ref:i,onDblclick:a},[r[1]||(r[1]=(0,o._)("div",{class:"heading"},"size",-1)),(0,o._)("div",Ya,(0,s.zw)(n.value.size[0].toFixed(1))+"x"+(0,s.zw)(n.value.size[1].toFixed(1)),1)],544)],512))}});const Ja=(0,u.Z)(Qa,[["__scopeId","data-v-3995a110"]]);var Ga=Ja;const Xa={ref:"el",style:{display:"flex"}},en={class:"container"},tn={class:"txt"};function an(e,t){return(0,o.wg)(),(0,o.iD)("div",Xa,[(0,o._)("div",en,[(0,o._)("span",tn,[(0,o.WI)(e.$slots,"default",{},void 0,!0)]),t[0]||(t[0]=(0,o._)("span",{class:"remaining-space"},null,-1))])],512)}const nn={},on=(0,u.Z)(nn,[["render",an],["__scopeId","data-v-045525a7"]]);var ln=on;const sn={style:{display:"flex","flex-direction":"row"}},rn={key:0,class:"caption"},un=["onClick"];var cn=(0,o.aZ)({__name:"SmallIntegerEditor",props:(0,o.Vf)({max:{},caption:{},readonly:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:(0,o.Vf)(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const{gameTools:a,pageTools:n}=(0,Ye.b)();function l(e){i.readonly||(r.value=e)}const i=e,r=(0,o.tT)(e,"modelValue");return(e,t)=>((0,o.wg)(),(0,o.iD)("div",sn,[e.caption?((0,o.wg)(),(0,o.iD)("div",rn,(0,s.zw)(e.caption),1)):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,Ve.SU)(Kt.w6)(e.max),(e=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["item",e==r.value?"on":"off"]),onClick:t=>l(e),key:e},(0,s.zw)(e),11,un)))),128))]))}});const dn=(0,u.Z)(cn,[["__scopeId","data-v-31724dca"]]);var _n=dn;const gn=(0,Ve.iH)([]),pn=(0,Ve.iH)("");function vn(){const{gameTools:e}=(0,Ye.b)(),t={async sync(){if(!(0,ge.YU7)())return;const{dirContents:t}=await rt(`getAssetsOnDisk/${e.gameName.value}`,{});gn.value=t.map((e=>e)),pn.value=e.gameName.value},async syncIf(){pn.value!=e.gameName.value&&await t.sync()},allAssets:gn};return t}const mn={style:{display:"flex","flex-direction":"row","margin-top":"4px","margin-bottom":"7px"}},hn={style:{"flex-grow":"1","flex-basis":"0","padding-left":"6px"}},wn={class:"asset-name"},fn={class:"asset-filename",style:{color:"rgba(255,255,255,0.8)"}},yn={key:0,class:"selecting-asset-dialog",style:{"overflow-y":"scroll"}},kn={style:{display:"flex","flex-wrap":"wrap",gap:"16px",margin:"16px"}},bn=["onClick"],En={class:"thumb"},Dn={class:"label",style:{"white-space":"nowrap"}};var Pn=(0,o.aZ)({__name:"AssetEditor3",props:{modelValue:{},modelModifiers:{}},emits:(0,o.Vf)(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const{gameTools:a,pageTools:l}=(0,Ye.b)();function i(e,t){if(!e)return!0;if(e.toLowerCase()==e){if(t.toUpperCase().includes(e.toUpperCase()))return!0}else if(t.includes(e))return!0;return!1}function r(e){return{"background-image":`url('/sge2/vault/${a.gameName.value}/${e}')`}}const u=(0,Ve.iH)(),c=(0,Ve.iH)(""),d=(0,o.Fl)((()=>{let e=g.allAssets.value.filter((e=>i(c.value,e)));return e.sort(),e}));function _(e){v.value=e,p.value=!1,l.config.value[k.value]=v.value,a.dirty.value=!0}const g=vn();(0,o.bv)((async()=>{}));const p=(0,Ve.iH)(!1),v=(0,Ve.iH)("");async function m(){await g.syncIf(),c.value="",v.value="",p.value=!0,await(0,o.Y3)(),u.value.focus()}function h(){p.value=!1}function w(e){const t=l.config.value,a=t[e];if("string"==typeof a)return a;console.warn("asset not found")}function f(e){const t=l.config.value,n=w(e);if("string"==typeof n){const e=a.currentVariant.value||"";return`vault/${a.getGameNameNonReactive()}/${e?e+"/":""}${n}`}console.warn(`asset not found in ${a.getGameNameNonReactive()}.mjs: page #${a.getCurrentPageIndexNonReactive()} ${t.type} : ${e}`)}(0,jt.JLS)("Escape",(e=>{p.value&&(e.preventDefault(),p.value=!1)}));const y=(0,o.Fl)((()=>k.value&&f(k.value||"")?{"background-image":"url('"+f(k.value||"")+"')"}:{})),k=(0,o.tT)(e,"modelValue");return(e,t)=>((0,o.wg)(),(0,o.iD)("div",mn,[(0,o._)("div",{class:"preview",style:(0,s.j5)(y.value),onClick:m},null,4),(0,o._)("div",hn,[(0,o._)("div",wn,(0,s.zw)(k.value),1),(0,o._)("div",fn,(0,s.zw)(w(k.value||"")),1),(0,o._)("div",{class:"select-button"},[(0,o._)("button",{onClick:m},"select asset")])]),p.value?((0,o.wg)(),(0,o.iD)("div",yn,[(0,o._)("button",{onClick:h},"close"),(0,o.wy)((0,o._)("input",{ref_key:"searchInput",ref:u,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),class:"text-input"},null,512),[[n.nr,c.value]]),(0,o._)("div",kn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.value,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{onClick:t=>_(e),key:t,class:"cell"},[(0,o._)("div",En,[(0,o._)("div",{class:"inner",style:(0,s.j5)(r(e))},null,4)]),(0,o._)("div",Dn,(0,s.zw)(e),1)],8,bn)))),128))])])):(0,o.kq)("",!0)]))}});const Mn=(0,u.Z)(Pn,[["__scopeId","data-v-762e7622"]]);var Tn=Mn;const Un={style:{display:"flex","flex-direction":"row"}},In=["value","selected"];var On=(0,o.aZ)({__name:"AssetEditor2",props:{modelValue:{},modelModifiers:{}},emits:(0,o.Vf)(["update:modelValue"],["update:modelValue"]),setup(e,{emit:t}){const{gameTools:a,pageTools:n}=(0,Ye.b)();function l(e){const t=n.config.value,a=t[e];if("string"==typeof a)return a;console.warn("asset not found")}function i(e){const t=n.config.value,o=l(e);if("string"==typeof o){const e=a.currentVariant.value||"";return`vault/${a.getGameNameNonReactive()}/${e?e+"/":""}${o}`}console.warn(`asset not found in ${a.getGameNameNonReactive()}.mjs: page #${a.getCurrentPageIndexNonReactive()} ${t.type} : ${e}`)}const r=(0,o.Fl)((()=>{if(!n.config.value)return;let e=Object.entries(n.config.value).filter((([e,t])=>"string"==typeof t&&(t.endsWith(".png")||t.endsWith(".webp")||t.endsWith(".jpg")))).map((([e,t])=>e));return e}));function u(e){console.log(e.target.value),d("update:modelValue",e.target.value)}const c=(0,o.Fl)((()=>_.value?{"background-image":"url('"+i(_.value||"")+"')"}:{}));const d=t,_=(0,o.tT)(e,"modelValue");return(e,t)=>((0,o.wg)(),(0,o.iD)("div",Un,[(0,o._)("select",{onInput:u},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.value,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:e,selected:e==_.value},(0,s.zw)(e),9,In)))),128))],32),(0,o._)("div",{class:"preview",style:(0,s.j5)(c.value)},null,4)]))}});const xn=(0,u.Z)(On,[["__scopeId","data-v-5d8a636a"]]);var Wn=xn;const Sn={style:{display:"flex","flex-direction":"column",width:"80px"}},Cn=["onClick"];var An=(0,o.aZ)({__name:"AnchorEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,Ve.iH)("↖↑↗←Ɵ→↙↓↘".split("")),n=(0,Ve.iH)(["nw","n","ne","w","center","e","sw","s","se"]);function l(e){i("update:modelValue",n.value[e])}const i=t,r=e;return(e,t)=>((0,o.wg)(),(0,o.iD)("div",Sn,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)([0,1,2],(e=>(0,o._)("div",{key:e},[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)([0,1,2],(t=>(0,o._)("button",{key:t,onClick:a=>l(3*e+t),class:(0,s.C_)({selected:r.modelValue==n.value[3*e+t]})},(0,s.zw)(a.value[3*e+t]),11,Cn))),64))]))),64))]))}});const Bn=(0,u.Z)(An,[["__scopeId","data-v-49cd4264"]]);var Ln=Bn;const Hn={key:0},Vn={key:1},Rn={key:2},zn={key:3},$n={key:0},Nn={style:{display:"flex"}},Kn={key:4},Fn=["onClick"],jn={key:5},qn={style:{"font-weight":"bold"}},Zn={key:6},Yn={key:7},Qn={key:8},Jn={key:9};var Gn=(0,o.aZ)({__name:"ProtoTinkerWindow",setup(e){const{pageTools:t,gameTools:a}=(0,Ye.b)(),{pts:n,protoTinkersVersion:l}=wt();function i(){const e=[...n.values()];return(0,ge.Kqf)(e,(e=>`${e.order||0}`.padStart(8,"0")+`${e.addedOrder}`.padStart(8,"0"))),e}return(e,t)=>(0,Ve.SU)(l)>0&&(0,Ve.SU)(n).length>0?((0,o.wg)(),(0,o.iD)("div",Hn,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i(),((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},["heading"==e.type?((0,o.wg)(),(0,o.j4)(ln,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.name),1)])),_:2},1024)):(0,o.kq)("",!0),"number"==e.type?((0,o.wg)(),(0,o.iD)("div",Vn,[(0,o.Wm)(za,{modelValue:e.data.value,"onUpdate:modelValue":t=>e.data.value=t,caption:e.name,adaptExtents:!0},null,8,["modelValue","onUpdate:modelValue","caption"])])):(0,o.kq)("",!0),"v2"==e.type?((0,o.wg)(),(0,o.iD)("div",Rn,[(0,o.Wm)(za,{modelValue:e.data.value[0],"onUpdate:modelValue":t=>e.data.value[0]=t,caption:`${e.name} x`,adaptExtents:!0},null,8,["modelValue","onUpdate:modelValue","caption"]),(0,o.Wm)(za,{modelValue:e.data.value[1],"onUpdate:modelValue":t=>e.data.value[1]=t,caption:`${e.name} y`,adaptExtents:!0},null,8,["modelValue","onUpdate:modelValue","caption"])])):(0,o.kq)("",!0),"hero2"==e.type?((0,o.wg)(),(0,o.iD)("div",zn,[(0,o.Wm)(ln,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.name),1)])),_:2},1024),e.data.value.asset?((0,o.wg)(),(0,o.iD)("div",$n,[(0,o.Wm)(Tn,{modelValue:e.data.value.asset,"onUpdate:modelValue":t=>e.data.value.asset=t},null,8,["modelValue","onUpdate:modelValue"])])):(0,o.kq)("",!0),(0,o._)("div",Nn,[(0,o.Wm)(Ln,{modelValue:e.data.value.anchor,"onUpdate:modelValue":t=>e.data.value.anchor=t},null,8,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(Ga,{modelValue:e.data.value,"onUpdate:modelValue":t=>e.data.value=t},null,8,["modelValue","onUpdate:modelValue"])])])):(0,o.kq)("",!0),"button"==e.type?((0,o.wg)(),(0,o.iD)("div",Kn,[(0,o._)("button",{onClick:t=>e.closure()},(0,s.zw)(e.name),9,Fn)])):(0,o.kq)("",!0),"textDisplay"==e.type?((0,o.wg)(),(0,o.iD)("div",jn,[(0,o._)("span",qn,(0,s.zw)(e.name),1),(0,o.Uk)(": "+(0,s.zw)(e.data.value),1)])):(0,o.kq)("",!0),"asset"==e.type?((0,o.wg)(),(0,o.iD)("div",Zn,[(0,o.Wm)(Wn,{modelValue:e.data.value,"onUpdate:modelValue":t=>e.data.value=t},null,8,["modelValue","onUpdate:modelValue"])])):(0,o.kq)("",!0),"assetAssign"==e.type?((0,o.wg)(),(0,o.iD)("div",Yn,[(0,o.Wm)(Tn,{modelValue:e.name,"onUpdate:modelValue":t=>e.name=t},null,8,["modelValue","onUpdate:modelValue"])])):(0,o.kq)("",!0),"boolArray"==e.type?((0,o.wg)(),(0,o.iD)("div",Qn,[(0,o.Wm)(ja,{modelValue:e.data.value,"onUpdate:modelValue":t=>e.data.value=t},null,8,["modelValue","onUpdate:modelValue"])])):(0,o.kq)("",!0),"smallInteger"==e.type?((0,o.wg)(),(0,o.iD)("div",Jn,[(0,o.Wm)(_n,{modelValue:e.data.value,"onUpdate:modelValue":t=>e.data.value=t,max:e.max,caption:e.name,readonly:e.readonly},null,8,["modelValue","onUpdate:modelValue","max","caption","readonly"])])):(0,o.kq)("",!0)])))),128))])):(0,o.kq)("",!0)}});const Xn=(0,u.Z)(Gn,[["__scopeId","data-v-7fe492c8"]]);var eo=Xn;const to={style:{outline:"1px solid red",width:"100%",height:"100%",display:"flex","flex-direction":"column"}},ao={class:"buttons",style:{height:"calc(var(--width) * 0.04)",display:"flex","flex-direction":"row"}},no=["disabled"],oo=["disabled"];var lo={__name:"JSONEditor",props:{modelValue:{default:{}}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t,l=e;function i(e){try{return JSON.parse(e),!0}catch(t){return!1}}const r=(0,Ve.iH)("{}"),u=(0,o.Fl)((()=>i(r.value))),c=(0,o.Fl)((()=>r.value!==JSON.stringify(l.modelValue,null,2))),d=c;function _(){console.log("commit click"),u.value&&(console.log("valid - committing"),a("update:modelValue",JSON.parse(r.value)))}function g(){p()}function p(){r.value=JSON.stringify(l.modelValue,null,2)}return(0,o.bv)((()=>{p()})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",to,[(0,o.wy)((0,o._)("textarea",{autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),class:(0,s.C_)((u.value?"valid":"invalid")+((0,Ve.SU)(d)?" can-commit":" cant-commit")),style:{"flex-grow":"1"}},null,2),[[n.nr,r.value]]),(0,o._)("div",ao,[(0,o._)("div",{class:(0,s.C_)("button"),disabled:!((0,Ve.SU)(d)&&u.value),onClick:_},"commit",8,no),(0,o._)("div",{class:"button",disabled:!(0,Ve.SU)(d),onClick:g},"revert",8,oo)])]))}};const so=(0,u.Z)(lo,[["__scopeId","data-v-dc1fb51a"]]);var io=so;const ro={key:0},uo={style:{height:"300px"}};var co=(0,o.aZ)({__name:"PageAdmin",setup(e){const{pageTools:t}=(0,Ye.b)(),a=t.config,l=(0,Ve.iH)(t.pageType.value);async function i(){await rt("clonePage",{sourceType:t.pageType.value,destType:l.value})}return(e,r)=>((0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("h2",null,(0,s.zw)((0,Ve.SU)(t).pageName||(0,Ve.SU)(t).pageType),1),(0,Ve.SU)(t).pageName?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",ro,"type: "+(0,s.zw)((0,Ve.SU)(t).pageName),1)),(0,o._)("div",uo,[(0,o.Wm)(io,{modelValue:(0,Ve.SU)(a),"onUpdate:modelValue":r[0]||(r[0]=e=>(0,Ve.dq)(a)?a.value=e:null)},null,8,["modelValue"])]),r[2]||(r[2]=(0,o._)("h2",null,"Clone Page",-1)),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":r[1]||(r[1]=e=>l.value=e)},null,512),[[n.nr,l.value]]),(0,o._)("button",{onClick:i},"Clone")]))}});const _o=(0,u.Z)(co,[["__scopeId","data-v-1f10ab30"]]);var go=_o;const po={style:{display:"flex","flex-direction":"row"}},vo={class:"caption"},mo={key:1},ho={key:0};var wo=(0,o.aZ)({__name:"Expander",props:{localStorageBacked:{type:Boolean,default:!0},caption:{},identifier:{},vifMode:{type:Boolean,default:!1},initialExpanded:{type:Boolean,default:!0}},setup(e){const t=e,a=t.localStorageBacked?(0,ct.Y)(t.identifier??t.caption,t.initialExpanded):(0,Ve.iH)(t.initialExpanded);function n(){a.value=!a.value}return(e,l)=>((0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",po,[(0,o._)("button",{onClick:n,class:"button"},(0,s.zw)((0,Ve.SU)(a)?"▲":"▼"),1),(0,o._)("div",vo,(0,s.zw)(e.caption),1)]),t.vifMode?((0,o.wg)(),(0,o.iD)("div",mo,[(0,Ve.SU)(a)?((0,o.wg)(),(0,o.iD)("div",ho,[(0,o.WI)(e.$slots,"default")])):(0,o.kq)("",!0)])):((0,o.wg)(),(0,o.iD)("div",{key:0,style:(0,s.j5)({display:(0,Ve.SU)(a)?"block":"none"})},[(0,o.WI)(e.$slots,"default")],4))]))}});const fo=(0,u.Z)(wo,[["__scopeId","data-v-96bfacd6"]]);var yo=fo;var ko=(0,o.aZ)({__name:"SureButton",emits:["tap"],setup(e,{emit:t}){const a=(0,Ve.iH)(!1);function n(){a.value=!0,setTimeout((()=>{a.value=!1}),5e3)}function l(){s("tap"),a.value=!1}const s=t;return(e,t)=>((0,o.wg)(),(0,o.iD)("div",null,[a.value?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("button",{key:0,class:"b1",onClick:n},[(0,o.WI)(e.$slots,"default")])),a.value?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"b2",onClick:l},"Sure?")):(0,o.kq)("",!0)]))}});const bo=(0,u.Z)(ko,[["__scopeId","data-v-3785d5a7"]]);var Eo=bo;function Do(e){return{generate(){const t=new Image,a=new Promise(((a,n)=>{t.onload=()=>{a(t)},t.onerror=()=>{n(new Error("failed to load image"))},t.src=e})),n=new xo(a);return n}}}function Po(e){const t=new XMLHttpRequest;return{generate(){const a={status:(0,Ve.iH)("created"),progress:(0,Ve.iH)(0),error:(0,Ve.iH)(null),size:(0,Ve.iH)(1),result:(0,Ve.iH)(void 0),trigger(){"created"==this.status.value&&(this.status.value="triggered",(async()=>{t.responseType="blob",t.onload=()=>{"aborted"!=this.status.value&&(this.result.value=t.response,this.status.value="resolved")},t.onprogress=e=>{"aborted"!=this.status.value&&e.lengthComputable&&(this.size.value=e.total,this.progress.value=e.loaded/e.total)},t.onerror=e=>{"aborted"!=this.status.value&&(this.error.value={error:e},this.status.value="error")},t.open("GET",e),t.send()})())},abort(){this.status.value="aborted",t.abort()}};return a}}}function Mo(e){return new Promise(((t,a)=>{let n=null;n=(0,o.m0)((()=>{const a=e();void 0!=a&&(t(),n&&n())}))}))}function To(e){return e.trigger(),new Promise(((t,a)=>{(0,o.m0)((()=>{void 0!=e.result.value&&t(e.result.value)})),(0,o.m0)((()=>{null!=e.error.value&&a(e.error.value)}))}))}function Uo(e){return e.trigger(),new Promise(((t,a)=>{(0,o.m0)((()=>{void 0!=e.result.value&&t(e.result.value)})),(0,o.m0)((()=>{null!=e.error.value&&a(e.error.value)}))}))}function Io(e){return new Promise(((t,a)=>{let n;n=(0,o.m0)((()=>{const a=(0,Ve.Tn)(e);a&&(t(a),n&&n())}))}))}function Oo(e,t){let a=!1,n=0;const l=(0,Ve.iH)(new Set),s={status:(0,Ve.iH)("created"),progress:(0,Ve.iH)(0),error:(0,Ve.iH)(null),size:(0,Ve.iH)(1),partialResult:(0,Ve.iH)(e.map((e=>null))),result:(0,Ve.iH)(void 0),abort(){if("triggered"==this.status.value){a=!0,this.status.value="aborted";for(const t of l.value)e[t].abort()}},trigger(){"created"==this.status.value&&(async()=>{this.status.value="triggered";(0,o.m0)((()=>{if(a)return;let t=0;for(const a of e)"resolved"==a.status.value?t+=1:t+=a.progress.value;this.progress.value=t/(e.length||1)}));while(n<e.length){if(a)return;if(l.value.size<t){l.value.add(n);const t=e[n];t.trigger();const a=n;(async()=>{const e=a,n=await To(t);this.partialResult.value[e]=n,l.value.delete(a),0==l.value.size&&(this.status.value="resolved",this.result.value=[...this.partialResult.value])})(),n++}await Io((()=>l.value.size<t))}})()}};return s}class xo{status=(0,Ve.iH)("created");progress=(0,Ve.iH)(0);error=(0,Ve.iH)(null);result=(0,Ve.iH)(void 0);p;constructor(e){this.p=e}size=(0,Ve.iH)(1);trigger(){"created"==this.status.value&&(this.status.value="triggered",(async()=>{try{this.result.value=await this.p}catch(e){this.error.value={error:e}}this.status.value="resolved",this.progress.value=1})())}abort(){}}const Wo={duration:1,failProbability:0,stallProbability:0,size:1,progressChunks:10,error:2};class So{resultValue;options;constructor(e,t){this.resultValue=e,this.options={...Wo,...t}}size=(0,Ve.iH)(1);status=(0,Ve.iH)("created");progress=(0,Ve.iH)(0);error=(0,Ve.iH)(null);result=(0,Ve.iH)(void 0);abort(){"triggered"==this.status.value&&(this.status.value="aborted")}trigger(){if("created"!=this.status.value)return;this.status.value="triggered",this.error.value=null;const e=1e3*this.options.duration/this.options.progressChunks,t=Math.random()<this.options.failProbability,a=Math.random()*this.options.progressChunks|0,n=Math.random()<this.options.stallProbability,o=Math.random()*this.options.progressChunks|0;(async()=>{for(let l=0;l<=this.options.progressChunks;l++){if(await(0,ge._vH)(e),"aborted"==this.status.value)return;const s=l/this.options.progressChunks;if(this.progress.value=s,t&&a==l)return this.error.value=this.options.error,void(this.status.value="error");if(n&&o==l)while(1)await(0,ge._vH)(1e3)}this.result.value=this.resultValue,this.status.value="resolved"})()}}function Co(){const e=new So("moo",{duration:.5}),t=new So("bar",{duration:.7}),a=new So("foo",{duration:1}),n=new So("baz",{duration:1}),o=new So("wah",{duration:1}),l=new So("yay",{duration:2}),s=new So("poo",{duration:1});return[e,t,a,n,o,l,s]}class Ao{items={};pendingItems={};loadFunc;constructor(e){this.loadFunc=e}async load(e){let t;"string"===typeof e&&(e=[e]);for(const n of e){const o=this.items[n];if(o)return o;const l=this.pendingItems[n];if(l)return await l;t=this.loadFunc(n),this.pendingItems[n]=t;try{this.items[n]=await t}catch(a){throw console.warn(`error loading resource ${e}`),a}delete this.pendingItems[n]}if(t)return t;throw new Error("resource load failed")}get(e){const t=this.getOrNull(e);if(null==t)throw new Error(`${this.constructor.name}: resource not found ${e}`);return t}getOrNull(e){const t=Object.prototype.hasOwnProperty.call(this.items,e)?this.items[e]:null;return null===t&&console.warn(`resource ${e} not found`),t}}function Bo(e,t,a){let n={};n=window.progressRecords=window.progressRecords||n,window.progressRecords[e]={bytesDone:t,totalBytes:a,filename:e}}const Lo={};function Ho(e){return new Promise(((t,a)=>{const n=(new fe.E).setPath(""),o=e;n.load(o,(function(a){window._gltf=a,a.$subs={},a.$filename=e;for(const e of a.scene.children)if("Object3D"===e.type)for(const t of e.children)if(t.name.indexOf("SCREEN")>-1){const n=t.clone();n.$originalPosition=n.position.clone(),window.poop=n;const o=e.matrix.clone().multiply(t.matrix);n.matrix.copy(o),n.matrixAutoUpdate=!1,a.$subs[e.name+"/"+n.name]=n}t(a)}),(t=>{Bo(e,t.loaded,t.loaded)}),(function(e){a(e)}))}))}class Vo extends Ao{constructor(){super(Ho)}getSubObject(e,t){const a=this.get(e);if(!a)return null;const n=a.$subs[t];return n||null}}const Ro=Lo["gltf"]=new Vo;function zo(e){return new Promise(((t,a)=>{const n=(new ve.dpR).setPath(""),o=e;n.load(o,(function(a){a.wrapS=ve.rpg,a.wrapT=ve.rpg;const n=.2,o=Math.floor(a.image.width*a.image.height*n);Bo(e,o,o),t(a)}),(t=>{Bo(e,t.loaded,null)}))}))}class $o extends Ao{constructor(){super(zo)}}Lo["texture"]=new $o;class No extends Ao{constructor(){super((e=>(0,ge.Wqv)(`${e}`)))}}Lo["csv"]=new No;class Ko extends Ao{constructor(){super((e=>(0,ge.OlH)(`${e}`)))}}Lo["txt"]=new Ko;async function Fo(e){const t=`vault/${window.gameName}/${e}`;return await new Promise((e=>{(new we.I).load(t,(function(t){e(t)}))}))}class jo extends Ao{constructor(){super(Fo)}loadEnvMap(e,t){const a=this.get(e);if(!a)return null;const n=new ve.anP(t),o=n.fromEquirectangular(a),l=o.texture;return t.toneMapping=ve.EoG,t.toneMappingExposure=1,t.outputEncoding=ve.knz,l}}Lo["exr"]=new jo;async function qo(e){const t=`${e}`;return await new Promise((e=>{(new he.J).load(t,(function(t){e(t)}))}))}class Zo extends Ao{defaultFont=null;constructor(){super((async e=>{const t=await qo(e);return this.defaultFont||(this.defaultFont=t),t}))}getDefaultFont(){if(!this.defaultFont)throw new Error("no fonts, can't select default font");return this.defaultFont}}Lo["font"]=new Zo;class Yo{howls={};constructor(){}loadSprites(e,t){const a=`./vault/${window.gameName}/${e}`;return this.howls[e]=new me.Howl({src:[a],sprite:t}),new Promise((t=>{this.howls[e].once("load",t)}))}loadSound(e){const t=`./vault/${window.gameName}/${e}`;return this.howls[e]=new me.Howl({src:[t]}),new Promise((t=>{this.howls[e].once("load",t)}))}play(e,t){this.howls[e]?null!==t?this.howls[e].play(t):this.howls[e].play():console.warn("sound not found "+e)}}new Yo;const Qo={image:{png:1,jpg:1,webp:1},model:{glb:1,gltf:1},audio:{wav:1},animation:{json:1},font:{ttf:1,otf:1}},Jo={};for(const[Gi,Xi]of Object.entries(Qo))for(const e of Object.keys(Xi))Jo[e]=Gi;function Go(e){if(!e.includes("."))return null;const t=e.split(".").pop();return Jo[t||""]||null}const Xo={...Qo.image,...Qo.model,...Qo.audio,...Qo.animation,...Qo.font};Object.keys(Xo);function el(e,t=null){if(!e||"string"!=typeof e)return!1;const a=e.split(".").pop().toLowerCase();return!!Xo[a]||void 0}function tl(e){return e.split(".").pop()||""}function al(e){const t={};for(const[a,n]of Object.entries(e))"type"!==a&&"string"==typeof n&&el(n)&&(t[a]=n);return t}function nl(e,t,a=""){return`vault/${e}/${a}${a?"/":""}${t}`}async function ol(e,t,a=""){const n=nl(e,t,a);Qo.image[tl(n)]?await ll(n):Qo.model[tl(n)]&&await Ro.load(n)}async function ll(e){await new Promise(((t,a)=>{const n=new Image;n.onload=()=>{t(n)},n.onerror=()=>{a(new Error(`failed to preload '${e}'`))},n.src=e}))}function sl(e){return"string"==typeof e&&!!Qo.image[tl(e)]}const il={class:"page-display"},rl=["onClick"],ul=["onClick"],cl={key:2},dl=["onClick"];var _l=(0,o.aZ)({__name:"GameAdmin",setup(e){function t(e){return e==g.value}const a=(0,Ve.iH)(-1),l=(0,Ve.iH)("");function i(e,t){if(!e)return!1;if(e.toLowerCase()==e){if(t.toUpperCase().includes(e.toUpperCase()))return!0}else if(t.includes(e))return!0;return!1}const r=(0,o.Fl)((()=>{if(!l.value)return[];let e=Object.keys(ta).filter((e=>i(l.value,e)));return e.reverse(),e.slice(0,10)}));let u=!1;async function c(e){if(u)return;u=!0,v.jumpToPage(0),await Mo((()=>0==p.changingPage.value));const t=p.game.value.pages;t.splice(a.value+1,0,{type:e}),p.dirty.value=!0,v.jumpToPage(a.value),a.value=-1,u=!1}(0,Ve.iH)(Object.keys(ta));const d=(0,Ve.iH)();async function _(e){a.value=e,await(0,o.Y3)(),console.log(d.value),d.value[0].focus(),l.value=""}const g=(0,Ve.iH)(-1),{gameTools:p,navTools:v}=(0,Ye.b)();async function m(e){const t=p.currentPageIndex.value;v.jumpToPage(0),await Mo((()=>0==p.changingPage.value)),p.game.value.pages.splice(e,1),p.dirty.value=!0,v.jumpToPage(Math.min(p.game.value.pages.length-1,t))}function h(e){p.game.value.pages[e].persist={},p.dirty.value=!0}const w=(0,Ve.iH)([]),f=p.game.value.pages;let y=!1;const k=(0,Ve.iH)(),b=(0,Ve.iH)(),E=(0,Ve.iH)(-1);function D(e){const t=[];for(const[a,n]of Object.entries(e))"string"==typeof n&&el(n)&&t.push([a,n]);return t}return(0,o.bv)((()=>{for(let e=0;e<k.value.length;e++){const t=k.value[e],a=e;(0,At.u7)((0,Ve.iH)(t)).onStart((e=>{if(y)return;E.value=a;let t=-1;g.value=-1,e.onMove((()=>{for(let a=0;a<b.value.length;a++){const n=b.value[a],o=(0,Kt.Iv)(n),l=(0,Kt.Q6)(o),s=(0,Kt.Jk)(l,e.pos.value),i=Math.abs(l[1]-e.pos.value[1]);if(s<240&&i<40)return t=a,void(g.value=a)}t=-1,g.value=-1})),e.onEnd((async()=>{if(E.value=-1,t>-1){y=!0;const e=p.currentPageIndex.value;let n=1;while(n==a&&n==t)n+=1;if(n>=p.game.value.pages.length)return g.value=-1,void(y=!1);v.jumpToPage(0),await Mo((()=>0==p.changingPage.value)),console.log("jump finished, swapping");const o=p.game.value.pages;if(a<t)o.splice(t+1,0,o[a]),o.splice(a,1);else if(a>t){const e=o.splice(a,1)[0];o.splice(t+1,0,e)}p.dirty.value=!0,v.jumpToPage(e)}g.value=-1,y=!1}))}))}})),(e,i)=>((0,o.wg)(),(0,o.iD)("div",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,Ve.SU)(f),((e,u)=>((0,o.wg)(),(0,o.iD)("div",{key:u},[(0,o._)("div",il,[(0,o._)("div",{class:(0,s.C_)(["drag-handle page-type",E.value==u?"dragging":""]),ref_for:!0,ref_key:"dragHandle",ref:k},(0,s.zw)(e.name||e.type),3),(0,o.Wm)(yo,{"initial-expanded":!1,"vif-mode":!1,caption:`${D(e).length} assets`,identifier:`${(0,Ve.SU)(p).gameName}_${u}_${e.type}_assets`,class:"expander"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(D(e),(([e,t],a)=>((0,o.wg)(),(0,o.iD)("div",{key:a},(0,s.zw)(e)+": "+(0,s.zw)(t),1)))),128))])),_:2},1032,["caption","identifier"]),(0,o.Wm)(yo,{"initial-expanded":!1,"vif-mode":!1,caption:`${Object.keys(e.persist||{}).length} persist items`,identifier:`${(0,Ve.SU)(p).gameName}_${u}_${e.type}_assets`,class:"expander"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.entries(e.persist||{}),(([e,t],a)=>((0,o.wg)(),(0,o.iD)("div",{key:a},(0,s.zw)(e)+": "+(0,s.zw)(JSON.stringify(t)),1)))),128)),(0,o._)("button",{onClick:e=>h(u)},"Reset persist",8,rl)])),_:2},1032,["caption","identifier"]),(0,o.Wm)(Eo,{onTap:e=>m(u)},{default:(0,o.w5)((()=>[(0,o.Uk)("❌ delete page "+(0,s.zw)(u)+" "+(0,s.zw)(e.name||e.type),1)])),_:2},1032,["onTap"])]),E.value>-1?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["divider",(t(u)?"hover ":" ")+(E.value>-1&&g.value>-1?"dragging":"")]),ref_for:!0,ref_key:"divider",ref:b,style:(0,s.j5)({"animation-delay":.2*u+"s",display:E.value!=u&&E.value!=u+1?"block":"none"})},null,6)):(0,o.kq)("",!0),-1==E.value&&a.value!=u?((0,o.wg)(),(0,o.iD)("div",{key:1,class:"adder",onClick:e=>_(u),ref_for:!0,ref_key:"addButton",ref:w},"+",8,ul)):(0,o.kq)("",!0),a.value==u?((0,o.wg)(),(0,o.iD)("div",cl,[(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=e=>l.value=e),placeholder:"type page name",autofocus:"",ref_for:!0,ref_key:"searchBox",ref:d,class:"text-input"},null,512),[[n.nr,l.value]]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.value,((e,t)=>((0,o.wg)(),(0,o.iD)("button",{key:t,onClick:t=>c(e)},(0,s.zw)(e),9,dl)))),128)),(0,o._)("button",{onClick:i[1]||(i[1]=e=>a.value=-1)},"cancel")])):(0,o.kq)("",!0)])))),128))]))}});const gl=(0,u.Z)(_l,[["__scopeId","data-v-0739666b"]]);var pl=gl;function vl(e,t){return(0,o.wg)(),(0,o.iD)("div",null,"System Admin")}const ml={},hl=(0,u.Z)(ml,[["render",vl]]);var wl=hl;const fl={style:{display:"flex","flex-direction":"row"}},yl={class:"label"};var kl=(0,o.aZ)({__name:"BppDisplay",props:{value:{}},setup(e){const t=e,a=(0,o.Fl)((()=>1-t.value)),n=(0,o.Fl)((()=>({background:`rgba(${Math.min(255,512-512*a.value)}, ${Math.min(255,512*a.value)},0,1.0)`})));return(e,a)=>((0,o.wg)(),(0,o.iD)("div",fl,[(0,o._)("div",{class:"blob",style:(0,s.j5)(n.value)},null,4),(0,o._)("div",yl,[(0,o.Uk)((0,s.zw)(t.value.toFixed(2))+" ",1),a[0]||(a[0]=(0,o._)("span",{title:"Bytes Per Pixel"},"bpp",-1))])]))}});const bl=(0,u.Z)(kl,[["__scopeId","data-v-0cc5ed9f"]]);var El=bl;const Dl=(0,ct.Y)("image-preview-theme","light");var Pl=(0,o.aZ)({__name:"ImagePreview",props:{src:{},image:{}},setup(e){const t=e,a=(0,o.Fl)((()=>{const e=[320,180],a=e[0]/e[1],n=[t.image.width,t.image.height],o=n[0]/n[1];let l=[0,0];return l=o>a?[e[0],n[1]/n[0]*e[0]]:[n[0]/n[1]*e[1],e[1]],{inner:{"background-image":`url('${t.src}')`,width:`${l[0]}px`,height:`${l[1]}px`},outer:{width:`${e[0]}px`,height:`${Math.min(e[1],l[1])}px`}}}));return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(["preview-image",(0,Ve.SU)(Dl)]),style:(0,s.j5)(a.value.outer)},[(0,o._)("div",{class:"inner",style:(0,s.j5)(a.value.inner)},null,4)],6))}});const Ml=(0,u.Z)(Pl,[["__scopeId","data-v-894f2d42"]]);var Tl=Ml,Ul=a(119);const Il={style:{}},Ol={class:"label"},xl={key:0,class:"toast"},Wl={key:1,class:"upload-dialog"},Sl={class:"upload-dialog-top",style:{display:"flex"}},Cl=["disabled"],Al={style:{"flex-grow":"1","text-align":"left"}},Bl={class:"upload-dialog-bottom"},Ll={class:"filename"},Hl=["onClick","onMousedown","onMouseup","onMouseenter"],Vl={style:{"flex-grow":"1","flex-basis":"0","min-width":"0","text-align":"right","padding-right":"8px"}},Rl={key:0,class:"row-item"},zl={key:1,class:"row-item"},$l={class:"row-item"},Nl={key:0},Kl={key:1},Fl={key:2},jl={key:2,class:"row-item"},ql={key:3,class:"row-item"},Zl={key:0},Yl={key:4,class:"row-item"},Ql={key:0,style:{"text-align":"right",position:"relative"}},Jl={key:1,style:{width:"320px",height:"64px"}},Gl={key:3,style:{width:"320px",height:"64px"}},Xl={style:{"flex-grow":"1","flex-basis":"0","min-width":"0","padding-left":"8px"}},es={key:0,class:"row-item"},ts={key:1,class:"row-item"},as={key:2,class:"row-item"},ns={key:0};var os=(0,o.aZ)({__name:"AssetCatalogue",setup(e){const{gameTools:t,pageTools:a}=(0,Ye.b)(),n=(0,Ve.iH)(!1),l=(0,Ve.iH)(!1),i=(0,o.Fl)((()=>I.value.filter((e=>e.willUpload)).length)),r=(0,o.Fl)((()=>I.value.length)),u=(0,o.Fl)((()=>(0,Kt.Sm)(I.value.map((e=>e.willUpload?e.file.size:0)))));function c(){l.value=!1}function d(e){}function _(){g&&(g=!1)}(0,o.bv)((()=>{document.addEventListener("mouseup",_)})),(0,o.Ah)((()=>{document.removeEventListener("mouseup",_)}));let g=!1,p=!1;function v(e,t){g=!0;for(const a of I.value)a.swapped=void 0;I.value[t].swapped=!0,I.value[t].willUpload=!I.value[t].willUpload,p=I.value[t].willUpload}function m(e,t){g=!1}function h(e,t){g&&(I.value[t].swapped||(I.value[t].swapped=!0,I.value[t].willUpload=p))}const w=(0,o.Fl)((()=>P.value>0||0==I.value.filter((e=>e.willUpload)).length)),f=(0,Ve.iH)(!1),y=(0,Ve.iH)(0);let k=!1;const b=(0,Ve.iH)(0),E=vn();async function D(){if(!k){k=!0;try{const e=I.value.filter((e=>e.willUpload)),a=Date.now();for(let n=0;n<e.length;n++){const a=e[n];console.log(`uploading ${n+1} of ${e.length}`),y.value=n/e.length,await ut(a.file,t.gameName.value),a.file,C.value.includes(a.name)||(C.value.push(a.name),C.value.sort())}l.value=!1,b.value=.001*(Date.now()-a),await E.sync(),(async()=>{f.value=!0,await(0,ge._vH)(8e3),f.value=!1})()}finally{k=!1,l.value=!1}}}const P=(0,o.Fl)((()=>T.value.identicalImage.length+T.value.largeImage.length+T.value.badBpp.length));function M(){for(const e of I.value)e.willUpload=!0;for(const e of T.value.identicalImage)e.willUpload=!1;for(const e of T.value.largeImage)e.willUpload=!1;for(const e of T.value.badBpp)e.willUpload=!1}const T=(0,o.Fl)((()=>{const e=I.value.filter((e=>e.willUpload));return{updatedImage:e.filter((e=>e.diskImage&&e.image)),newImage:e.filter((e=>!e.diskImage&&e.image)),identicalImage:e.filter((e=>e.diskImage&&e.image&&e.diskImage.width==e.image.width&&e.diskImage.height==e.image.height&&e.diskFileSize==e.file.size)),largeImage:e.filter((e=>e.file.size>1e6)),sizeMismatch:e.filter((e=>e.diskImage&&e.image&&(e.diskImage.width!=e.image.width||e.diskImage.height!=e.image.height))),badBpp:e.filter((e=>(e.imageBpp||0)>.5))}})),U=(0,o.Fl)((()=>{let e="",t="";for(const[a,n]of Object.entries(T.value))for(let o=0;o<n.length;o++)e+={updatedImage:"❇️",newImage:"🌱",sizeMismatch:"📐"}[a]||"",t+={identicalImage:"💢",largeImage:"⚠️",badBpp:"🔴"}[a]||"";return e+(t?` | ${t.length/2} problems: ${t}`:"")}));let I=(0,Ve.iH)([]);const O=(0,Ve.iH)(null),{isOverDropZone:x}=(0,jt.EO$)(O,{async onDrop(e){if(e){console.log(`Successfully dropped ${e.length} file(s):`,e),I.value=[];for(const a of e){const e=Go(a.name)||"unknown",n=C.value.includes(a.name||"");let o,l,s;const i=`vault/${t.gameName.value}/${a.name}`;let r,u,c,d,_=!0;if(n&&(r=(await(await fetch(i)).blob()).size,r==a.size&&(_=!1),"image"==e)){const e=await Uo(Do(i).generate());console.log(e),o=e,l=i,u=r/(o.width*o.height)}if("image"==e){const e=URL.createObjectURL(a);c=await Uo(Do(e).generate()),d=a.size/(c.width*c.height),s=e}const g={name:a.name,file:a,type:e,extension:a.name.includes(".")&&a.name.split(".").pop()||"",mimeType:a.type,size:a.size,existsInGame:n,diskImage:o,image:c,imageUrl:s,imageBpp:d,diskImageUrl:l,diskFileSize:r,diskImageBpp:u,filesDifferent:_,willUpload:!0};I.value.push(g)}l.value=!0,M()}n.value=!1},onLeave(){n.value=!1},onEnter(){n.value=!0}}),W=(0,Ve.iH)(t.getGameNameNonReactive());function S(e){return{"background-image":`url('/sge2/vault/${W.value}/${e}')`}}(0,o.bv)((async()=>{if(!(0,ge.YU7)())return;const{dirContents:e}=await rt(`getAssetsOnDisk/${W.value}`,{});e&&(C.value=e.map((e=>e)),C.value.sort())}));const C=(0,Ve.iH)([]);return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{ref_key:"dropZoneRef",ref:O,class:(0,s.C_)(["drop-zone",(0,Ve.SU)(x)?"dropping":""])},[t[1]||(t[1]=(0,o._)("div",null," Drag and drop assets here ",-1)),t[2]||(t[2]=(0,o._)("h2",null,"All Assets On Disk",-1)),(0,o._)("div",Il,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(C.value,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:"cell"},[(0,o._)("div",{class:"thumb",style:(0,s.j5)(S(e))},null,4),(0,o._)("div",Ol,(0,s.zw)(e),1)])))),128))]),f.value?((0,o.wg)(),(0,o.iD)("div",xl," Uploaded "+(0,s.zw)(Math.round(u.value/1024))+"kb ",1)):(0,o.kq)("",!0),l.value?((0,o.wg)(),(0,o.iD)("div",Wl,[(0,o._)("div",Sl,[(0,o._)("div",null,[(0,o._)("button",{onClick:c},"cancel")]),(0,o._)("div",null,[(0,o._)("button",{disabled:w.value,class:"upload-button",onClick:D},"upload "+(0,s.zw)(i.value)+"/"+(0,s.zw)(r.value)+" - "+(0,s.zw)(Math.round(u.value/1024))+"kb",9,Cl)]),(0,o._)("div",null,[(0,o._)("button",{onClick:M},"select good")]),(0,o._)("div",Al,(0,s.zw)(U.value),1),(0,o._)("div",null,[(0,o.Wm)(Ul.Z,{modelValue:(0,Ve.SU)(Dl),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,Ve.dq)(Dl)?Dl.value=e:null),options:["light","dark"]},null,8,["modelValue"])])]),(0,o._)("div",Bl,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,Ve.SU)(I),((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,class:(0,s.C_)(["dropfile-item",e.willUpload?"will-upload":"wont-upload"])},[(0,o._)("div",Ll,(0,s.zw)(e.name),1),(0,o._)("div",{style:{display:"flex",width:"100%","flex-direction":"row"},onClick:e=>d(t),onMousedown:e=>{v(e,t)},onMouseup:e=>{m(e,t)},onMouseenter:e=>{h(e,t)}},[(0,o._)("div",Vl,[e.size>1e6?((0,o.wg)(),(0,o.iD)("div",Rl," ⚠️ Large asset: "+(0,s.zw)(Math.round(e.size/1024))+"kb ",1)):((0,o.wg)(),(0,o.iD)("div",zl,(0,s.zw)(Math.round(e.size/1024))+"kb ",1)),(0,o._)("div",$l,[e.filesDifferent&&e.diskFileSize?((0,o.wg)(),(0,o.iD)("div",Nl,"❇️ updated")):(0,o.kq)("",!0),e.filesDifferent&&!e.diskFileSize?((0,o.wg)(),(0,o.iD)("div",Kl,"🌱 new")):(0,o.kq)("",!0),e.filesDifferent?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Fl,"💢 identical size"))]),e.image?((0,o.wg)(),(0,o.iD)("div",jl,[(0,o._)("div",null,"dimensions: "+(0,s.zw)(e.image.width)+" x "+(0,s.zw)(e.image.height),1)])):(0,o.kq)("",!0),e.image?((0,o.wg)(),(0,o.iD)("div",ql,[!e.diskImage||e.image.width==e.diskImage?.width&&e.image.height==e.diskImage?.height?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Zl," 📐 Size mismatch - original "+(0,s.zw)(e.diskImage.width)+" x "+(0,s.zw)(e.diskImage.height),1))])):(0,o.kq)("",!0),e.image?((0,o.wg)(),(0,o.iD)("div",Yl,[e.imageBpp?((0,o.wg)(),(0,o.iD)("div",Ql,[(0,o.Wm)(El,{value:e.imageBpp,style:{position:"absolute",right:"0"}},null,8,["value"])])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)]),e.imageUrl&&e.image?((0,o.wg)(),(0,o.j4)(Tl,{key:0,src:e.imageUrl,image:e.image},null,8,["src","image"])):((0,o.wg)(),(0,o.iD)("div",Jl)),e.diskImageUrl&&e.diskImage?((0,o.wg)(),(0,o.j4)(Tl,{key:2,src:e.diskImageUrl,image:e.diskImage},null,8,["src","image"])):((0,o.wg)(),(0,o.iD)("div",Gl)),(0,o._)("div",Xl,[e.diskFileSize&&e.diskFileSize>1e6?((0,o.wg)(),(0,o.iD)("div",es," ⚠️ Large asset: "+(0,s.zw)(Math.round(e.diskFileSize/1024))+"kb ",1)):((0,o.wg)(),(0,o.iD)("div",ts,(0,s.zw)(Math.round((e.diskFileSize||0)/1024))+"kb ",1)),e.diskImage&&e.diskFileSize?((0,o.wg)(),(0,o.iD)("div",as,[(0,o._)("div",null,"dimensions: "+(0,s.zw)(e.diskImage.width)+" x "+(0,s.zw)(e.diskImage.height),1),e.diskImageBpp?((0,o.wg)(),(0,o.iD)("div",ns,[(0,o.Wm)(El,{value:e.diskImageBpp},null,8,["value"])])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])],40,Hl)],2)))),128))])])):(0,o.kq)("",!0)],2))}});const ls=(0,u.Z)(os,[["__scopeId","data-v-121df3af"]]);var ss=ls;const is={class:"nav-bar slab cols",style:{gap:"3px"}},rs={class:"cell"},us={class:"cell"},cs={class:"cell"},ds={class:"cell"},_s={class:"cell"},gs={class:"rest"},ps={key:0,style:{display:"flex","flex-direction":"row"},class:"commit-section"},vs={key:1,class:"commit-section",style:{display:"flex","flex-direction":"row"}},ms={key:2},hs={key:3},ws={key:4},fs={key:5},ys={key:6};var ks=(0,o.aZ)({__name:"AuthorWindow",setup(e){const{gameTools:t,appTools:a}=(0,Ye.b)(),n=(0,Ve.iH)();(0,At.u7)(n).onStart((e=>{const t=a.rightMargin.value;e.onMove((()=>{a.rightMargin.value=(0,Kt.uZ)(t-e.deltaTotal[0],4,1200),a.rightMargin.value<100&&(a.rightMargin.value=4)}))}));const l=(0,o.Fl)((()=>a.rightMargin.value>100));async function i(){await gt(t)}async function r(){await pt(t)}(0,ct.Y)("authorPageShown",1);wt();const u=(0,o.Fl)((()=>({width:`${a.rightMargin.value}px`}))),c=(0,ct.Y)("authorPageIndex",0);function d(e){c.value=e}return(e,a)=>((0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",{class:(0,s.C_)(["tinker-section","shown"]),style:(0,s.j5)(u.value)},[(0,o._)("div",{ref_key:"resizer",ref:n,class:"resizer"},null,512),l.value?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",is,[(0,o._)("div",rs,[(0,o._)("button",{onClick:a[0]||(a[0]=e=>d(0)),class:(0,s.C_)(["slab",0==(0,Ve.SU)(c)?"selected":""]),style:{width:"100%"}},"Tinker",2)]),(0,o._)("div",us,[(0,o._)("button",{onClick:a[1]||(a[1]=e=>d(1)),class:(0,s.C_)(["slab",1==(0,Ve.SU)(c)?"selected":""]),style:{width:"100%"}},"Page",2)]),(0,o._)("div",cs,[(0,o._)("button",{onClick:a[2]||(a[2]=e=>d(2)),class:(0,s.C_)(["slab",2==(0,Ve.SU)(c)?"selected":""]),style:{width:"100%"}},"Game",2)]),(0,o._)("div",ds,[(0,o._)("button",{onClick:a[3]||(a[3]=e=>d(3)),class:(0,s.C_)(["slab",3==(0,Ve.SU)(c)?"selected":""]),style:{width:"100%"}},"System",2)]),(0,o._)("div",_s,[(0,o._)("button",{onClick:a[4]||(a[4]=e=>d(4)),class:(0,s.C_)(["slab",4==(0,Ve.SU)(c)?"selected":""]),style:{width:"100%"}},"Assets",2)])]),(0,o._)("div",gs,[(0,Ve.SU)(t).dirty.value?((0,o.wg)(),(0,o.iD)("div",ps,[a[5]||(a[5]=(0,o._)("div",null,[(0,o._)("div",{class:"clean-dirty"}," ⚠️ Dirty ")],-1)),(0,o._)("div",null,[(0,o._)("button",{onClick:i,class:"commit-button"},"💾 commit")]),(0,o._)("div",null,[(0,o._)("button",{onClick:r,class:"commit-button"},"⎌ revert")])])):((0,o.wg)(),(0,o.iD)("div",vs,a[6]||(a[6]=[(0,o._)("div",{class:"clean-dirty"}," 🟢 Clean ",-1)]))),0==(0,Ve.SU)(c)?((0,o.wg)(),(0,o.iD)("div",ms,[(0,o.Wm)(eo)])):(0,o.kq)("",!0),1==(0,Ve.SU)(c)?((0,o.wg)(),(0,o.iD)("div",hs,[(0,o.Wm)(go)])):(0,o.kq)("",!0),2==(0,Ve.SU)(c)?((0,o.wg)(),(0,o.iD)("div",ws,[(0,o.Wm)(pl)])):(0,o.kq)("",!0),3==(0,Ve.SU)(c)?((0,o.wg)(),(0,o.iD)("div",fs,[(0,o.Wm)(wl)])):(0,o.kq)("",!0),4==(0,Ve.SU)(c)?((0,o.wg)(),(0,o.iD)("div",ys,[(0,o.Wm)(ss)])):(0,o.kq)("",!0)])],64)):(0,o.kq)("",!0)],4)]))}});const bs=(0,u.Z)(ks,[["__scopeId","data-v-73c7c32b"]]);var Es=bs,Ds=(0,o.aZ)({__name:"PageViewer",props:{config:{default:{type:""}},disposeNow:{default:!1},pageIndex:{default:-1}},emits:["nextPage","disposeDone"],setup(e,{emit:t}){const a=t;function n(){a("nextPage")}const l=(0,o.Fl)((()=>c.config?.type)),i=(0,o.Fl)((()=>c.config?.name)),r=(0,o.Fl)((()=>ta[l.value])),u=(0,o.f3)("gameTools"),c=e,d=(0,o.Fl)((()=>c.pageIndex));function _(e){const t=c.config[e];if("string"==typeof t)return t;console.warn(`asset not found in ${u.getGameNameNonReactive()}.mjs: page #${u.getCurrentPageIndexNonReactive().value} ${c.config.type} : ${e}`)}function g(e){const t=_(e);if("string"==typeof t){const e=u.currentVariant.value||"";return`vault/${u.getGameNameNonReactive()}/${e?e+"/":""}${t}`}console.warn(`asset not found in ${u.getGameNameNonReactive()}.mjs: page #${u.getCurrentPageIndexNonReactive()} ${c.config.type} : ${e}`)}const p=st();let v=!1;return(0,o.m0)((()=>{c.disposeNow&&!v&&(v=!0,p.trigger(),a("disposeDone"))})),(0,o.JJ)("pageTools",{getAssetFilename:_,getAssetUrl:g,pageName:i,pageType:l,loadImageAsset(e){return new Promise(((t,a)=>{const n=new Image;n.onload=()=>t(n),n.onerror=()=>a();const o=g(e);o?n.src=o:a()}))},config:(0,o.Fl)((()=>c.config)),onDispose:p,pageIndex:d}),(e,t)=>((0,o.wg)(),(0,o.iD)("div",null,[((0,o.wg)(),(0,o.j4)(o.n4,null,{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(r.value),{class:(0,s.C_)("page-viewer layout-"+(c.config["layoutMode"]||"portrait")),config:c.config,onNextPage:n},null,40,["class","config"]))])),_:1})),(0,o.Wm)(Es)]))}});const Ps=(0,u.Z)(Ds,[["__scopeId","data-v-7113a42c"]]);var Ms=Ps;const Ts=(0,Ve.iH)({});let Us=!1;function Is(){return window.parent!=window}const Os=(0,Ve.iH)(!1),xs=(0,Ve.iH)(null),Ws=(0,Ve.iH)("firstName"),Ss=(0,Ve.iH)("lastName");function Cs(){try{if(window.parent&&!Is()&&window.parent._clientId)return window.parent._clientId}catch(e){return console.warn("failed to get clientId from parent"),void console.error(e)}}function As(){Us||(Us=!0,Os.value=!0,Ts.value={clientId:Cs()||(0,ge._2Z)("clientId")||(0,ge.Bu0)(),sessionId:Ts.value.sessionId||(0,ge.Bu0)(),playId:(0,ge.Bu0)(),uuid:void 0})}const Bs=atob("aHR0cHM6Ly9wbWkuaW4tbW90aW9uLnZpZGVvL2ZlZWQvZHRl"),Ls=atob("aHR0cHM6Ly9wbWkuaW4tbW90aW9uLnZpZGVvL2ZlZWQvdXBkYXRl");atob("aHR0cHM6Ly9wbWkuaW4tbW90aW9uLnZpZGVvL2ZlZWQvbGVhZGVyYm9hcmQv");function Hs(e){try{return decodeURIComponent(e)}catch(t){return console.error(t),""}}async function Vs(e,t,a,n,o,l,s,i,r){As();const u={screenSize:[window.screen.width,window.screen.height],windowSize:[document.documentElement.clientWidth,document.documentElement.clientHeight],localTime:Date.now()-0,scratchPad:e,currentPageIndex:t,pageCount:a,gameName:n,clientId:Ts.value.clientId,sessionId:Ts.value.sessionId,deployData:o,benchmarkResults:l,ua:navigator.userAgent,eventName:r};Rs("🌕 AURA BODY: "+JSON.stringify(u,null,2)),window.auraPayload=u;const c=(0,ge.Hsr)(JSON.stringify(u)),d=Ls+"?"+c,_={mode:"cors",method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}};Rs(`🌕 fetch URL = ${d}`),Rs(`🌕 query string length = ${c.length}`);try{const e=await fetch(d,_);if(200!==e.status)Rs(`🌕 fetch failed ${e.status}: ${e.statusText} -- "${await e.text()}"`);else{const t=await e.text();Rs(`🌕 fetch success ${e.status}: ${e.statusText} -- "${t}"`),Rs("🌕 aura success"),window._auraPageDone=!0;try{return JSON.parse(t)}catch(g){return Rs(`🌕 invalid json: ${t}`),void console.error(g)}}}catch(g){return Rs("🌕 fetch threw an error"),void console.error(g)}}window.__auraLog=[];const Rs=(0,ge.YU7)()||(0,ge.BAP)()?console.log:e=>{window.__auraLog.push(e)};async function zs(e,t){const a=Hs(e);As();const n={clientId:Ts.value.clientId,sessionId:Ts.value.sessionId,gameName:t,queryString:a};if(!e)return void Rs("not doing queryforward - no querystring");Rs("aura"),Rs(JSON.stringify(n,null,2));const o=Bs+"?"+(0,ge.Hsr)(JSON.stringify(n)),l={mode:"cors",method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}};let s;try{s=await fetch(o,l)}catch(r){return Rs("🌕 #e fetch failed"),void console.error(r)}if(200!==s.status)return Rs("🌕 #f"),void Rs(`🌕 fetch failed ${s.status}: ${s.statusText} -- "${await s.text()}"`);const i=await s.text();try{Rs("🌕 ##s - ",i);const e=JSON.parse(i);return window._queryResult=e,xs.value=e,e.firstName&&(Ws.value=e.firstName),e.lastName&&(Ss.value=e.lastName),Ts.value.uuid=e.uuid,e}catch(r){Rs("🌕 error parsing"),Rs("🌕 "+i),console.error(r)}}const $s=(0,ct.Y)("debugMode",!1),Ns={style:{display:"flex","flex-direction":"row"}},Ks=["value"];var Fs=(0,o.aZ)({__name:"NumberEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){function a(){u("update:modelValue",0)}const n=(0,Ve.iH)(),l=(0,Ve.iH)(),s=Sa(n);s.start((e=>{e.move((()=>{let t=c.modelValue;t=(t||0)-.1*e.delta[1],t=Math.round(10*t)/10,u("update:modelValue",t)}))}));const i=Sa(l);function r(e){const t=e.target.value;u("update:modelValue",parseInt(t)||0)}i.start((e=>{let t=c.modelValue||0;t=5*Math.round(t/5),u("update:modelValue",t),e.move((()=>{let t=c.modelValue;t=(t||0)-5*e.delta[1],u("update:modelValue",t)}))}));const u=t,c=e;return(e,t)=>((0,o.wg)(),(0,o.iD)("div",Ns,[(0,o._)("span",{onClick:a,class:"mini-but"},"0"),(0,o._)("input",{value:e.modelValue,onInput:r,style:{width:"4em"}},null,40,Ks),(0,o._)("span",{ref_key:"drag1",ref:n,class:"mini-but"},"1",512),(0,o._)("span",{ref_key:"drag5",ref:l,class:"mini-but"},"5",512)]))}});const js=(0,u.Z)(Fs,[["__scopeId","data-v-3717a4b4"]]);var qs=js;const Zs=["value","selected"];var Ys=(0,o.aZ)({__name:"Selector",props:{choices:{},modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){function a(e){n("update:modelValue",e.target.value)}const n=t,l=e;return(e,t)=>((0,o.wg)(),(0,o.iD)("select",{onInput:a},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.choices,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:e,selected:e==l.modelValue},(0,s.zw)(e),9,Zs)))),128))],32))}});const Qs=(0,u.Z)(Ys,[["__scopeId","data-v-f1c5c686"]]);var Js=Qs;const Gs={style:{display:"flex","flex-direction":"row"}},Xs=["value","selected"];var ei=(0,o.aZ)({__name:"AssetEditor",props:{modelValue:{},optional:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,o.f3)("gameTools");function n(e){const t=a.currentPage.value,n=t[e];if("string"==typeof n)return n;console.warn(`asset not found in ${a.getGameNameNonReactive()}.mjs: page #${a.getCurrentPageIndexNonReactive().value} ${t.type} : ${e}`)}function l(e){const t=a.currentPage.value,o=n(e);if("string"==typeof o){const e=a.currentVariant.value||"";return`vault/${a.getGameNameNonReactive()}/${e?e+"/":""}${o}`}console.warn(`asset not found in ${a.getGameNameNonReactive()}.mjs: page #${a.getCurrentPageIndexNonReactive()} ${t.type} : ${e}`)}const i=(0,o.Fl)((()=>{if(!a.currentPage.value)return;let e=Object.entries(a.currentPage.value).filter((([e,t])=>"string"==typeof t&&(t.endsWith(".png")||t.endsWith(".webp")||t.endsWith(".jpg")))).map((([e,t])=>e));return d.optional&&(e=[""].concat(e)),e}));function r(e){console.log(e.target.value),c("update:modelValue",e.target.value)}const u=(0,o.Fl)((()=>d.modelValue?{"background-image":"url('"+l(d.modelValue||"")+"')"}:{}));const c=t,d=e;return(e,t)=>((0,o.wg)(),(0,o.iD)("div",Gs,[(0,o._)("select",{onInput:r},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.value,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t,value:e,selected:e==d.modelValue},(0,s.zw)(e),9,Xs)))),128))],32),(0,o._)("div",{class:"preview",style:(0,s.j5)(u.value)},null,4)]))}});const ti=(0,u.Z)(ei,[["__scopeId","data-v-6b8f1250"]]);var ai=ti;const ni={key:0},oi={class:"gd"};var li=(0,o.aZ)({__name:"HeroProtoBlockEditor",props:{index:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,o.f3)("gameTools"),n=a.currentPage,l=e,s=(0,o.Fl)((()=>{if(n.value.protoBlocks)return n.value.protoBlocks[l.index]}));let i=!1;return(0,o.YP)(s,(e=>{i||(i=!0,n.value.protoBlocks[l.index]=e,i=!1)})),(e,t)=>s.value?((0,o.wg)(),(0,o.iD)("div",ni,[(0,o._)("div",oi,[t[9]||(t[9]=(0,o._)("div",null,"Width",-1)),(0,o.Wm)(qs,{modelValue:s.value.width,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value.width=e)},null,8,["modelValue"]),t[10]||(t[10]=(0,o._)("div",null,"Height",-1)),(0,o.Wm)(qs,{modelValue:s.value.height,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.height=e)},null,8,["modelValue"]),t[11]||(t[11]=(0,o._)("div",null,"x",-1)),(0,o.Wm)(qs,{modelValue:s.value.x,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value.x=e)},null,8,["modelValue"]),t[12]||(t[12]=(0,o._)("div",null,"y",-1)),(0,o.Wm)(qs,{modelValue:s.value.y,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value.y=e)},null,8,["modelValue"]),t[13]||(t[13]=(0,o._)("div",null,"asset",-1)),(0,o.Wm)(ai,{modelValue:s.value.asset,"onUpdate:modelValue":t[4]||(t[4]=e=>s.value.asset=e),optional:!1},null,8,["modelValue"]),t[14]||(t[14]=(0,o._)("div",null,"animation",-1)),(0,o.Wm)(Js,{modelValue:s.value.animation,"onUpdate:modelValue":t[5]||(t[5]=e=>s.value.animation=e),choices:["","popin","fadein"]},null,8,["modelValue"]),t[15]||(t[15]=(0,o._)("div",null,"animation delay",-1)),(0,o.Wm)(qs,{modelValue:s.value.animationDelay,"onUpdate:modelValue":t[6]||(t[6]=e=>s.value.animationDelay=e)},null,8,["modelValue"]),t[16]||(t[16]=(0,o._)("div",{class:"label"},"heroStyle",-1)),(0,o.Wm)(Js,{modelValue:s.value.heroStyle,"onUpdate:modelValue":t[7]||(t[7]=e=>s.value.heroStyle=e),choices:["","shadow"]},null,8,["modelValue"]),t[17]||(t[17]=(0,o._)("div",{class:"label"},"heroStyle",-1)),(0,o.Wm)(Js,{modelValue:s.value.layout,"onUpdate:modelValue":t[8]||(t[8]=e=>s.value.layout=e),choices:["","by height"]},null,8,["modelValue"])])])):(0,o.kq)("",!0)}});const si=(0,u.Z)(li,[["__scopeId","data-v-19be3dcc"]]);var ii=si;const ri={style:{display:"flex","flex-direction":"row"}};var ui=(0,o.aZ)({__name:"DoubleEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,Ve.iH)(),n=Sa(a);n.start((e=>{e.move((()=>{if(console.log("move"),s.modelValue){let t=s.modelValue[0];t=(t||0)+.1*e.delta[0],t=Math.round(10*t)/10;let a=s.modelValue[1];a=(a||0)+.1*e.delta[1],a=Math.round(10*a)/10,console.log([t,a]),l("update:modelValue",[t,a])}}))}));const l=t,s=e;return(e,t)=>((0,o.wg)(),(0,o.iD)("div",ri,[(0,o._)("span",{ref_key:"drag1",ref:a,class:"mini-but"},[(0,o.WI)(e.$slots,"default")],512)]))}});const ci=(0,u.Z)(ui,[["__scopeId","data-v-74b8b92d"]]);var di=ci;const _i={key:0},gi={class:"gd"};var pi=(0,o.aZ)({__name:"Hero2ProtoBlockEditor",props:{index:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,o.f3)("gameTools");function n(){return[c.value.x,c.value.y]}function l(e){c.value&&(c.value.x=e[0],c.value.y=e[1])}function s(){return[c.value.w,c.value.h]}function i(e){c.value&&(c.value.w=e[0],c.value.h=e[1])}const r=a.currentPage,u=e,c=(0,o.Fl)((()=>{if(r.value.protoBlocks)return r.value.protoBlocks[u.index]}));let d=!1;return(0,o.YP)(c,(e=>{d||(d=!0,r.value.protoBlocks[u.index]=e,d=!1)})),(e,t)=>c.value?((0,o.wg)(),(0,o.iD)("div",_i,[(0,o._)("div",gi,[(0,o._)("div",null,[(0,o.Wm)(di,{"onUpdate:modelValue":i,"model-value":s()},{default:(0,o.w5)((()=>t[9]||(t[9]=[(0,o.Uk)("⇲")]))),_:1},8,["model-value"]),t[10]||(t[10]=(0,o.Uk)("w"))]),(0,o.Wm)(qs,{modelValue:c.value.w,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value.w=e)},null,8,["modelValue"]),t[13]||(t[13]=(0,o._)("div",null,"h",-1)),(0,o.Wm)(qs,{modelValue:c.value.h,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value.h=e)},null,8,["modelValue"]),(0,o._)("div",null,[(0,o.Wm)(di,{"onUpdate:modelValue":l,"model-value":n()},{default:(0,o.w5)((()=>t[11]||(t[11]=[(0,o.Uk)("↝")]))),_:1},8,["model-value"]),t[12]||(t[12]=(0,o.Uk)("x"))]),(0,o.Wm)(qs,{modelValue:c.value.x,"onUpdate:modelValue":t[2]||(t[2]=e=>c.value.x=e)},null,8,["modelValue"]),t[14]||(t[14]=(0,o._)("div",null,"y",-1)),(0,o.Wm)(qs,{modelValue:c.value.y,"onUpdate:modelValue":t[3]||(t[3]=e=>c.value.y=e)},null,8,["modelValue"]),t[15]||(t[15]=(0,o._)("div",null,"asset",-1)),(0,o.Wm)(ai,{modelValue:c.value.asset,"onUpdate:modelValue":t[4]||(t[4]=e=>c.value.asset=e),optional:!1},null,8,["modelValue"]),t[16]||(t[16]=(0,o._)("div",null,"animation",-1)),(0,o.Wm)(Js,{modelValue:c.value.animation,"onUpdate:modelValue":t[5]||(t[5]=e=>c.value.animation=e),choices:["","popin","fadein"]},null,8,["modelValue"]),t[17]||(t[17]=(0,o._)("div",null,"animation delay",-1)),(0,o.Wm)(qs,{modelValue:c.value.animationDelay,"onUpdate:modelValue":t[6]||(t[6]=e=>c.value.animationDelay=e)},null,8,["modelValue"]),t[18]||(t[18]=(0,o._)("div",{class:"label"},"anchor",-1)),(0,o.Wm)(Ln,{modelValue:c.value.anchor,"onUpdate:modelValue":t[7]||(t[7]=e=>c.value.anchor=e)},null,8,["modelValue"]),t[19]||(t[19]=(0,o._)("div",{class:"label"},"coords",-1)),(0,o.Wm)(Js,{modelValue:c.value.coords,"onUpdate:modelValue":t[8]||(t[8]=e=>c.value.coords=e),choices:["by height","by width"]},null,8,["modelValue"])]),t[20]||(t[20]=(0,o._)("div",{class:"dbl"},null,-1))])):(0,o.kq)("",!0)}});const vi=(0,u.Z)(pi,[["__scopeId","data-v-6f5f6f72"]]);var mi=vi;const hi={key:0},wi={class:"gd"},fi={key:0},yi={key:1},ki={key:2};var bi=(0,o.aZ)({__name:"ButtonProtoBlockEditor",props:{index:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,o.f3)("gameTools"),l=a.currentPage,s=e,i=(0,o.Fl)((()=>l.value.protoBlocks&&l.value.protoBlocks[s.index]));let r=!1;return(0,o.YP)(i,(e=>{r||(r=!0,l.value.protoBlocks[s.index]=e,r=!1)})),(e,t)=>i.value?((0,o.wg)(),(0,o.iD)("div",hi,[(0,o._)("div",wi,[t[16]||(t[16]=(0,o._)("div",{class:"label"},"Width",-1)),(0,o.Wm)(qs,{modelValue:i.value.width,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.width=e)},null,8,["modelValue"]),t[17]||(t[17]=(0,o._)("div",{class:"label"},"Height",-1)),(0,o.Wm)(qs,{modelValue:i.value.height,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.height=e)},null,8,["modelValue"]),t[18]||(t[18]=(0,o._)("div",{class:"label"},"x",-1)),(0,o.Wm)(qs,{modelValue:i.value.x,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value.x=e)},null,8,["modelValue"]),t[19]||(t[19]=(0,o._)("div",{class:"label"},"y",-1)),(0,o.Wm)(qs,{modelValue:i.value.y,"onUpdate:modelValue":t[3]||(t[3]=e=>i.value.y=e)},null,8,["modelValue"]),t[20]||(t[20]=(0,o._)("div",{class:"label"},"asset",-1)),(0,o.Wm)(ai,{modelValue:i.value.asset,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value.asset=e),optional:!1},null,8,["modelValue"]),t[21]||(t[21]=(0,o._)("div",{class:"label"},"selected asset",-1)),(0,o.Wm)(ai,{modelValue:i.value.selectedAsset,"onUpdate:modelValue":t[5]||(t[5]=e=>i.value.selectedAsset=e),optional:!0},null,8,["modelValue"]),t[22]||(t[22]=(0,o._)("div",{class:"label"},"animation",-1)),(0,o.Wm)(Js,{modelValue:i.value.animation,"onUpdate:modelValue":t[6]||(t[6]=e=>i.value.animation=e),choices:["","popin","fadein"]},null,8,["modelValue"]),t[23]||(t[23]=(0,o._)("div",{class:"label"},"buttonStyle",-1)),(0,o.Wm)(Js,{modelValue:i.value.buttonStyle,"onUpdate:modelValue":t[7]||(t[7]=e=>i.value.buttonStyle=e),choices:["","rounded with shadow"]},null,8,["modelValue"]),t[24]||(t[24]=(0,o._)("div",{class:"label"},"animation delay",-1)),(0,o.Wm)(qs,{modelValue:i.value.animationDelay,"onUpdate:modelValue":t[8]||(t[8]=e=>i.value.animationDelay=e)},null,8,["modelValue"]),t[25]||(t[25]=(0,o._)("div",{class:"label"},"action",-1)),(0,o._)("div",null,[(0,o.Wm)(Js,{modelValue:i.value.action,"onUpdate:modelValue":t[9]||(t[9]=e=>i.value.action=e),choices:["","nextPage","jumpToPage","jumpRelative","fireEvent"]},null,8,["modelValue"]),"jumpToPage"==i.value.action?((0,o.wg)(),(0,o.iD)("div",fi,[t[13]||(t[13]=(0,o.Uk)("page #")),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.value.pageIndex=e),size:"5"},null,512),[[n.nr,i.value.pageIndex]])])):(0,o.kq)("",!0),"jumpRelative"==i.value.action?((0,o.wg)(),(0,o.iD)("div",yi,[t[14]||(t[14]=(0,o.Uk)("delta ")),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.value.pageDelta=e),size:"5"},null,512),[[n.nr,i.value.pageDelta]])])):(0,o.kq)("",!0),"fireEvent"==i.value.action?((0,o.wg)(),(0,o.iD)("div",ki,[t[15]||(t[15]=(0,o.Uk)("event name ")),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.value.eventName=e),size:"5"},null,512),[[n.nr,i.value.eventName]])])):(0,o.kq)("",!0)])])])):(0,o.kq)("",!0)}});const Ei=(0,u.Z)(bi,[["__scopeId","data-v-110a7862"]]);var Di=Ei;const Pi={key:0},Mi={class:"gd"};var Ti=(0,o.aZ)({__name:"ScratchProtoBlockEditor",props:{index:{}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,o.f3)("gameTools"),l=a.currentPage,s=e,i=(0,o.Fl)((()=>l.value.protoBlocks&&l.value.protoBlocks[s.index]));let r=!1;return(0,o.YP)(i,(e=>{r||(r=!0,l.value.protoBlocks[s.index]=e,r=!1)})),(e,t)=>i.value?((0,o.wg)(),(0,o.iD)("div",Pi,[(0,o._)("div",Mi,[t[6]||(t[6]=(0,o._)("div",{class:"label"},"Width",-1)),(0,o.Wm)(qs,{modelValue:i.value.width,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.width=e)},null,8,["modelValue"]),t[7]||(t[7]=(0,o._)("div",{class:"label"},"Height",-1)),(0,o.Wm)(qs,{modelValue:i.value.height,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.height=e)},null,8,["modelValue"]),t[8]||(t[8]=(0,o._)("div",{class:"label"},"x",-1)),(0,o.Wm)(qs,{modelValue:i.value.x,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value.x=e)},null,8,["modelValue"]),t[9]||(t[9]=(0,o._)("div",{class:"label"},"y",-1)),(0,o.Wm)(qs,{modelValue:i.value.y,"onUpdate:modelValue":t[3]||(t[3]=e=>i.value.y=e)},null,8,["modelValue"]),t[10]||(t[10]=(0,o._)("div",{class:"label"},"fontSize",-1)),(0,o.Wm)(qs,{modelValue:i.value.fontSize,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value.fontSize=e)},null,8,["modelValue"]),t[11]||(t[11]=(0,o._)("div",{class:"label"},"field",-1)),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.value.field=e)},null,512),[[n.nr,i.value.field]])])])):(0,o.kq)("",!0)}});const Ui=(0,u.Z)(Ti,[["__scopeId","data-v-5923e59f"]]);var Ii=Ui;const Oi={key:0,class:"block-editor-panel"},xi={style:{display:"flex"}},Wi=["onClick"],Si={style:{"text-align":"center"}};var Ci=(0,o.aZ)({__name:"BlockEditor",setup(e){const{gameTools:t,navTools:a,appTools:n}=(0,Ye.b)();function l(e){return{HeroProtoBlockEditor:ii,Hero2ProtoBlockEditor:mi,ButtonProtoBlockEditor:Di,ScratchProtoBlockEditor:Ii}[e+"Editor"]}function i(e){d.value.protoBlocks=d.value.protoBlocks?.filter(((t,a)=>a!=e))}function r(e){let t={type:e};return"Hero2ProtoBlock"==e&&(t={...t,anchor:"center",x:0,y:0,w:30,h:30,asset:"",coords:"by height",backgroundMode:"contain"}),t}function u(e){d.value.protoBlocks=d.value.protoBlocks??[];const t=r(e);d.value.protoBlocks.push(t)}async function c(){if(console.log("commit"),!d.value||!d.value.protoBlocks)return;const e=t.gameName.value,a=(t.game.value.pages.map((e=>e.protoBlocks?e.protoBlocks:null)),{gameName:e,pageIndex:t.currentPageIndex.value,updatedBlocks:d.value.protoBlocks});await rt("commitProtoBlockChanges",a)}const d=t.currentPage;return(e,t)=>(0,Ve.SU)(d)&&(0,Ve.SU)(d).protoBlocks?((0,o.wg)(),(0,o.iD)("div",Oi,[t[5]||(t[5]=(0,o._)("h3",null,"Block Editor",-1)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,Ve.SU)(d).protoBlocks??[],((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[(0,o._)("div",null,[(0,o._)("div",xi,[(0,o._)("div",null,(0,s.zw)(e.type),1),(0,o._)("div",null,[(0,o._)("button",{onClick:e=>i(t)},"X",8,Wi)])]),(0,o.Uk)(" "+(0,s.zw)(JSON.stringify(e))+" ",1),((0,o.wg)(),(0,o.j4)((0,o.LL)(l(e.type)),{index:t},null,8,["index"]))])])))),128)),t[6]||(t[6]=(0,o._)("hr",null,null,-1)),(0,o._)("div",Si,[(0,o._)("button",{onClick:t[0]||(t[0]=e=>u("HeroProtoBlock"))},"+ Hero"),(0,o._)("button",{onClick:t[1]||(t[1]=e=>u("Hero2ProtoBlock"))},"+ Hero2"),(0,o._)("button",{onClick:t[2]||(t[2]=e=>u("ButtonProtoBlock"))},"+ Button"),(0,o._)("button",{onClick:t[3]||(t[3]=e=>u("ScratchProtoBlock"))},"+ Scratch"),t[4]||(t[4]=(0,o._)("hr",null,null,-1))]),(0,o._)("div",{style:{position:"fixed",bottom:"0px",right:"0px",width:"64px",height:"24px"}},[(0,o._)("button",{style:{width:"64px",height:"24px"},onClick:c},"commit")])])):(0,o.kq)("",!0)}});const Ai=(0,u.Z)(Ci,[["__scopeId","data-v-4e7b4276"]]);var Bi=Ai;function Li(e,t){const a={},n=e.pages[t];for(const[o,l]of Object.entries(n))el(l)&&(a[o]=l);return a}const Hi={class:"asset-manager"},Vi={style:{display:"flex","flex-wrap":"wrap"}};var Ri=(0,o.aZ)({__name:"AssetManager",setup(e){const t=(0,o.f3)("gameTools"),a=t.game;return(0,o.bv)((()=>{})),(e,t)=>((0,o.wg)(),(0,o.iD)("div",Hi,[(0,o._)("h3",null,(0,s.zw)((0,Ve.SU)(a).name),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,Ve.SU)(a).pages,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[(0,o._)("h4",null,(0,s.zw)(e.type),1),(0,o._)("div",Vi,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Object.entries((0,Ve.SU)(Li)((0,Ve.SU)(a),t)),(([e,t])=>((0,o.wg)(),(0,o.iD)("div",{key:e,style:{width:"80px",height:"80px",border:"1px solid white"}},[(0,o._)("div",null,[(0,o._)("b",null,(0,s.zw)(e),1)]),(0,Ve.SU)(el)(t)?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,Ve.SU)(sl)(t)?((0,o.wg)(),(0,o.iD)("div",{key:0,style:(0,s.j5)([{width:"60px",height:"60px"},{backgroundImage:`url(${(0,Ve.SU)(nl)((0,Ve.SU)(a).name,t)})`}]),class:"contain"},null,4)):(0,o.kq)("",!0)],64)):(0,o.kq)("",!0)])))),128))])])))),128))]))}});const zi=Ri;var $i=zi;const Ni={key:0,class:"game-display2"},Ki={key:3,class:"staging-banner"};var Fi=(0,o.aZ)({__name:"GameViewer2",setup(e){const t=(0,Ve.iH)(!1),a=(0,jt.IKb)(),n=a["Shift+Ctrl+A"];(0,o.YP)(n,(e=>{e&&(t.value=!t.value)}));const l=window;Date.now();l.$getAssetPath=e=>{let t=l._page_config[e];return t||(console.warn(`path ${e} not found in ${l.gameName} config. Include it in def.mjs. Using placeholder.png instead.`),console.warn(JSON.stringify(Object.keys(l._page_config))),t="placeholder.png"),`vault/${l.gameName}/${t}`},l.$getAssetUrl=e=>{let t=l._page_config[e];return t||(console.warn(`path ${e} not found in ${l.gameName} config. Include it in def.mjs. Using placeholder.png instead.`),console.warn(JSON.stringify(Object.keys(l._page_config))),t="placeholder.png"),l.$getAssetPath(e)};const i=(0,jt.ZQf)();(0,o.JJ)("games",_e),window.games=_e;const r=(0,Ve.iH)(!1);window.debugMode=$s,(0,o.m0)((()=>{1==(0,Ua.Tn)($s)?document.body.classList.add("debug"):document.body.classList.remove("debug")}));const u=(0,Ve.iH)(null);(async()=>{(0,ge.BAP)()&&(u.value="QA"),await(0,ge._vH)(5e3),u.value=null})();const c=(0,Ve.iH)("en"),d=(0,Ve.iH)("GB"),_=(0,Ve.iH)("en"),g=(0,Ve.iH)(!1),p=(0,Ve.iH)("");let v="";const m=(0,Ve.iH)(null),h=(0,Ve.iH)("LegacyContext"),w=(0,Ve.iH)(-1);let f=0;(0,o.YP)(w,(e=>{f=e}));const y=(0,Ve.iH)({});(0,Ve.iH)([]);document.addEventListener("keydown",(e=>{("z"==e.key||"Z"==e.key)&&e.ctrlKey&&e.altKey&&($s.value=!$s.value)}));const k=(0,o.Fl)((()=>ra[h.value]));(0,o.Fl)((()=>{const e=m.value?.pages[w.value]?.type;return ta[e]}));function b(e){let t=Date.now(),a=50,n=0,o=0;while(Date.now()-t<a){if(0===e)for(let e=0;e<11e3;e++)o+=e/Math.PI;else if(1===e){let e=new Array(2900).fill(0);for(let t=0;t<2900;t++)e[t]=t,o+=e[t]}else if(2===e){let e={};for(let t=0;t<500;t++)e[t+""]=t;o=Object.keys(e).length}n++}return n}function E(){var e=[];for(let t=0;t<3;t++)e.push(b(t));return e}function D(){return j.options.auraEnabled.value}async function P(){if(D()){const e=Y.value.eventName;await Vs(y.value,w.value,m.value.pages.length,p.value,pe,E(),X,!0,e)}}async function M(e){D()&&await Vs(y.value,w.value,m.value.pages.length,p.value,pe,E(),X,!0,e)}async function T(){if(D()){const e=(location.toString().split("?query=")[1]||"").split("#")[0];await zs(e,p.value)}}const U=(0,Ve.iH)([]),I=[],O=(0,Ve.iH)([]),x=((0,Ve.iH)([]),(0,Ve.iH)(!1));let W=()=>{};function S(){W()}const C=(0,Ve.iH)([]);async function A(){if(!x.value){x.value=!0;while(I.length){let e=w.value,{targetPage:t,transitionName:a,relative:n,goingBack:o}=I.shift();if(void 0==t){if(void 0==n)return console.error(new Error("must have targetPage or relative")),void(x.value=!1);t=e+n}if(t>=m.value.pages.length)return console.error(new Error(`page out of range ${t}`)),void(x.value=!1);if(t==e)return void(x.value=!1);const l=a||m.value.pages[t].transition||"default",s=L[l];if(e>-1){const t=new Promise((e=>{W=e}));O.value[e]=!0,await t,B.value[e]=s.exitClass,o||C.value.push(e)}B.value[t]=s.enterClass,U.value[t]=!0,await(0,ge._vH)(1e3*s.duration),e>-1&&(O.value[e]=!1,await(0,ge._vH)(1),U.value[e]=!1),w.value=t,w.value>0&&P()}x.value=!1}}const B=(0,Ve.iH)([]),L={default:{enterClass:"default-enter",exitClass:"default-exit",duration:.5},zoom:{enterClass:"zoom-enter",exitClass:"zoom-exit",duration:.7},spin:{enterClass:"spin-enter",exitClass:"spin-exit",duration:1}};function H(){N(1)}function V(e,t,a,n){if(window._auraPageDone=!1,!m.value||!m.value.pages)throw new Error("bad game state");I.push({targetPage:e,relative:t,transitionName:a,goingBack:n}),x.value||A()}function R(){if(C.value.length){const e=C.value.pop();V(e,void 0,void 0,!0)}else console.warn("tried to go back but no nav history")}function z(e){for(let t=0;t<m.value.pages.length;t++){const a=m.value.pages[t];if(a.name==e){const t=$(e);void 0!=t&&V(t)}}}function $(e){for(let t=0;t<m.value.pages.length;t++){const a=m.value.pages[t];if(a.name==e)return t}}function N(e,t){V(void 0,e,t)}(0,o.JJ)("navTools",{nextPage:H,jumpBack:R,jumpToPage:V,jumpRelative:N,jumpToPageName:z,pageIndexByName:$});const K=(0,ct.Y)("showElements",!1),F=!(0,ge.YU7)(),j={games:_e,debugMode:$s,loadGame:we,windowSize:ya(),forceAspectRatio:(0,Ve.iH)(null),options:{auraEnabled:(0,ct.Y)("auraEnabled",F),showElements:K,simulateSlowLoading:(0,ct.Y)("simulateSlowLoading",!1)},leftMargin:(0,ct.Y)("leftMargin",400),rightMargin:(0,ct.Y)("rightMargin",450)};(0,o.JJ)("appTools",j),(0,o.m0)((()=>{(0,Ua.Tn)(K)?document.body.style.setProperty("--element-outline-color","#F0F"):document.body.style.setProperty("--element-outline-color","transparent")}));const q=(0,Ve.iH)(["en"]);function Z(e){_.value=e}const Y=(0,o.Fl)((()=>m.value?.pages[w.value])),Q=(0,Ve.iH)(0),J=(0,Ve.iH)(""),G=(0,Ve.iH)([]),X=(0,ct.Y)("LS",{leaderboardName:"No_Leaderboard",score:0,meta:{},position:0}),ee=(0,Ve.iH)(""),te=(0,Ve.iH)([]),ae=(0,Ve.iH)(),ne=(0,Ve.iH)(!1);function oe(e=1){if(0==te.value.length||!ee.value)return;const t=te.value.indexOf(ee.value);ee.value=te.value[(t+e+2*te.value.length)%te.value.length]}function le(e){y.value={...y.value,...e}}function se(e){let t=e.split("_");return{language:t[0],region:t[1]}}function ie(e){const t=se(e);window._locale=e,c.value=t.language,d.value=t.region,_.value=e,g.value=!0}(0,o.YP)(m,(()=>{ne.value=!0}),{deep:!0}),(0,o.JJ)("gameTools",{gameName:p,game:m,originalGameVal:ae,scratchPad:y,scoreInfo:X,loadingPercent:Q,loadingMessage:J,updateScratchPad:le,currentPageIndex:w,locales:q,locale:_,sendExtraEvent:M,variants:te,currentVariant:ee,cycleVariant:oe,changingPage:x,text:function(e){return((Y.value.text||{})[_.value]||{})[e]},getGameNameNonReactive(){return v},getCurrentPageIndexNonReactive(){return f},currentPage:Y,pages:(0,o.Fl)((()=>m.value?.pages)),loadedImageURLs:G,switchLocale:Z,viewportSize:(0,Ve.iH)([1,1]),dirty:ne}),window.__udsp=le;const re=(0,o.Fl)((()=>({"background-color":(m.value||{}).bgColor||"#000"})));function ue(){if(pe.gameName){let e=ce((window.location.hash||"").split("#")[1]);const t=e.locale;t&&ie(t),we(pe.gameName)}else de((window.location.hash||"").split("#")[1])}function ce(e){let t=(e||"").split("/"),a=t.filter((e=>e.startsWith("locale=")))[0];void 0!==a&&(a=a.split("=")[1]);const n={gameName:t[0]||null,debugMode:t.indexOf("debug")>-1,locale:a};return n}function de(e){let t=ce(e);const a=t.locale;a&&ie(a),t.gameName&&we(t.gameName,!0)}function ve(e){return[...Object.keys(e.pages[0].text||{en:1})]}(0,o.YP)(ka,(e=>{r.value||de(e)}));(0,Ve.iH)(0),(0,Ve.iH)(1);let me=null;function he(e,t){let a=document.getElementById(e);a&&document.getElementsByTagName("head")[0].removeChild(a),a=document.createElement("style"),a.type="text/css",a.id=e,a.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(a)}async function we(e,t=!1){if(e===me)return;(0,ge.qub)(`🕹️ loading game ${e}`),r.value=!0,m.value=null,w.value=-1,p.value=e,v=e,me=e;const a=_e[p.value];if(ae.value=JSON.parse(JSON.stringify(a)),U.value=[...a.pages.map((()=>!1))],O.value=[...a.pages.map((()=>!1))],B.value=[...a.pages.map((()=>""))],te.value=a.variants||[],ee.value=a.defaultVariant||"",i.value=a.title||e,window.gameName=e,window._game=a,window._game_name=e,!a)throw new Error(`game ${e} not found`);q.value=ve(a),g.value||ie(a.defaultLocale||"en");const n=a.defaultVariant||"";for(let o=0;o<a.pages.length;o++){const t=a.pages[o];for(let[a,n]of Object.entries(t))if("string"==typeof n&&(n.endsWith(".otf")||n.endsWith(".ttf"))){const t=nl(e,n);Ta(a,t,!1);const o=Date.now();await Pa(a,t),await Da(a);Date.now();const l=n,s=a;let i=`\n          @font-face {\n          font-family: ${s};\n          src: url(vault/${e}/${l});\n          }\n          `;he(s,i)}}if(m.value=a,(async()=>{await(0,o.Y3)(),ne.value=!1})(),t||(window.location.hash="#"+e+"/locale="+_.value),h.value=m.value.context||"NewContext",V(0),"loading"==a.pages[0].role){r.value=!1;const t=[];for(let[o,l]of Object.entries(al(a.pages[1]))){const a=Po(nl(e,l,n));t.push(a.generate())}if(t.length){const e=Oo(t,3);e.trigger(),(0,o.m0)((()=>{Q.value=Math.floor(100*e.progress.value),J.value=`${Q.value}%`})),await To(e)}await(0,ge._vH)(1),V(1),await T()}else(async()=>{await T(),await P()})();r.value=!1,(async()=>{for(let t=1;t<a.pages.length;t++){const o=te.value.length?te.value:[n||void 0];for(const n of o){const o=al(a.pages[t]),l=Object.values(o);for(let t=0;t<l.length;t++){const a=l[t];if(a.endsWith(".ttf")||a.endsWith(".otf"))continue;const o=nl(e,a,n);G.value.includes(o)||G.value.push(o),await ol(e,a,n)}}}})(),document.getElementById("throbber").style.display="none"}async function fe(){const e=Co(),t=Oo(e,3);t.trigger();await To(t)}return(0,o.YP)(w,(e=>{e>=0&&(window._page_config=m.value.pages[e])})),window.testPool=fe,ma(),ue(),va(),(e,a)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,s.C_)(`game-viewer game-viewer-${p.value}`),style:(0,s.j5)(re.value)},[!r.value&&m.value?((0,o.wg)(),(0,o.iD)("div",Ni,[k.value?((0,o.wg)(),(0,o.j4)((0,o.LL)(k.value),{key:0},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(m.value.pages,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"}},[U.value[t]?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,s.C_)(["full-absolute",B.value[t]])},[(0,o.Wm)(Ms,{config:e,onNextPage:H,disposeNow:O.value[t],pageIndex:t,onDisposeDone:S},null,8,["config","disposeNow","pageIndex"])],2)):(0,o.kq)("",!0)])))),128))])),_:1})):(0,o.kq)("",!0)])):(0,o.kq)("",!0),(0,Ve.SU)($s)?((0,o.wg)(),(0,o.j4)(fa,{key:1,style:{"z-index":"9"}})):(0,o.kq)("",!0),t.value?((0,o.wg)(),(0,o.j4)($i,{key:2})):(0,o.kq)("",!0),(0,o.Wm)(Bi),u.value?((0,o.wg)(),(0,o.iD)("div",Ki,(0,s.zw)(u.value),1)):(0,o.kq)("",!0)],6))}});const ji=(0,u.Z)(Fi,[["__scopeId","data-v-13cb46ea"]]);var qi=ji;var Zi=(0,o.aZ)({name:"App",components:{Configurator:d,HelloWorld:M,GameViewer:pa,GameViewer2:qi},data(){return{gameViewer2PreviewMode:!0,gameViewer3PreviewMode:null}},mounted(){this.gameViewer2PreviewMode=window.location.pathname.includes("sge2")||pe.newGameViewer||!1,this.gameViewer3PreviewMode=window.location.pathname.includes("sge3")||pe.newGameViewer3||!1}});const Yi=(0,u.Z)(Zi,[["render",l]]);var Qi=Yi;const Ji=(0,n.ri)(Qi);Ji.mount("#app"),Ji.config.globalProperties.$getAsset=ge.NhK},619:function(e,t,a){"use strict";function n(e,t,a,n){return function(){const o=t<<9;let l=5*t;return l=9*(l<<7|l>>>25),a^=e,n^=t,t^=a,e^=n,a^=o,n=n<<11|n>>>21,(l>>>0)/4294967296}}n(12345,858281,38377,9417285)},397:function(e,t,a){"use strict";a.d(t,{u7:function(){return d}});var n=a(862),o=a(542),l=a(322),s=a(698);class i{touch;pos;t;identifier;constructor(e){this.touch=e,this.pos=[e.pageX,e.pageY],this.t=Date.now(),this.identifier=e.identifier}}class r{initialFingerTouch;identifier;pos;delta;deltaTotal=[0,0];touches=[];lastTouch;onMove=(0,s.QN)();onEnd=(0,s.QN)();constructor(e){this.initialFingerTouch=e,this.identifier=e.identifier,this.pos=(0,o.iH)(e.pos),this.lastTouch=e,this.delta=[0,0]}_updateWithNewFingerTouch(e){e.identifier!=this.identifier&&console.warn("identifier mismatch"),this.delta=(0,n.Q0)(e.pos,this.pos.value),this.deltaTotal=(0,n.Zz)(this.deltaTotal,this.delta),this.pos.value=e.pos,this.touches.push(e),this.lastTouch=e,this.onMove.trigger()}_end(e){this.onEnd.trigger()}}function u(e,t){if((0,o.dq)(e))if(void 0!==e.value)t(e);else{const a=(0,l.YP)(e,(n=>{void 0!==n&&(a(),t(e))}))}else t(e)}class c{fingers=new Map;onDestroy=(0,s.QN)();onStart=(0,s.QN)();pos=(0,o.iH)(null);primaryFinger=null;_isSetup=!1;onScroll=(0,s.QN)();destroy(){this.onDestroy.trigger()}constructor(e){u(e,(e=>{this.setup(e.value)}))}teardown=()=>{};setup(e){if(this._isSetup)throw new Error("toucher already set up");this._isSetup=!0;const t=e=>{const t=e.changedTouches;for(const a of t){const e=this.fingers.get(a.identifier);e&&console.warn("finger already present");const t=new i(a),n=new r(t);this.fingers.set(n.identifier,n),null==this.primaryFinger&&(this.primaryFinger=n.identifier),this.onStart.trigger(n)}e.preventDefault()};e.addEventListener("touchstart",t),this.onDestroy((()=>e.removeEventListener("touchstart",t)));const a=e=>{const t=e.changedTouches;for(const a of t){const t=this.fingers.get(a.identifier);if(!t)throw new Error(`move event for unknown finger ${a.identifier}`);this.primaryFinger==t.identifier&&(this.pos.value=t.pos.value),t._updateWithNewFingerTouch(new i(a)),e.preventDefault()}};e.addEventListener("touchmove",a),this.onDestroy((()=>e.removeEventListener("touchmove",a)));const n=e=>{const t=e.changedTouches;for(const a of t){const t=this.fingers.get(a.identifier);if(!t)throw new Error(`move event for unknown finger ${a.identifier}`);this.primaryFinger==t.identifier&&(this.pos.value=t.pos.value,this.primaryFinger=null),t._end(new i(a)),e.preventDefault(),this.fingers.delete(a.identifier)}};e.addEventListener("touchend",n),this.onDestroy((()=>e.removeEventListener("touchend",n)));let o=!1;const l=e=>-1-e.button,s=e=>{e.button>=2||(o=!0,e.preventDefault(),document.addEventListener("mouseup",c),document.addEventListener("mousemove",u),t({preventDefault(){},changedTouches:[{identifier:l(e),pageX:e.pageX,pageY:e.pageY}]}))},u=e=>{if(e.preventDefault(),!o)return;const t=Array.from(this.fingers.values()).filter((e=>e.identifier<0)),n=t.map((t=>({identifier:t.identifier,pageX:e.pageX,pageY:e.pageY})));a({preventDefault(){},changedTouches:n})},c=e=>{e.preventDefault(),document.removeEventListener("mouseup",c),document.removeEventListener("mousemove",u),o=!1,n({preventDefault(){},changedTouches:[{identifier:l(e),pageX:e.pageX,pageY:e.pageY}]})};e.addEventListener("mousedown",s),this.onDestroy((()=>{e.removeEventListener("mousedown",s)}));const d=e=>{e.preventDefault(),this.pos.value=[e.pageX,e.pageY]};e.addEventListener("mousemove",d),this.onDestroy((()=>{e.removeEventListener("mousemove",d)})),e.addEventListener("wheel",(e=>{this.onScroll.trigger(e.deltaY)})),this.onDestroy((()=>{e.removeEventListener("mousemove",d)}))}}function d(e){const t=new c(e);return(0,l.Ah)((()=>{t.destroy()})),t}},772:function(e,t,a){"use strict";a.d(t,{b:function(){return o}});var n=a(322);function o(){return{pageTools:(0,n.f3)("pageTools",null),appTools:(0,n.f3)("appTools",null),gameTools:(0,n.f3)("gameTools",null),navTools:(0,n.f3)("navTools",null)}}},708:function(e,t,a){"use strict";a.d(t,{BAP:function(){return m},Bu0:function(){return _},Hsr:function(){return g},Kqf:function(){return i},NhK:function(){return l},OlH:function(){return c},Smz:function(){return n.Sm},Wqv:function(){return u},YU7:function(){return v},_2Z:function(){return p},_vH:function(){return d},qub:function(){return h},uZ5:function(){return s},w6H:function(){return n.w6},wAI:function(){return o.wA}});a(355);var n=a(862),o=(a(619),a(323));function l(e){if(!e)throw new Error("getAsset wasn't passed a path");return"./vault/"+window.gameName+"/"+e}function s(e,t=0,a=1){return Math.min(Math.max(t,e),a)}function i(e,t){return e.sort(((e,a)=>{const[n,o]=[t(e),t(a)];return n<o?-1:n<=o?0:1})),e}function r(e){return e.split("\n").map((e=>e.trim())).map((e=>e.split(",").map((e=>e))))}async function u(e){const t=await fetch(e),a=await t.text(),n=r(a);return n}async function c(e){const t=await fetch(e),a=await t.text(),n=a.split("\n");return n}function d(e){return new Promise((t=>setTimeout(t,e)))}function _(){return new Array(10).fill(0).map((()=>Math.floor(256*Math.random()).toString(16))).join("")}function g(e){return btoa(e).replaceAll("+","-").replaceAll("/","_").replaceAll("=","~").split("").reverse().join("")}function p(e,t=null){try{const a=localStorage.getItem(e);return"null"===a||null===a?(console.warn("LocalStorage contained 'null'"),t):a}catch(a){return console.warn("LocalStorage get failed"),console.error(a),t}}window.clamp=s;Date.now();function v(){return window.location.host.startsWith("localhost:")||window.location.host.startsWith("127.0.0.1:")||window.location.host.startsWith("monolith:")}function m(){return!(!window.location.host.endsWith(".org.uk")&&!window.location.host.startsWith("qa."))}v()&&console.log("🧑‍💻 we are in localMode - hello :)"),m()&&console.log("🛋️ we are in staging"),window.ubc=[];const h=v()||m()?console.log:e=>{window.ubc.push(e)}},862:function(e,t,a){"use strict";function n(e,t=void 0,a=void 0){if("undefined"==typeof t&&(t=e,e=0),"undefined"==typeof a&&(a=1),a>0&&e>=t||a<0&&e<=t)return[];const n=[];for(let o=e;a>0?o<t:o>t;o+=a)n.push(o);return n}function o(e,t=0,a=1){return Math.min(Math.max(t,e),a)}function l(e,t){return e==t||!(!e||!t)&&(e[0]==t[0]&&e[1]==t[1])}function s(e,t){return[e[0]+t[0],e[1]+t[1]]}function i(e,t){return[e[0]-t[0],e[1]-t[1]]}function r(e,t){return[e[0]*t,e[1]*t]}function u(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))}function c(e,t){return u(i(e,t))}function d(e,t,a){return[e[0]*(1-a)+t[0]*a,e[1]*(1-a)+t[1]*a]}function _(e,t){return[0==t[0]?0:e[0]/t[0],0==t[1]?0:e[1]/t[1]]}function g(e,t){return[o(e[0],t[0],t[0]+t[2]),o(e[1],t[1],t[1]+t[3])]}function p(e){const t=e/(2*Math.PI);return(t-Math.floor(t))*(2*Math.PI)}function v(e){return p(e+Math.PI)-Math.PI}function m(e){return[e[0]+.5*e[2],e[1]+.5*e[3]]}a.d(t,{DG:function(){return u},Iv:function(){return f},Jk:function(){return c},Ky:function(){return r},Lh:function(){return _},Of:function(){return g},Q0:function(){return i},Q6:function(){return m},QR:function(){return w},Sm:function(){return y},VZ:function(){return v},Wy:function(){return d},Zz:function(){return s},j0:function(){return l},pO:function(){return h},uZ:function(){return o},w6:function(){return n}});function h(e){const t=e.getBoundingClientRect();return[t.width,t.height]}function w(e){if(Array.isArray(e)){if(0==e.length)throw new Error("oh no");e=e[0]}const t=e.getBoundingClientRect(),a=document.body,n=document.documentElement,o=window.pageYOffset||n.scrollTop||a.scrollTop,l=window.pageXOffset||n.scrollLeft||a.scrollLeft,s=n.clientTop||a.clientTop||0,i=n.clientLeft||a.clientLeft||0,r=t.top+o-s,u=t.left+l-i;return[Math.round(u),Math.round(r)]}function f(e){if(Array.isArray(e)){if(0==e.length)throw new Error("oh no");e=e[0]}const t=e.getBoundingClientRect(),a=document.body,n=document.documentElement,o=window.pageYOffset||n.scrollTop||a.scrollTop,l=window.pageXOffset||n.scrollLeft||a.scrollLeft,s=n.clientTop||a.clientTop||0,i=n.clientLeft||a.clientLeft||0,r=t.top+o-s,u=t.left+l-i;return[Math.round(u),Math.round(r),t.width,t.height]}function y(e){let t=0;for(const a of e)t+=a;return t}},698:function(e,t,a){"use strict";a.d(t,{QN:function(){return l}});const n=Symbol("isNotifies"),o=Symbol("isNotifiable");function l(){const e=new Set,t=function(t,n){e.add(t);const o=()=>{a(t)};return n&&n(o),o},a=function(t){e.delete(t)},l=function(t){for(const a of e)a(t)};return Object.assign(t,{trigger:l,[n]:!0,[o]:!0}),t}},211:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var vue__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(322),vue__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(682),vue__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(542),_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(708),_Chooser2_vue__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(119),_localStorageRef__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(577),_Toggle1_vue__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(858),_useTools__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(772),_toucher3__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(397);const _hoisted_1={class:"header section"},_hoisted_2={class:"game-name-title",style:{"user-select":"all"}},_hoisted_3={class:"locales section"},_hoisted_4=["onClick"],_hoisted_5={class:"pages section"},_hoisted_6=["onClick"],_hoisted_7=["title","onClick"],_hoisted_8={class:"section debug-links"},_hoisted_9={key:0,target:"_blank",href:"/sge2/#gameList"},_hoisted_10={key:0,target:"_blank",href:"/sge/admin"},_hoisted_11={class:"control section"},_hoisted_12={class:"scratch section"},_hoisted_13={key:0,class:"scratchpad-empty"},_hoisted_14={key:1},_hoisted_15={key:2},_hoisted_16={style:{"font-size":"80%"}},_hoisted_17={class:"assets section"},_hoisted_18=["href","title"],_hoisted_19={class:"aspect section"},APPNAME="sge";__webpack_exports__.Z=(0,vue__WEBPACK_IMPORTED_MODULE_5__.aZ)({__name:"FullDebugPanel",setup(__props){const{gameTools:gameTools,navTools:navTools,appTools:appTools}=(0,_useTools__WEBPACK_IMPORTED_MODULE_6__.b)(),resizer=(0,vue__WEBPACK_IMPORTED_MODULE_7__.iH)();(0,_toucher3__WEBPACK_IMPORTED_MODULE_4__.u7)(resizer).onStart((e=>{const t=appTools.leftMargin.value;e.onMove((()=>{appTools.leftMargin.value=(0,_util__WEBPACK_IMPORTED_MODULE_0__.uZ5)(t+e.deltaTotal[0],4,1200),appTools.leftMargin.value<100&&(appTools.leftMargin.value=4)}))}));const debugPanelStyle=(0,vue__WEBPACK_IMPORTED_MODULE_5__.Fl)((()=>({width:`${appTools.leftMargin.value}px`}))),panelContentShown=(0,vue__WEBPACK_IMPORTED_MODULE_5__.Fl)((()=>appTools.leftMargin.value>100)),loadedImageURLs=gameTools.loadedImageURLs,forceAr=(0,_localStorageRef__WEBPACK_IMPORTED_MODULE_2__.Y)("forceAr","none");(0,vue__WEBPACK_IMPORTED_MODULE_5__.m0)((()=>{"none"==forceAr.value?appTools.forceAspectRatio.value=null:appTools.forceAspectRatio.value=eval(forceAr.value)}));const isLocalMode=(0,_util__WEBPACK_IMPORTED_MODULE_0__.YU7)();function jumpToPage(e){navTools.jumpToPage(e)}async function api(e,t){try{var a=await fetch(`/${APPNAME}/admin/api/`+e,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)});return await a.json()}catch(n){try{console.warn(n.body.error.stack.split("\n    at Object.callWith (")[0])}catch(o){console.error(n)}return}}function launchFile(e){api("launchFile",{path:"code "+e})}function gameVaultClick(){api("launchFile",{path:"xdg-open ../vault/"+gameTools.gameName.value})}function gameDefClick(){api("launchFile",{path:"code ../client/src/games/"+gameTools.gameName.value+".mjs"})}function closeDebug(){appTools.debugMode.value=!1}return(e,t)=>((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("div",{class:"debug-panel2",style:(0,vue__WEBPACK_IMPORTED_MODULE_8__.j5)(debugPanelStyle.value)},[(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",{ref_key:"resizer",ref:resizer,class:"resizer"},null,512),panelContentShown.value?((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)(vue__WEBPACK_IMPORTED_MODULE_5__.HY,{key:0},[(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",_hoisted_1,[(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",{class:"close-debug",onClick:closeDebug},"X"),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",_hoisted_2,(0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).gameName.value),1)]),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",_hoisted_3,[(0,vue__WEBPACK_IMPORTED_MODULE_5__.WI)(e.$slots,"locales",{},(()=>[((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(!0),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)(vue__WEBPACK_IMPORTED_MODULE_5__.HY,null,(0,vue__WEBPACK_IMPORTED_MODULE_5__.Ko)((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).locales.value,((e,t)=>((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("span",{key:t},[t>0?((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)(vue__WEBPACK_IMPORTED_MODULE_5__.HY,{key:0},[(0,vue__WEBPACK_IMPORTED_MODULE_5__.Uk)(" - ")],64)):(0,vue__WEBPACK_IMPORTED_MODULE_5__.kq)("",!0),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("span",{onClick:t=>(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).switchLocale(e),class:(0,vue__WEBPACK_IMPORTED_MODULE_8__.C_)((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).locale.value==e?"current-locale":"")},(0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)(e),11,_hoisted_4)])))),128))]))]),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",_hoisted_5,[(0,vue__WEBPACK_IMPORTED_MODULE_5__.WI)(e.$slots,"pages",{},(()=>[((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(!0),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)(vue__WEBPACK_IMPORTED_MODULE_5__.HY,null,(0,vue__WEBPACK_IMPORTED_MODULE_5__.Ko)((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).pages.value,((e,a)=>((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("div",{key:a,class:(0,vue__WEBPACK_IMPORTED_MODULE_8__.C_)((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).currentPageIndex.value==a?"current-page":"")},[(0,vue__WEBPACK_IMPORTED_MODULE_5__.Uk)((0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)(a)+" - ",1),(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(isLocalMode)?((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("span",{key:0,style:{cursor:"pointer"},onClick:t=>launchFile(`../client/src/components/pages/${e.type}.vue`)},"⌻",8,_hoisted_6)):(0,vue__WEBPACK_IMPORTED_MODULE_5__.kq)("",!0),t[4]||(t[4]=(0,vue__WEBPACK_IMPORTED_MODULE_5__.Uk)()),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("a",{title:e.type,onClick:e=>jumpToPage(a),style:{"user-select":"all"}},(0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)(e.name||e.type),9,_hoisted_7)],2)))),128))]))]),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",_hoisted_8,[(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",null,[(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(isLocalMode)?((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("a",_hoisted_9,"Game List")):(0,vue__WEBPACK_IMPORTED_MODULE_5__.kq)("",!0)]),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",null,[(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(isLocalMode)?((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("a",_hoisted_10,"Admin")):(0,vue__WEBPACK_IMPORTED_MODULE_5__.kq)("",!0)]),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",null,[(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(isLocalMode)?((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("div",{key:0,onClick:gameVaultClick},"⌬ vault/"+(0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).gameName.value),1)):(0,vue__WEBPACK_IMPORTED_MODULE_5__.kq)("",!0)]),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",null,[(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(isLocalMode)?((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("div",{key:0,onClick:gameDefClick},"⌻ "+(0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).gameName.value)+".mjs",1)):(0,vue__WEBPACK_IMPORTED_MODULE_5__.kq)("",!0)])]),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",_hoisted_11,[(0,vue__WEBPACK_IMPORTED_MODULE_5__.WI)(e.$slots,"control",{},(()=>[(0,vue__WEBPACK_IMPORTED_MODULE_5__.Wm)(_Toggle1_vue__WEBPACK_IMPORTED_MODULE_3__.Z,{modelValue:(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(appTools).options.auraEnabled.value,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(appTools).options.auraEnabled.value=e)},{default:(0,vue__WEBPACK_IMPORTED_MODULE_5__.w5)((()=>t[5]||(t[5]=[(0,vue__WEBPACK_IMPORTED_MODULE_5__.Uk)("aura")]))),_:1},8,["modelValue"]),(0,vue__WEBPACK_IMPORTED_MODULE_5__.Wm)(_Toggle1_vue__WEBPACK_IMPORTED_MODULE_3__.Z,{modelValue:(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(appTools).options.showElements.value,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(appTools).options.showElements.value=e)},{default:(0,vue__WEBPACK_IMPORTED_MODULE_5__.w5)((()=>t[6]||(t[6]=[(0,vue__WEBPACK_IMPORTED_MODULE_5__.Uk)("show elements")]))),_:1},8,["modelValue"]),(0,vue__WEBPACK_IMPORTED_MODULE_5__.Wm)(_Toggle1_vue__WEBPACK_IMPORTED_MODULE_3__.Z,{modelValue:(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(appTools).options.simulateSlowLoading.value,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(appTools).options.simulateSlowLoading.value=e)},{default:(0,vue__WEBPACK_IMPORTED_MODULE_5__.w5)((()=>t[7]||(t[7]=[(0,vue__WEBPACK_IMPORTED_MODULE_5__.Uk)("simulate slow loading")]))),_:1},8,["modelValue"])]))]),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",_hoisted_12,[(0,vue__WEBPACK_IMPORTED_MODULE_5__.WI)(e.$slots,"scratch",{},(()=>[((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(!0),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)(vue__WEBPACK_IMPORTED_MODULE_5__.HY,null,(0,vue__WEBPACK_IMPORTED_MODULE_5__.Ko)(Object.entries((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).scratchPad.value),(([e,t])=>((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("div",{key:e,style:{"user-select":"all"}},[(0,vue__WEBPACK_IMPORTED_MODULE_5__.Uk)((0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)(e)+": ",1),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("i",null,(0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)(t),1)])))),128)),0==Object.keys((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).scratchPad.value).length?((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("div",_hoisted_13," scratchpad empty ")):(0,vue__WEBPACK_IMPORTED_MODULE_5__.kq)("",!0),0==(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).scoreInfo.value.score?((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("div",_hoisted_14," no score ")):((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("div",_hoisted_15,[(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("i",null,(0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).scoreInfo.value.leaderboardName),1),t[8]||(t[8]=(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("br",null,null,-1)),t[9]||(t[9]=(0,vue__WEBPACK_IMPORTED_MODULE_5__.Uk)(" score: ")),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("b",null,(0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).scoreInfo.value.score),1),t[10]||(t[10]=(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("br",null,null,-1)),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("span",_hoisted_16,(0,vue__WEBPACK_IMPORTED_MODULE_8__.zw)(JSON.stringify((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).scoreInfo.value.meta)),1)]))]))]),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",_hoisted_17,[(0,vue__WEBPACK_IMPORTED_MODULE_5__.WI)(e.$slots,"assets",{},(()=>[((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(!0),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)(vue__WEBPACK_IMPORTED_MODULE_5__.HY,null,(0,vue__WEBPACK_IMPORTED_MODULE_5__.Ko)((0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(gameTools).loadedImageURLs.value,(e=>((0,vue__WEBPACK_IMPORTED_MODULE_5__.wg)(),(0,vue__WEBPACK_IMPORTED_MODULE_5__.iD)("a",{target:"_blank",href:e,title:e,key:e,class:"asset-thumbnail",style:(0,vue__WEBPACK_IMPORTED_MODULE_8__.j5)({"background-image":"url('"+e+"')"})},null,12,_hoisted_18)))),128))]))]),(0,vue__WEBPACK_IMPORTED_MODULE_5__._)("div",_hoisted_19,[(0,vue__WEBPACK_IMPORTED_MODULE_5__.Wm)(_Chooser2_vue__WEBPACK_IMPORTED_MODULE_1__.Z,{modelValue:(0,vue__WEBPACK_IMPORTED_MODULE_7__.SU)(forceAr),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,vue__WEBPACK_IMPORTED_MODULE_7__.dq)(forceAr)?forceAr.value=e:null),options:["none","16/9","16/10","21/32","16/32"]},null,8,["modelValue"])])],64)):(0,vue__WEBPACK_IMPORTED_MODULE_5__.kq)("",!0)],4))}})},119:function(e,t,a){"use strict";a.d(t,{Z:function(){return _}});var n=a(322),o=a(682);const l={class:"chooser-2"},s=["onClick"];var i=(0,n.aZ)({__name:"Chooser2",props:{modelValue:{default:{}},options:{default:["Yes","No"]}},emits:["update:modelValue"],setup(e,{emit:t}){const a=t,i=e;function r(e){a("update:modelValue",e)}const u=(0,n.Fl)((()=>i.options));return(e,t)=>((0,n.wg)(),(0,n.iD)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(u.value,(e=>((0,n.wg)(),(0,n.iD)("button",{onClick:t=>r(e),key:e,class:(0,o.C_)({selected:e===i.modelValue})},(0,o.zw)(e),11,s)))),128))]))}}),r=a(726),u=a.n(r),c=a(599);"function"===typeof u()&&u()(i);const d=(0,c.Z)(i,[["__scopeId","data-v-49e9b041"]]);var _=d},858:function(e,t,a){"use strict";a.d(t,{Z:function(){return _}});var n=a(322),o=a(682);const l={class:"toggle-1"},s=["disabled"];var i=(0,n.aZ)({__name:"Toggle1",props:(0,n.Vf)({disabled:{type:Boolean}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=(0,n.tT)(e,"modelValue"),a=e;function i(){t.value=!t.value}return(e,r)=>((0,n.wg)(),(0,n.iD)("div",l,[(0,n._)("button",{disabled:a.disabled,onClick:r[0]||(r[0]=e=>i()),class:(0,o.C_)({selected:t.value})},[(0,n.WI)(e.$slots,"default")],10,s)]))}}),r=a(93),u=a.n(r),c=a(599);"function"===typeof u()&&u()(i);const d=(0,c.Z)(i,[["__scopeId","data-v-e6d0354e"]]);var _=d},960:function(){},726:function(){},93:function(){}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var a=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.m=__webpack_modules__,function(){__webpack_require__.amdO={}}(),function(){var e=[];__webpack_require__.O=function(t,a,n,o){if(!a){var l=1/0;for(u=0;u<e.length;u++){a=e[u][0],n=e[u][1],o=e[u][2];for(var s=!0,i=0;i<a.length;i++)(!1&o||l>=o)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](a[i])}))?a.splice(i--,1):(s=!1,o<l&&(l=o));if(s){e.splice(u--,1);var r=n();void 0!==r&&(t=r)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,n,o]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.j=826}(),function(){var e={826:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,o,l=a[0],s=a[1],i=a[2],r=0;if(l.some((function(t){return 0!==e[t]}))){for(n in s)__webpack_require__.o(s,n)&&(__webpack_require__.m[n]=s[n]);if(i)var u=i(__webpack_require__)}for(t&&t(a);r<l.length;r++)o=l[r],__webpack_require__.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return __webpack_require__.O(u)},a=self["webpackChunksge"]=self["webpackChunksge"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(89)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();